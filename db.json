{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/robots.txt","path":"robots.txt","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/beian.png","path":"images/beian.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/anime.min.js","path":"lib/anime.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/pisces.js","path":"js/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","path":"lib/font-awesome/css/all.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":0,"renderable":1}],"Cache":[{"_id":"source/google4bf2bf568982ee8b.html","hash":"6f9e86303759bd39c1ca51a15c8b42f78f62e172","modified":1631259479941},{"_id":"source/robots.txt","hash":"e729aec1c19fdbbcf5208dbc08d1264aaa72b928","modified":1631505622704},{"_id":"source/_posts/hello-world.md","hash":"ea27a787e038e76d6adcafdb1a7cc9bac19d8f76","modified":1631782138079},{"_id":"source/categories/index.md","hash":"ea17630667569ebd100d1660cc63101db680c596","modified":1631240141281},{"_id":"source/tags/index.md","hash":"3d105711008eaebe09a70035e94f08ed1caff0bc","modified":1631240002812},{"_id":"source/_posts/git/git仓库同时上传到github和gitee.md","hash":"04fdc2032418b273b920e9f70302f31fd4695dff","modified":1631782138090},{"_id":"source/_posts/git/git配置ssh.md","hash":"99e65eba53e455bb6872e43163d9bd94d8ae9f95","modified":1631782138088},{"_id":"source/_posts/html/分享几个html知识点.md","hash":"4ad7ccea5b71ae92ddec82fd5f867aafa2dfed35","modified":1631782138093},{"_id":"source/_posts/WeChat/微信扫一扫登录.md","hash":"0cfd9f468a64fa09dbb7f8318fdca4faa809bd28","modified":1631782138082},{"_id":"source/_posts/java/Java全局异常捕获处理.md","hash":"7a233450a7f9613892c32ea85a2882bbd1148ebf","modified":1631782138096},{"_id":"source/_posts/css/分享几个css生成工具.md","hash":"ffb9173211a70b99c85ca36926c156004d2bf33a","modified":1631782138086},{"_id":"source/_posts/java/java设置使用代理.md","hash":"9d853af6f28471c170a43971b9e7d5963e4a2578","modified":1631782138105},{"_id":"source/_posts/java/Springboot使用@value注入静态属性.md","hash":"1bafe229b0395b39b44964fa84c60cac3484891b","modified":1631782138098},{"_id":"source/_posts/docker/docker启动mysql容器之后报错.md","hash":"0eeaa75b92f4e17c6a69122f3bec3e6eb0b24901","modified":1631782138085},{"_id":"source/_posts/java/MyBatis-Plus通用查询工具类.md.md","hash":"b0a67ccef756a41dd58bdb8bf5900576e36b8d9c","modified":1631782138101},{"_id":"source/_posts/java/搭建maven私有仓库.md","hash":"323cf6aeb182710bbe935a7c35e7cbb098a43d74","modified":1631782138111},{"_id":"source/_posts/js/使用babel把es6转成es5.md","hash":"4810b347473216fdb5dbb8ab0864e7db53cd3ca7","modified":1631782138114},{"_id":"source/_posts/java/api自动增加前缀.md","hash":"ab13a4a7f9fa09c33979901f56aec3136502021f","modified":1631782138103},{"_id":"source/_posts/js/使用js下载文件.md","hash":"14dc7d24387cd6bf13c67a3f7edced7241cb01c5","modified":1631782138117},{"_id":"source/_posts/java/发布jar包到maven中央仓库（2021最新).md","hash":"ba786917f3019b3e1ad96a45ca4f7321f32c2b83","modified":1631782138107},{"_id":"source/_posts/nginx/Nginx代理与缓存.md","hash":"3b292c03bd1012ade68181d18bfb470b99b44c68","modified":1631782138119},{"_id":"source/_posts/nginx/Nginx配合后台服务控制文件的下载与预览.md","hash":"fa6643054a917909c36e58725d5e99dac8ae8120","modified":1631782138121},{"_id":"source/_posts/nginx/linux安装Nginx.md","hash":"d78e79fd95b9622e04100dd211ce7a1a8b854b76","modified":1631782138123},{"_id":"source/_posts/nginx/ssl证书结合Nginx搭建https站点(免费证书).md","hash":"e6184e5c795e19954f4f9b88e6a9dd2250a13c23","modified":1631782138126},{"_id":"source/_posts/nginx/跨域解决方案.md","hash":"6989d2dd7287c320e0d65035aaee69eae0d1c5ca","modified":1631782138133},{"_id":"source/_posts/node/nvm安装node.md","hash":"2cf74cee37692856c46b43f8795c251cbb5c7fb0","modified":1631782138129},{"_id":"source/_posts/os/linux挂载windows共享文件夹.md","hash":"5d12269eb48c249ef0d101726ea29b3e23e6d03a","modified":1631782138138},{"_id":"source/_posts/node/使用PhantomJS在服务端生成图片.md","hash":"5043c465d1411d1ec954d21f981bbfc4b03436f9","modified":1631782138130},{"_id":"source/_posts/os/Ubuntu用户管理.md","hash":"1d720053c6f87cff2091004232e22f3f681680cb","modified":1631782138135},{"_id":"source/_posts/os/Ubuntu群组管理.md","hash":"b4713cff57c9f2f19d3b75f295e145a5aaaf479b","modified":1631782138137},{"_id":"source/_posts/tool/jenkins启动jar.md","hash":"6b53f301708b8b64f3a766b67c25ae599d0de52a","modified":1631782138145},{"_id":"source/_posts/os/linux设置开机启动.md","hash":"a20ba3a6551293f49d89b707225e2131646f90dc","modified":1631782138140},{"_id":"source/_posts/os/linux防火墙基本操作.md","hash":"b149c6ba400a775e4492af8144dfb19e8b63b741","modified":1631782138143},{"_id":"source/_posts/os/ubuntu下WebStorm无法输入中文.md","hash":"6c7d47740db42c9dd1942d94cc0c285084af5d16","modified":1631782138150},{"_id":"source/_posts/tool/中国行政区域数据.md","hash":"9f2ecb11cdb8655772edabe2c49e73c578e12749","modified":1631782138151},{"_id":"source/_posts/tool/免费获取JetBrains一年全家桶.md","hash":"883db85204845b6e5dd9132a5dfce472e3805f40","modified":1631782138155},{"_id":"source/_posts/tool/使用第三方授权登录自己的网站.md","hash":"4c7dba2549d9eaa2dd88823b9c4410978d070677","modified":1631782138153},{"_id":"source/_posts/ts/使用typescript与webpack搭建开发环境(三).md","hash":"20a1f45124ca634d8a5dd432cbb431d8d3043a5c","modified":1631782138161},{"_id":"source/_posts/java/api自动增加前缀/api.png","hash":"ee25f22d48e01771964584bbe74696b3fa92e490","modified":1631242602886},{"_id":"source/_posts/ts/使用typescript与webpack搭建开发环境(一).md","hash":"31b1867272be1f025a297d888325b423afbcd93f","modified":1631782138157},{"_id":"themes/next/.editorconfig","hash":"731c650ddad6eb0fc7c3d4a91cad1698fe7ad311","modified":1631236593422},{"_id":"themes/next/.eslintrc.json","hash":"d3c11de434171d55d70daadd3914bc33544b74b8","modified":1631236593423},{"_id":"themes/next/.gitattributes","hash":"3e00e1fb043438cd820d94ee3dc9ffb6718996f3","modified":1631236593424},{"_id":"themes/next/.gitignore","hash":"83418530da80e6a78501e1d62a89c3bf5cbaec3d","modified":1631236593429},{"_id":"themes/next/.travis.yml","hash":"379f31a140ce41e441442add6f673bf397d863ea","modified":1631236593430},{"_id":"source/_posts/ts/使用typescript与webpack搭建开发环境(二).md","hash":"f7cb2d20c1f5d581c9b356805384a312f2fe4ca0","modified":1631782138163},{"_id":"source/_posts/ts/使用typescript与webpack搭建开发环境(四).md","hash":"077c8ecf6e470e6b12f8de21c5f99d94448571fe","modified":1631782138166},{"_id":"themes/next/_config.yml","hash":"b9fc47a72aa929b041b71f34c52488a4181c3220","modified":1635385211050},{"_id":"themes/next/crowdin.yml","hash":"4a53f5985e545c635cb56b2a57ed290cb8cf8942","modified":1631236593431},{"_id":"themes/next/.stylintrc","hash":"6259e2a0b65d46865ab89564b88fc67638668295","modified":1631236593429},{"_id":"themes/next/LICENSE.md","hash":"0a9c7399f102b4eb0a6950dd31264be421557c7d","modified":1631236593430},{"_id":"themes/next/package.json","hash":"b099e7cea4406e209130410d13de87988ba37b2a","modified":1631236593550},{"_id":"themes/next/gulpfile.js","hash":"0c76a1ac610ee8cbe8e2cc9cca1c925ffd0edf98","modified":1631236593441},{"_id":"themes/next/README.md","hash":"7d56751b580d042559b2acf904fca4b42bcb30a7","modified":1631236593430},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"60c7e9ef0c578deebad43e9395c958fa61096baf","modified":1631236593432},{"_id":"themes/next/docs/AGPL3.md","hash":"f463f95b169d64983f59fa6f3e4b6760290a0e6b","modified":1631236593432},{"_id":"themes/next/docs/AUTHORS.md","hash":"cde7cc095ac31b421a573042cf61060f90d9ad0d","modified":1631236593432},{"_id":"themes/next/docs/INSTALLATION.md","hash":"07ea00bee149a1bdc9073e903ee6b411e9f2f818","modified":1631236593433},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"6cc663db5e99fd86bb993c10d446ad26ada88e58","modified":1631236593434},{"_id":"themes/next/docs/DATA-FILES.md","hash":"980fb8d37701f7fd96b30bb911519de3bbb473d1","modified":1631236593432},{"_id":"themes/next/languages/ar.yml","hash":"abcf220bd615cec0dd50e4d98da56580169d77e1","modified":1631236593442},{"_id":"themes/next/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1631236593442},{"_id":"themes/next/languages/de.yml","hash":"15078b7ede1b084e8a6a15d271f0db9c325bd698","modified":1631236593442},{"_id":"themes/next/languages/en.yml","hash":"ca103c4ec93d80bc8348c17c4c70d121f219844c","modified":1631246660193},{"_id":"themes/next/languages/es.yml","hash":"f064c793d56a5e0f20cda93b6f0e355044efc7d8","modified":1631236593443},{"_id":"themes/next/languages/fa.yml","hash":"6c0a7d5bcc26eb45a9f3e02f13117c668e77fffd","modified":1631236593443},{"_id":"themes/next/languages/fr.yml","hash":"3e2f89d4bb4441d33ecc7b5a4ee114f627603391","modified":1631236593444},{"_id":"themes/next/languages/hu.yml","hash":"0ea89ffaefd02a10494995f05a2a59d5e5679a28","modified":1631236593444},{"_id":"themes/next/languages/it.yml","hash":"46222f468e66789e9ba13095809eb5e5b63edf30","modified":1631236593444},{"_id":"themes/next/languages/id.yml","hash":"7599bb0ecf278beb8fde3d17bfc148a3241aef82","modified":1631236593444},{"_id":"themes/next/languages/ko.yml","hash":"af4be6cb394abd4e2e9a728418897d2ed4cc5315","modified":1631236593445},{"_id":"themes/next/languages/ja.yml","hash":"bf279d0eb1911806d01a12f27261fbc76a3bb3f9","modified":1631236593445},{"_id":"themes/next/languages/nl.yml","hash":"9749cf90b250e631dd550a4f32ada3bb20f66dd0","modified":1631236593445},{"_id":"themes/next/languages/pt-BR.yml","hash":"69aa3bef5710b61dc9a0f3b3a8f52f88c4d08c00","modified":1631236593445},{"_id":"themes/next/languages/pt.yml","hash":"f6606dd0b916a465c233f24bd9a70adce34dc8d6","modified":1631236593446},{"_id":"themes/next/languages/ru.yml","hash":"012abc694cf9de281a0610f95f79c594f0a16562","modified":1631236593446},{"_id":"themes/next/languages/tr.yml","hash":"c4e9ab7e047ae13a19f147c6bec163c3ba2c6898","modified":1631236593446},{"_id":"themes/next/languages/uk.yml","hash":"69ef00b1b8225920fcefff6a6b6f2f3aad00b4ce","modified":1631236593446},{"_id":"themes/next/languages/vi.yml","hash":"6a578cc28773bd764f4418110500478f185d6efa","modified":1631236593447},{"_id":"themes/next/languages/zh-CN.yml","hash":"2ae27bccab39d017ee9ad4dc432ecb91cfd0fb63","modified":1631248191590},{"_id":"themes/next/languages/zh-HK.yml","hash":"92ccee40c234626bf0142152949811ebe39fcef2","modified":1631236593447},{"_id":"themes/next/languages/zh-TW.yml","hash":"cf0740648725983fb88409d6501876f8b79db41d","modified":1631236593447},{"_id":"themes/next/layout/_layout.swig","hash":"a3b505244e812c33b3a4cf8dcc0a88b09a196af9","modified":1631247699195},{"_id":"themes/next/layout/category.swig","hash":"c546b017a956faaa5f5643c7c8a363af7ac9d6b9","modified":1631236593548},{"_id":"themes/next/layout/archive.swig","hash":"d9bca77f6dcfef71e300a294f731bead11ce199f","modified":1631236593548},{"_id":"themes/next/layout/index.swig","hash":"8dfd96fb6f833dd5d037de800813105654e8e8e6","modified":1631236593548},{"_id":"themes/next/layout/page.swig","hash":"357d916694d4c9a0fd1140fa56d3d17e067d8b52","modified":1631236593548},{"_id":"themes/next/layout/post.swig","hash":"5f0b5ba2e0a5b763be5e7e96611865e33bba24d7","modified":1631236593549},{"_id":"themes/next/layout/tag.swig","hash":"d44ff8755727f6532e86fc9fc8dc631200ffe161","modified":1631236593549},{"_id":"themes/next/scripts/renderer.js","hash":"e3658eea97b1183ee2e9f676231e53f7994741f6","modified":1631236593603},{"_id":"themes/next/docs/LICENSE.txt","hash":"ae5ad07e4f4106bad55535dba042221539e6c7f9","modified":1631236593434},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"1e86d32063b490d204baa9d45d8d3cb22c24a37d","modified":1631236593434},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"54e6a067ed95268eab6be2ba040a7e9b1907928e","modified":1631236593435},{"_id":"themes/next/docs/MATH.md","hash":"f56946053ade0915ff7efa74d43c38b8dd9e63bb","modified":1631236593434},{"_id":"themes/next/docs/ru/README.md","hash":"1e5ddb26ad6f931f8c06ce2120f257ff38b74fdf","modified":1631236593436},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"a9cfe5ac9ef727a8650b2b6584482751a26b1460","modified":1631236593436},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"3202be9a8d31986caac640e7a4c7ce22e99917eb","modified":1631236593437},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"611f2930c2b281b80543531b1bf33d082531456a","modified":1631236593438},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7e6f227f2aaf30f400d4c065650a4e3d0d61b9e1","modified":1631236593438},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"50ab381c27611d5bf97bb3907b5ca9998f28187d","modified":1631236593440},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"cb8e39c377fc4a14aaf133b4d1338a48560e9e65","modified":1631236593437},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"2d868cd271d78b08775e28c5b976de8836da4455","modified":1631236593439},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"716111dd36d276f463c707dfcc9937fea2a1cf7a","modified":1631236593440},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"30ade8c806d7826cc50a4a3e46a9e6213fddf333","modified":1631236593448},{"_id":"themes/next/layout/_macro/post.swig","hash":"c3fd56bac90ce45a0c79ddfe68beb223ad0d72b4","modified":1631236593448},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"5bffdb1448caca7db7b1f84e1693e6657a106d50","modified":1631236593449},{"_id":"themes/next/layout/_partials/comments.swig","hash":"142efb4c6b73d8f736f6784804b40d5871333172","modified":1631236593449},{"_id":"themes/next/layout/_partials/footer.swig","hash":"e031914c98f082d918ece4c35fdd0a5be1c4e845","modified":1631236593449},{"_id":"themes/next/layout/_partials/languages.swig","hash":"c3ea82604a5853fb44c5f4e4663cbe912aa5dcf8","modified":1631236593457},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"2de77d533c91532a8a4052000244d0c1693370df","modified":1631236593458},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"5392dcbb504266f0f61d5b8219914068ef9cdc25","modified":1631236593461},{"_id":"themes/next/layout/_scripts/index.swig","hash":"1822eaf55bbb4bec88871c324fc18ad95580ccb4","modified":1631236593461},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"7b9e0f776a5be6c3f95bc7f394e1424ba02ba93b","modified":1631236593461},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"ccff5a773644d33ff22f6b45b6734f52b048f22b","modified":1631236593466},{"_id":"themes/next/layout/_scripts/three.swig","hash":"6b092c6d882b2dfa5273e1b3f60b244cb7c29fcd","modified":1631236593474},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"244ca2d74ee0d497c87572c6a26b43c62a952673","modified":1631236593474},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"28b0a7e843ec4365db1963646659a153753cd746","modified":1631236593490},{"_id":"themes/next/layout/_third-party/index.swig","hash":"c6b63cbc80938e6e09578b8c67e01adf13a9e3bd","modified":1631236593517},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"269102fc5e46bd1ce75abdcce161f0570ae70e2f","modified":1631236593518},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"5ae5adcd6f63ed98b2071e4f7e5e38c4d7d24e1b","modified":1631236593518},{"_id":"themes/next/scripts/events/index.js","hash":"5c355f10fe8c948a7f7cd28bd8120adb7595ebde","modified":1631236593550},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"ad321db012cea520066deb0639335e9bc0dcc343","modified":1631236593562},{"_id":"themes/next/scripts/filters/front-matter.js","hash":"305d03c1e45782988809298c3e3b3c5d5ee438aa","modified":1631236593562},{"_id":"themes/next/scripts/filters/locals.js","hash":"a5e7d05d3bd2ae6dcffad5a8ea0f72c6e55dbd02","modified":1631236593562},{"_id":"themes/next/scripts/filters/minify.js","hash":"21196a48cb127bf476ce598f25f24e8a53ef50c2","modified":1631236593601},{"_id":"themes/next/scripts/filters/post.js","hash":"57f2d817578dd97e206942604365e936a49854de","modified":1631236593601},{"_id":"themes/next/scripts/helpers/engine.js","hash":"eb6b8bbc1dce4846cd5e0fac0452dbff56d07b5d","modified":1631236593602},{"_id":"themes/next/scripts/helpers/font.js","hash":"8fb1c0fc745df28e20b96222974402aab6d13a79","modified":1631236593602},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"b8d7ddfa4baa9b8d6b9066a634aa81c6243beec9","modified":1631236593602},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"4044129368d0e2811859a9661cad8ab47118bc32","modified":1631236593603},{"_id":"themes/next/scripts/tags/button.js","hash":"bb0e8abbc0a6d5b3a1a75a23976f2ac3075aab31","modified":1631236593603},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"e2d0184bc4a557e1017395b80ff46880078d8537","modified":1631236593603},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"840536754121e0da5968f5ad235f29200fc5d769","modified":1631236593603},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"93ccd3f99d3cb42674f29183c756df63acb5d7f8","modified":1631236593604},{"_id":"themes/next/scripts/tags/label.js","hash":"fc83f4e1be2c34e81cb79938f4f99973eba1ea60","modified":1631236593604},{"_id":"themes/next/scripts/tags/note.js","hash":"1fdf4f95810fdb983bfd5ad4c4f13fedd4ea2f8d","modified":1631236593605},{"_id":"themes/next/scripts/tags/pdf.js","hash":"37b53661ad00a01a2ca7d2e4a5ad3a926073f8e2","modified":1631236593605},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"81134494ff0134c0dae1b3815caf6606fccd4e46","modified":1631236593605},{"_id":"themes/next/scripts/tags/tabs.js","hash":"c70a4a66fd0c28c98ccb6c5d5f398972e5574d28","modified":1631236593605},{"_id":"themes/next/scripts/tags/video.js","hash":"944293fec96e568d9b09bc1280d5dbc9ee1bbd17","modified":1631236593606},{"_id":"themes/next/source/css/_colors.styl","hash":"11aef31a8e76f0f332a274a8bfd4537b73d4f88f","modified":1631236593606},{"_id":"themes/next/source/css/_mixins.styl","hash":"072a3fa473c19b20ccd7536a656cda044dbdae0a","modified":1631236593708},{"_id":"themes/next/source/css/main.styl","hash":"0ca76007ef0ddab475c26de6a3c8b7d4dcbc0351","modified":1631246208678},{"_id":"themes/next/docs/zh-CN/README.md","hash":"8f7c0d0b766024152591d4ccfac715c8e18b37f3","modified":1631236593441},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1631236593720},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"0d46f9f50cf2e4183970adce705d1041155b0d37","modified":1631236593440},{"_id":"themes/next/source/images/beian.png","hash":"29c400bc3b89f6085766dac4e0330ded5cb73d52","modified":1631249611115},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1631236593721},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1631236593722},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1631236593721},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1631236593722},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1631236593722},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1631236593720},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1631236593722},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1631236593723},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1631236593723},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1631236593723},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1631236593723},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1631236593723},{"_id":"themes/next/source/js/local-search.js","hash":"cfa6a0f3f9c2bc759ee507668a21f4e8f250f42a","modified":1631236593724},{"_id":"themes/next/source/js/motion.js","hash":"d5aa1a08cdf3c8d1d8d550fb1801274cc41e5874","modified":1631236593724},{"_id":"themes/next/source/js/next-boot.js","hash":"250d8dcd6322e69e3fbadd0f3e37081c97b47c52","modified":1631236593725},{"_id":"themes/next/source/js/utils.js","hash":"26a82e46fdcadc7c3c2c56a7267284b61a26f7f3","modified":1631236593726},{"_id":"themes/next/source/lib/anime.min.js","hash":"960be51132134acd65c2017cc8a5d69cb419a0cd","modified":1631236593727},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"7d638e413f2548fc990c4a467dd03de6c81fc960","modified":1631236593450},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"90cce9f407e9490756ba99580e3eb09f55b05eaa","modified":1631236593450},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"91056a6c98cca63ff8cc6956e531ee3faf4b8ad9","modified":1631236593451},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"0dd316f153c492c0a03bd0273d50fa322bc81f11","modified":1631236593452},{"_id":"themes/next/layout/_partials/header/menu-item.swig","hash":"4baa86ca631168fc6388d27f4b1b501b40c877a8","modified":1631236593452},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"bed6cc2b48cf2655036ba39c9bae73a295228a4d","modified":1631236593457},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"90d3eaba6fbe69bee465ddd67c467fd2c0239dc4","modified":1631248570671},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"91c0addb33006619faa4c32e5d66874e25f1e9b3","modified":1631236593458},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"8d4e3dd0d3631ce0b21bc15c259f6ac886de631d","modified":1631236593458},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"f2eb455c8bf13533427254f0c9b4b17b2498168b","modified":1631236593458},{"_id":"themes/next/layout/_partials/post/post-followme.swig","hash":"d8f785c062c6b0763a778bd4a252e6f5fee0e432","modified":1631236593459},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"ce712c110b5ce8aacba7a86b0558ff89700675c9","modified":1631236593459},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"f349a226e5370075bb6924e60da8b0170c7cfcc1","modified":1631236593460},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"bc7b047a6246df07767373644b1637d91c3a88b1","modified":1631236593459},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"98fd1f5df044f4534e1d4ca9ab092ba5761739a9","modified":1631236593460},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"a6c761d5193cb6f22e9422dbbcf209e05471b0ed","modified":1631236593460},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"128f7d679bb4d53b29203d598d217f029a66dee7","modified":1631236593460},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"7b2ef5db9615267a24b884388925de1e9b447c1f","modified":1631236593461},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"34c05e9d73b0f081db70990c296b6d6a0f8ea2ca","modified":1631236593462},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1631236593467},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1631236593467},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1631236593468},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1631236593474},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"84adaadd83ce447fa9da2cff19006334c9fcbff9","modified":1631236593475},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"91c2cb900c76224c5814eeb842d1d5f517f9bf05","modified":1631236593489},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b8819bd056f8a580c5556d4415836a906ed5d7a4","modified":1631236593476},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"85b60e222712ca3b2c4dc2039de2dc36b8d82940","modified":1631236593490},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"2642e8aef5afbe23a2a76efdc955dab2ee04ed48","modified":1631236593490},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"fb94ee487d75e484e59b7fba96e989f699ff8a83","modified":1631236593491},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"9298e6d6c4a62a0862fc0f4060ed99779d7b68cb","modified":1631236593502},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"1b29b99fa921f12c25d3dc95facdf84ef7bb1b5c","modified":1631236593502},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"a42f97eda3748583bac2253c47fe5dfa54f07b8f","modified":1631236593503},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"606ad14a29320157df9b8f33738282c51bb393d9","modified":1631236593516},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"3d91899ca079e84d95087b882526d291e6f53918","modified":1631236593516},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"ae2707d6e47582bb470c075649ec7bad86a6d5a9","modified":1631236593517},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"59df21fcfe9d0ada8cee3188cb1075529c1c3eb8","modified":1631236593517},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"276f523e414d4aa7f350a8f2fd3df8a3d8ea9656","modified":1631236593517},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"1f34b2d3c753a3589ab6c462880bd4eb7df09914","modified":1631236593518},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"fd726aad77a57b288f07d6998ec29291c67c7cbb","modified":1631236593518},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"58296a5c1883f26464c2a5ccf734c19f5fbf395a","modified":1631236593519},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"aa6ab95b8b76611694613defb4bf25003d1b927f","modified":1631236593537},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.swig","hash":"d2f0e4c598410ec33785abe302c7ea7492bb791a","modified":1631236593537},{"_id":"themes/next/layout/_third-party/statistics/cnzz-analytics.swig","hash":"53a0760c75d5aaabb3ce8e8aa8e003510d59807f","modified":1631236593538},{"_id":"themes/next/layout/_third-party/statistics/firestore.swig","hash":"01d94354d07e72cad47100482068b6be69fcc033","modified":1631236593547},{"_id":"themes/next/layout/_third-party/statistics/index.swig","hash":"964cd6bac668cf6d211a2624fbef3948cfdece55","modified":1631236593547},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.swig","hash":"c171ea94e9afbba97f06856904264da331559463","modified":1631236593547},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"619338ddacf01e3df812e66a997e778f672f4726","modified":1631236593547},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"5a223b60406cee7438cfe3a5e41d1284425aa7a5","modified":1631236593548},{"_id":"themes/next/scripts/events/lib/config.js","hash":"aefe3b38a22bc155d485e39187f23e4f2ee5680a","modified":1631236593551},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"e73f697bb160b223fdde783237148be5f41c1d78","modified":1631236593552},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"08496b71c9939718e7955704d219e44d7109247b","modified":1631236593551},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"2f22f48f7370470cef78561a47c2a47c78035385","modified":1631236593552},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"713056d33dbcd8e9748205c5680b456c21174f4e","modified":1631236593553},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"0c3bea89d64bc12c1bbe6f208a83773c6fb5375a","modified":1631236593553},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"3a80559df0b670ccb065ea9d3bb587d0b61be3a4","modified":1631236593553},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"67cf90d9a2428c14eb113a64bdd213c22a019aef","modified":1631236593554},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"323a47df6ded894944a2647db44556d6163e67c4","modified":1631236593561},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"a4f3153ac76a7ffdf6cc70f52f1b2cc218ed393e","modified":1631236593562},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"851359f5ff90f733a9bd7fe677edbee8b8ac714c","modified":1631236593562},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"63360d012de044905648f051867ec78927d0b73a","modified":1631245750004},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"583ff1e7a2ca889f1f54eb0ca793894466823c7c","modified":1631236593718},{"_id":"themes/next/source/js/algolia-search.js","hash":"6a813410e33824d7acc65a369a2983912bb3420c","modified":1631236593724},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"c22b58af3327236ec54d5706501aa5a20e15012e","modified":1631236593719},{"_id":"themes/next/source/js/bookmark.js","hash":"9f05fd3672789311dc0cf5b37e40dc654cb04a2a","modified":1631236593724},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4e33774b1fe6d0a51f3a428c54c5e600e83bf154","modified":1631236593719},{"_id":"themes/next/source/css/_variables/base.styl","hash":"ad680efdfb2f86546182bf3f59886efbcf3c1b2d","modified":1631236593720},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"b85a6e2af1387fe64b51e7cd3e2da8616e6f5a3f","modified":1631236593726},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1631236593732},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1631236593732},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"510a6f0ba7485dd54ce347cca890ab52c4957081","modified":1631236593606},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"d17236df3b4d6def1e4e81133ef4729c390de3ac","modified":1631236593607},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"0534b329d279a6f255112b3305ff92c810f31724","modified":1631236593607},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"c52648a7b09f9fe37858f5694fcc1ffc709ad147","modified":1631236593672},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"5980abbbbeacd8541121f436fa414d24ad5e97c2","modified":1631236593718},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"7a95c27762e1303bf06ee808c63f616cb192fcaf","modified":1631236593684},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5540c9259cb7895a5f10a289c7937e5470a7c134","modified":1631236593691},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"45f4badac6ec45cf24355f6157aece1d4d3f1134","modified":1631236593692},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"4b068d0d898f4e624937503f0e1428993050bd65","modified":1631236593694},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"6d740699fb6a7640647a8fd77c4ea4992d8d6437","modified":1631236593698},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"b619f39e18398422e0ac4999d8f042a5eaebe9cd","modified":1631236593699},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"43045d115f8fe95732c446aa45bf1c97609ff2a5","modified":1631236593700},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"f317d2e3886e94f5fbb8781c2e68edd19669ff58","modified":1631236593700},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"20e0e3e3eba384930c022e21511214d244b4c9e7","modified":1631236593708},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"e342b8f8e11a3a6aa5a029912c9778c25bf5d135","modified":1631236593709},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"49c76bc723d3952abb613d9d68398ed7305da999","modified":1631236593713},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"8674bd88df076a1dfe4023ed6750ded1f5b00223","modified":1631236593712},{"_id":"themes/next/source/js/schemes/muse.js","hash":"a18559a9c332199efad0100cf84bb0c23fc0f17a","modified":1631236593725},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"9898323ee5a7ac2a5d4f633c653112280beb2643","modified":1631236593713},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"2d3e05015796a790abd9d68957a5c698c0c9f9b6","modified":1631236593714},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1631236593714},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"a2ee16cac29a82cfce26804c160286fcbee94161","modified":1631236593683},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"b9e87d32da24264bda247c1526afe140c858b0ef","modified":1631236593709},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"716e8b0f056bf6393e6bc6969ac84598ab8e7a6f","modified":1631236593709},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"12b265f82840f27112ca2b1be497677f20f87545","modified":1631236593709},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"c5142739e01e9f25c8b32b2209af85c787bb2b42","modified":1631236593712},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"558794fced306339b98dc2b0ee7f0576802f1355","modified":1631236593715},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5de34e1d8a290751641ae456c942410852d5e809","modified":1631236593715},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"0a9f0d9eb042595502d200fb8c65efb0e6c89aa9","modified":1631236593716},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"dc9318992ce2eb086ebaa2fe56b325e56d24098b","modified":1631236593717},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"b69ac38b9da8c9c1b7de696fdeea7f9d7705213a","modified":1631236593717},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"e1c29b81a32273a0dedd926cda199a71aea72624","modified":1631236593712},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1631236593717},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","hash":"82e34d28f8a1169b20b60101d5bb0446deba3514","modified":1631236593729},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1631236593730},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"236a039b0900f4267de566b46f62314ad967d30f","modified":1631236593609},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"18edddb2ffb3f85a68e4367f81e06c461e07bc25","modified":1631236593609},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"6cf78a379bb656cc0abb4ab80fcae60152ce41ad","modified":1631236593610},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"f6f05f02d50f742c84ee5122016c0563a8bb2cf9","modified":1631236593663},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"97974c231b4659b8aa5e9321c4d54db5c816d0db","modified":1631236593663},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"9af620eba5ccceea21a0e3bc69f6f1fa7637c2f3","modified":1631236593665},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"a52f8cae599099231866298ed831fdf76c9b6717","modified":1631236593664},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"70b3eb9d36543ab92796ac163544e9cf51b7c1e6","modified":1631236593666},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"97dec98d0403097d66822f1c90b50b2890c84698","modified":1631236593666},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"0dfb97703a519d9438f64f9e41ab1dd37381f733","modified":1631236593667},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"93ba8172c0d2c37d738e6dbd44fcd5a2e23b92f3","modified":1631236593668},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"2c24829d95c742eb9e8316ebf2fbe9f2c168b59a","modified":1631236593669},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"66fc406796b6efe6cea76550573b7a632112406a","modified":1631236593669},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"09dda2667628d1f91b2e37d8fc6df1413f961b64","modified":1631236593669},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5cc9e7394c927065c688cba5edd6e0a27587f1d8","modified":1631236593670},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"b266d2ce5e2b117be01537889e839a69004dc0bb","modified":1631236593670},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"fcd64c23d17775b3635325f6758b648d932e79b5","modified":1631236593671},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"b87f4a06c0db893df4f756f24be182e1a4751f24","modified":1631236593672},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"d83102771df652769e51ddfd041cf5f4ca1a041d","modified":1631236593673},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"8ed7a9d5dfac592de703421b543978095129aa5b","modified":1631236593675},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"bad99f4cccb93b3cefe990a2c85124e60698d32e","modified":1631236593676},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1f6b0d3ab227697ca115e57fd61122ea7950e19d","modified":1631236593676},{"_id":"themes/next/source/css/_common/outline/footer/footer.styl","hash":"7eeb22c5696f8e0c95161dc57703973cf81c8c12","modified":1631236593678},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"b4f4bae437d4f994af93cf142494ffcd86bae46b","modified":1631236593678},{"_id":"themes/next/source/css/_common/outline/header/header.styl","hash":"300058ca12e81013e77ba01fe66ac210525768b6","modified":1631236593679},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"b31c86d1a4f89837f9187bed646bda96b2cd286c","modified":1631236593679},{"_id":"themes/next/source/css/_common/outline/header/headerband.styl","hash":"6d5f26646e2914474f295de8bf6dc327d4acd529","modified":1631236593680},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"7a3a56b10ab714c0e2ed240d0939deeecdcad167","modified":1631236593681},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"b8c816fba0a9b4a35fbae03ba5b1b2da96ba2687","modified":1631236593682},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"3d16ac0f4ccaeed868c246d4d49bde543d1f62cb","modified":1631236593682},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"49722d555a2edb18094bb2cb3d7336dd72051b93","modified":1631236593685},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"357f825f0a649b2e28cba1481d4c9a0cb402e43a","modified":1631236593686},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"096f908c08ce553e482aadfd3e767a0145191093","modified":1631236593687},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"525242ce9e912c4adfe5134347c67dbdb9e98e3d","modified":1631236593688},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"12f7eaf6b56624cbc411528562d6bb848ff97039","modified":1631236593688},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"b11b04737a1a0fea3bd9f0081d96ee6c015358d4","modified":1631236593688},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"fa0a2ea57b7b4ce75b5d18c264af2d92ea3192f9","modified":1631236593689},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"098b4bdf49c7300490f959386d5d1185a32543f6","modified":1631236593689},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar.styl","hash":"5d540f683018745a5ed1d6f635df28ea610c1244","modified":1631236593690},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"67a1fcb33535122d41acd24f1f49cf02c89b88fa","modified":1631236593690},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"4079e616fbf36112dec0674c1e0713d1d9769068","modified":1631236593695},{"_id":"themes/next/source/css/_common/scaffolding/highlight/diff.styl","hash":"83bd737f663a8461e66985af8ddbfc0a731fc939","modified":1631236593696},{"_id":"themes/next/source/css/_common/scaffolding/highlight/highlight.styl","hash":"80488259271bcfe38031f4c2e902463daba9336b","modified":1631236593697},{"_id":"themes/next/source/css/_common/scaffolding/highlight/theme.styl","hash":"c911045b2ce9a66e38d9dd30c7ed078abbc10cbf","modified":1631236593698},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"ceacfa6218f6084c71a230b086e5d2708d29927e","modified":1631236593702},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"aca7bb220fc14ef2a8f96282d2a95a96a9238d46","modified":1631236593702},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"8b7aafb911850c73074cdb6cc87abe4ac8c12e99","modified":1631236593705},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"adaf0f580fccf4158169eeaf534a18005b39a760","modified":1631236593707},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"03a5bcecc0b12231462ef6ffe432fa77ee71beff","modified":1631236593707},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"3256e39f281f06751a1c0145d9806a0e56d68170","modified":1631236593708},{"_id":"themes/next/source/css/_common/scaffolding/tags/tags.styl","hash":"51d46fa3c7c6b691c61a2c2b0ac005c97cfbf72b","modified":1631236593708},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1631236593730},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1631236593731},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"4b7f057dbb53efd7cbe7eac7835a793ab3cbb135","modified":1631236593713},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"57b9a179675f1536e017cba457b6ac575e397c4f","modified":1631236593667},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"b3201934b966bc731eaf8a4dad4ba4bdcd300c10","modified":1631236593441},{"_id":"public/sitemap.xml","hash":"0b5b9a2fcb6fcdbe9385574b75ed5d8b84249464","modified":1632900449209},{"_id":"public/search.xml","hash":"7e45dd5029e2b5e3a30461e7e21a667433f7f8c5","modified":1632900449209},{"_id":"public/google4bf2bf568982ee8b.html","hash":"028f460115feb80c0ab30b1dafe24a63079b93e3","modified":1632900449209},{"_id":"public/categories/index.html","hash":"d82f4b5121a8402e17b80a27ac3b7f3e3c0a5ca5","modified":1632900449209},{"_id":"public/categories/docker/index.html","hash":"cc6c70003c57b151ed8eed517b55b7af1c4608d9","modified":1632900449209},{"_id":"public/categories/html/index.html","hash":"d126535e177f9d269de7fcb9be223be4bd9bb014","modified":1632900449209},{"_id":"public/categories/JavaScript/index.html","hash":"c1ac118cade26d3e658e913b2a36fc4d01be682e","modified":1632900449209},{"_id":"public/categories/Nginx/index.html","hash":"6863445f6bcd56f8c7c163361fb05d6b9b02cd1c","modified":1632900449209},{"_id":"public/categories/操作系统/index.html","hash":"7c729b2f35e87df6ae9fa9946c5ff6b94dfd14a8","modified":1632900449209},{"_id":"public/categories/TypeScript/index.html","hash":"c469488573d53a491fe496daa5ee3b922cfef403","modified":1632900449209},{"_id":"public/tags/wechat/index.html","hash":"e03f18311efd74b66a343e30a264668c0fc7c258","modified":1632900449209},{"_id":"public/tags/小程序/index.html","hash":"1b95d273769caf0c0fa00d5a1df23041c304fc65","modified":1632900449209},{"_id":"public/tags/node/index.html","hash":"f524ad84b7955793f5ebad077f5cb39426cb70d2","modified":1632900449209},{"_id":"public/tags/docker/index.html","hash":"6cac2a65d8c17b680a79be5b00388b09e9289b2b","modified":1632900449209},{"_id":"public/tags/mysql/index.html","hash":"2b87dcaf8da0d4b3b1f67680b618b4db5c2b61eb","modified":1632900449209},{"_id":"public/tags/css/index.html","hash":"51bbf2c7c9fcd3db70662dd07a7690b8f6a89205","modified":1632900449209},{"_id":"public/tags/git/index.html","hash":"789779891591ba3582b34c8dd63c00dad8f6ac4f","modified":1632900449209},{"_id":"public/tags/ssh/index.html","hash":"1eae3ca7a4ebc5371071dba72ec4205e027b89cd","modified":1632900449209},{"_id":"public/tags/html/index.html","hash":"59b15dfa61fbb6abbafc593cd67eca00c19eb1b4","modified":1632900449209},{"_id":"public/tags/异常/index.html","hash":"768c1a344e598006e5a3ca1ae6510bd7b55ffda1","modified":1632900449209},{"_id":"public/tags/springboot/index.html","hash":"4f260ab182d47ac3d313b8bb0a33fd0aa942230a","modified":1632900449209},{"_id":"public/tags/mybatis-plus/index.html","hash":"b59602c0a2e6074990505cfd074b3d5954a5b394","modified":1632900449209},{"_id":"public/tags/maven/index.html","hash":"08e0689d374657155c2ecff96b9cd68928912964","modified":1632900449209},{"_id":"public/tags/gpg/index.html","hash":"d38fdf89d4beb06bc12ac15fcc7779ac9078f02c","modified":1632900449209},{"_id":"public/tags/nexus/index.html","hash":"cf52fef26ef527512d18cb0697dd2c8ec67f7cbc","modified":1632900449209},{"_id":"public/tags/JavaScript/index.html","hash":"2024ed75c79e4966ae246a769c600ad82adfba5f","modified":1632900449209},{"_id":"public/tags/es6/index.html","hash":"8de7c0d30fd73f4744ee70a12e870f30620fcc4b","modified":1632900449209},{"_id":"public/tags/es5/index.html","hash":"86249c5e12afcb3b732a40f50b77fcd61c521c6b","modified":1632900449209},{"_id":"public/tags/babel/index.html","hash":"0163566c833c38e534d77b18987a1ec762cb606d","modified":1632900449209},{"_id":"public/tags/webpack/index.html","hash":"1e9e077982d1121a734ed81dcaa4dd9a0f51f3d8","modified":1632900449209},{"_id":"public/tags/js/index.html","hash":"c3b42ad3f3e5fefb578ed622ece8dffceed3e29f","modified":1632900449209},{"_id":"public/tags/nginx/index.html","hash":"26cc268012c9a2c71671bb7a96247bda84c75231","modified":1632900449209},{"_id":"public/tags/proxy/index.html","hash":"43d8562f34d7d0abfd20764537ecbd49fddb4056","modified":1632900449209},{"_id":"public/tags/cache/index.html","hash":"f30acc2b2960fe1c6508d7f318b8c05247d50bba","modified":1632900449209},{"_id":"public/tags/linux/index.html","hash":"055105b475c85654c5e7ca6e0f3fe7e3384920d5","modified":1632900449209},{"_id":"public/tags/https/index.html","hash":"b7b07ecd0e5d36360e62dc3cdc44547b226dd4bd","modified":1632900449209},{"_id":"public/tags/nvm/index.html","hash":"4744e9455db9b20696b6a08ea1021a4c90b4a1b1","modified":1632900449209},{"_id":"public/tags/ubuntu/index.html","hash":"c14bc1c44a64bb9b942a3066fad207d931f20c10","modified":1632900449209},{"_id":"public/tags/centos/index.html","hash":"6c0953df994756a1efd7b90c314953391d73d99e","modified":1632900449209},{"_id":"public/tags/jenkins/index.html","hash":"ad7d3aa2d2f1bf553315b781e965a031c353e780","modified":1632900449209},{"_id":"public/tags/webstorm/index.html","hash":"ad32490e486ade3c9b3342591722c0e585e5304d","modified":1632900449209},{"_id":"public/tags/gitee/index.html","hash":"659fe01c6f96fa42d5253b4958af421f7a9f744b","modified":1632900449209},{"_id":"public/tags/github/index.html","hash":"714a4492d5d2cd3de684b4da4f9e06da6a1401ba","modified":1632900449209},{"_id":"public/tags/email/index.html","hash":"309ec3f5f0598ce2d310badda5a76ddbdfe8d7e9","modified":1632900449209},{"_id":"public/tags/JetBrains/index.html","hash":"d864fc267ee8a2f00308eb8d0aecbdccf0f2f891","modified":1632900449209},{"_id":"public/tags/typescript/index.html","hash":"3c246c4b1cbefaaa5d7f8567ea1e7e46e3b887bc","modified":1632900449209},{"_id":"public/tags/index.html","hash":"249bce182f1b271727d0dc2e92b96b4c0c495d0b","modified":1632900449209},{"_id":"public/article/46c033c6.html","hash":"eb4f49266446732b9517bdf8a3b61a02be5d68d0","modified":1632900449209},{"_id":"public/article/32db227c.html","hash":"2dba114f6001534f0132077cefbf30692081ff9e","modified":1632900449209},{"_id":"public/article/6a1814b.html","hash":"04f45de746406755574c745422e52fb9d31c93aa","modified":1632900449209},{"_id":"public/article/8c429c4.html","hash":"dabfbc8b7998225b12ebca72ffc198340a96c1da","modified":1632900449209},{"_id":"public/article/dc9ca875.html","hash":"da1ff76ac992bc24fc038a6041a492c6b81a2c40","modified":1632900449209},{"_id":"public/article/b9f29ac6.html","hash":"2e3f1f7df396d31dde69aea54b8d102fcc99f318","modified":1632900449209},{"_id":"public/article/51442d59.html","hash":"0f56f74fd5aaa4623028ded69c719972079ebdb5","modified":1632900449209},{"_id":"public/article/3a48177d.html","hash":"b2b973d8003ed15923dd4a1259d1f4759d3ebe7c","modified":1632900449209},{"_id":"public/article/39437d16.html","hash":"c8c6cc69b3becc539edfc34e257736f810837b7d","modified":1632900449209},{"_id":"public/article/307bc4b4.html","hash":"b76b6b1abe770aa26f613c64d35d0e300f1fad6c","modified":1632900449209},{"_id":"public/article/f51db730.html","hash":"ae620ae77c658c2f26e1ed3731889624772ef522","modified":1632900449209},{"_id":"public/article/2494396d.html","hash":"f97796263f46e7d25bf44e0637cb0899ea35afe2","modified":1632900449209},{"_id":"public/article/dba10516.html","hash":"788e970c29a02752d1af594d1a4cb597df180715","modified":1632900449209},{"_id":"public/article/71eca8f7.html","hash":"5ef8aabb9bca82368fe292c58a65051be8311105","modified":1632900449209},{"_id":"public/article/61f06ba6.html","hash":"ce2299eb1f0a0560fe05a2b4084c635722c2b7cc","modified":1632900449209},{"_id":"public/article/e540a482.html","hash":"4cbe59263b8d7a525447fd9ca9fce8a4f5abe51e","modified":1632900449209},{"_id":"public/article/4a713fe0.html","hash":"5180dc081a5148da594b73014c6909464574d5ee","modified":1632900449209},{"_id":"public/article/e44222ec.html","hash":"e83869b1c3409deb7a43c94a9c3f22346c502d9f","modified":1632900449209},{"_id":"public/article/7d888e25.html","hash":"c2c688bb68018df0d414057dcf10786a8c36bd0b","modified":1632900449209},{"_id":"public/article/4c17429a.html","hash":"4aa7557ea476f44f5deb7934c55ded408782b1bf","modified":1632900449209},{"_id":"public/article/c8c56574.html","hash":"db182b292f82468fa1aa705b6078d78af4e7b0da","modified":1632900449209},{"_id":"public/article/c3ac5d8c.html","hash":"29988ee594f1b07fe54c154c2aeb179f80162f1f","modified":1632900449209},{"_id":"public/article/daa7cd7.html","hash":"73f639764f376deb560d7ca338c9a9473fc91a27","modified":1632900449209},{"_id":"public/article/939c1baf.html","hash":"2544570f72090e52219e0643703edd4bc7422c88","modified":1632900449209},{"_id":"public/article/1d5bf6e8.html","hash":"8717ae418526a53ae3790d204279e336ed899d0c","modified":1632900449209},{"_id":"public/article/9da0838d.html","hash":"f8b3dd36a1b72665928b40a84c9dc6e1ee48d278","modified":1632900449209},{"_id":"public/article/6875ed76.html","hash":"3737fb9e7b64641a44513fdd2c1c72c1a75eeffd","modified":1632900449209},{"_id":"public/article/9bb384a9.html","hash":"64508f8f0af6acbf109f676cc58ec62aeae67e7f","modified":1632900449209},{"_id":"public/article/915db80e.html","hash":"72e1e03dcecab7c8040ac735e808cf186881cb87","modified":1632900449209},{"_id":"public/article/64d53267.html","hash":"9bee2366b6346a491a786439922de469dd2659ba","modified":1632900449209},{"_id":"public/article/592ccd47.html","hash":"e203cf281b82831c07b28946e639820f058d54a0","modified":1632900449209},{"_id":"public/article/4f6f6be0.html","hash":"a4898bb1346b1dd97b1606ac72792b5239f185d1","modified":1632900449209},{"_id":"public/article/e04653fd.html","hash":"c39a94236bf86ad59241abc1a7aa9181181f0250","modified":1632900449209},{"_id":"public/article/3e1b66b7.html","hash":"bd6cb127ab6fd4db3d8861de7a6c150f6cc339c0","modified":1632900449209},{"_id":"public/article/c5a6ae78.html","hash":"13dec680ad15fb10019a13878fcf8deb39f544f7","modified":1632900449209},{"_id":"public/article/43aabf4e.html","hash":"61defd934ba56f0294a8fcd1a21801afe9450a19","modified":1632900449209},{"_id":"public/article/4a17b156.html","hash":"f62ea449bc78b6e0cd29c9746ec07ff52beba5bf","modified":1632900449209},{"_id":"public/categories/工具/index.html","hash":"aa8578ce6821c92c79d46c9a65a5afb4473d1276","modified":1632900449209},{"_id":"public/categories/Java/index.html","hash":"101163e1a829561e8f18009bf6a0d26f55e3b734","modified":1632900449209},{"_id":"public/index.html","hash":"10f936aed7d941f931108571527c68f3f7aedc72","modified":1632900449209},{"_id":"public/page/2/index.html","hash":"981c9e3631b5bbaf19d274530a8bf4da9b5d527c","modified":1632900449209},{"_id":"public/page/3/index.html","hash":"9843f01c680154af6aa6295f02658831cb8cf565","modified":1632900449209},{"_id":"public/page/4/index.html","hash":"610b8daf8ba5d751b24ca488e4917108b45dc1bc","modified":1632900449209},{"_id":"public/archives/index.html","hash":"5f386a869b2db72e5729c152e9e1e79573ca9fff","modified":1632900449209},{"_id":"public/archives/page/2/index.html","hash":"ad01c5b6f3e645972fa01fc45e7515151dc25176","modified":1632900449209},{"_id":"public/archives/page/3/index.html","hash":"c6d2faa9dc6498bcebc1eb39654d7537f7549013","modified":1632900449209},{"_id":"public/archives/page/4/index.html","hash":"8bac6458c17a1ca3474319959c427ff521fe2311","modified":1632900449209},{"_id":"public/archives/2021/index.html","hash":"5a9c18b5e82d00d4513e05b5c51e99664e48d1a0","modified":1632900449209},{"_id":"public/archives/2021/page/2/index.html","hash":"9a8be4220662311ebe4fa8e3e0fd1f38a64d7430","modified":1632900449209},{"_id":"public/archives/2021/page/3/index.html","hash":"ed8eda102898551fc1ddc5715051ae16117ba3b2","modified":1632900449209},{"_id":"public/archives/2021/page/4/index.html","hash":"56c656f65d609755cfe5856a75e2dc0d0b0e4bb1","modified":1632900449209},{"_id":"public/archives/2021/09/index.html","hash":"037803e432392e8aeb276e6437bbc384811ba8a6","modified":1632900449209},{"_id":"public/archives/2021/09/page/2/index.html","hash":"0dabd48df7d364701f73ca8bcea504b97dccf8a1","modified":1632900449209},{"_id":"public/archives/2021/09/page/3/index.html","hash":"dc5a41269409352379085ebb6098791e7fe41b4b","modified":1632900449209},{"_id":"public/archives/2021/09/page/4/index.html","hash":"63a337ef2cf76b0529c151a7e1abbc534f6b007c","modified":1632900449209},{"_id":"public/tags/java/index.html","hash":"831c57f0d82c0734a9381571575113839cb94e9f","modified":1632900449209},{"_id":"public/robots.txt","hash":"e729aec1c19fdbbcf5208dbc08d1264aaa72b928","modified":1631782328186},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1631782328186},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1631782328186},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1631782328186},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1631782328186},{"_id":"public/images/beian.png","hash":"29c400bc3b89f6085766dac4e0330ded5cb73d52","modified":1631782328186},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1631782328186},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1631782328186},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1631782328186},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1631782328186},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1631782328186},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1631782328186},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1631782328186},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1631782328186},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1631782328186},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1631782328186},{"_id":"public/article/2494396d/api.png","hash":"ee25f22d48e01771964584bbe74696b3fa92e490","modified":1631782328186},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1631782328186},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1631782328186},{"_id":"public/js/algolia-search.js","hash":"498d233eb5c7af6940baf94c1a1c36fdf1dd2636","modified":1631782328186},{"_id":"public/js/local-search.js","hash":"35ccf100d8f9c0fd6bfbb7fa88c2a76c42a69110","modified":1631782328186},{"_id":"public/js/bookmark.js","hash":"9734ebcb9b83489686f5c2da67dc9e6157e988ad","modified":1631782328186},{"_id":"public/js/next-boot.js","hash":"a1b0636423009d4a4e4cea97bcbf1842bfab582c","modified":1631782328186},{"_id":"public/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1631782328186},{"_id":"public/js/schemes/muse.js","hash":"1eb9b88103ddcf8827b1a7cbc56471a9c5592d53","modified":1631782328186},{"_id":"public/js/schemes/pisces.js","hash":"0ac5ce155bc58c972fe21c4c447f85e6f8755c62","modified":1631782328186},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1631782328186},{"_id":"public/css/main.css","hash":"bc56832b76c5eb03d88329e273ab2f88c57f2158","modified":1631782328186},{"_id":"public/js/utils.js","hash":"730cca7f164eaf258661a61ff3f769851ff1e5da","modified":1631782328186},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1631782328186},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1631782328186},{"_id":"public/lib/font-awesome/css/all.min.css","hash":"0038dc97c79451578b7bd48af60ba62282b4082b","modified":1631782328186},{"_id":"source/_posts/share/10+个应该知道的Github仓库.md","hash":"34a8c9de735f26a1846a0c39699a6490478edca5","modified":1631844907313},{"_id":"source/_posts/js/Proxy的使用.md","hash":"4399d92dac117f49db73a9c6734d43bef4180e12","modified":1632361643053},{"_id":"source/_posts/js/webapi.md","hash":"cbeaa78b4fbb50391ab0cd810cb74d9938c1929f","modified":1632635609891},{"_id":"source/_posts/js/Promise.md","hash":"49aa00bbaaf7051fef7734667fe6ed43d4dc2450","modified":1632732283234},{"_id":"source/_posts/java/selenium.md","hash":"f3f3db57a84bf266eca1d2ba3bf4bdaba9c6e511","modified":1632899013931},{"_id":"source/_posts/js/array.md","hash":"ad306f8212b4f4674ac6008ca230468ea5e7c586","modified":1632900417707},{"_id":"public/archives/page/5/index.html","hash":"0f318e1f40265557c033296771f319066bc75ea4","modified":1632900449209},{"_id":"public/archives/2021/page/5/index.html","hash":"0df89c1fcd848dbef2f083fb81be06ef5f330075","modified":1632900449209},{"_id":"public/archives/2021/09/page/5/index.html","hash":"7f08785b89efe41ced3319b2d24e57abdb092729","modified":1632900449209},{"_id":"public/article/5570a359.html","hash":"a15d4be1897b93c7a34e9432c6abf81c72ec43ad","modified":1632900449209},{"_id":"public/article/d009cca4.html","hash":"bbf6b85f8523911cccaa50404c01a7651815d930","modified":1632900449209},{"_id":"public/article/ce0623bf.html","hash":"219225a800712e8c37c65862cd17626a80d08e0c","modified":1632900449209},{"_id":"public/article/db7e49b1.html","hash":"b28f97525e3253d67eb2790ef2161abcb78fcec4","modified":1632900449209},{"_id":"public/article/365c4e09.html","hash":"0498272d979b6b753b8487aa52fb44b6a23f318b","modified":1632900449209},{"_id":"public/article/5a8a6c8d.html","hash":"cc8c1a50daadcc18e39dda5b3a5c8b8b9463bc8d","modified":1632900449209},{"_id":"public/page/5/index.html","hash":"a7676698e2ea2b97bae71f32c2031e43f03c7e4a","modified":1632900449209},{"_id":"source/_posts/share/分享数据.md","hash":"aee314d7439eaded064f82d249bdcb94691e9cac","modified":1635385106199},{"_id":"source/_posts/css/css优先级.md","hash":"851f9a22967fda0b3f63fca0c6271867b08cf2bb","modified":1636445350308},{"_id":"source/_posts/tool/webstorm与vscode格式化.md","hash":"1b4bbb83a925e394eccb75c77dfce757560c460f","modified":1637889337966}],"Category":[{"name":"docker","_id":"cktmoybjz0008kotr38as2178"},{"name":"工具","_id":"cktmoybk1000dkotr66uj1n4z"},{"name":"html","_id":"cktmoybkd000tkotr34a5bvtv"},{"name":"Java","_id":"cktmoybkf0010kotrdky81ada"},{"name":"JavaScript","_id":"cktmoybko001ykotr6qn8e6xj"},{"name":"Nginx","_id":"cktmoybkt002akotrdrvd5fig"},{"name":"操作系统","_id":"cktmoybl2002zkotre6uj5umb"},{"name":"TypeScript","_id":"cktmoybl7003ikotr19gm84rq"}],"Data":[],"Page":[{"_content":"google-site-verification: google4bf2bf568982ee8b.html","source":"google4bf2bf568982ee8b.html","raw":"google-site-verification: google4bf2bf568982ee8b.html","date":"2021-09-10T07:38:10.818Z","updated":"2021-09-10T07:37:59.941Z","path":"google4bf2bf568982ee8b.html","title":"","comments":1,"layout":"page","_id":"cktmoybjn0000kotr5u35cmga","content":"google-site-verification: google4bf2bf568982ee8b.html","site":{"data":{}},"excerpt":"","more":"google-site-verification: google4bf2bf568982ee8b.html"},{"title":"分类","date":"2021-09-10T02:14:42.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2021-09-10 10:14:42\ntype: categories\n---\n","updated":"2021-09-10T02:15:41.281Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cktmoybju0002kotr0xes74lk","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"标签","date":"2021-09-10T02:10:25.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签 \ndate: 2021-09-10 10:10:25\ntype: tags\n---\n","updated":"2021-09-10T02:13:22.812Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cktmoybjw0004kotrhiik3q7a","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Hello World","comments":1,"abbrlink":"4a17b156","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\ncomments: true\nabbrlink: 4a17b156\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2021-09-10T00:49:45.562Z","updated":"2021-09-16T08:48:58.079Z","_id":"cktmoybjq0001kotr2mzvhupt","layout":"post","photos":[],"link":"","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"微信扫一扫登录","abbrlink":"43aabf4e","date":"2021-09-10T03:06:48.000Z","_content":"个人网站是无法接入微信扫一扫登录的，只能使用曲线救国的方式，采用小程序了，小程序是可以获取到微信用户的 `UnionID` 的。\n\n首先第一步要注册一个小程序应用，很简单的，用邮箱申请即可，[点击注册](https://mp.weixin.qq.com/wxopen/waregister?action=step1)\n\n注册完成之后就可以进行开发了，我后台服务使用的是node来写的\n\n \n\n# 生成小程序二维码\n\n 要做扫一扫登录，二维码是不可少的，官方也提供了几种生成二维码的方式。[查看生成方式](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html)\n\n 我使用的是[A接口](https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.get.html)，详细信息可查看官方文档。\n\n \n\n``` \n POST https://api.weixin.qq.com/wxa/getwxacode?access_token=ACCESS_TOKEN\n ```\n\n  从api上可以看出，调用这个接口需要传入成一个 `ACCESS_TOKEN` ，这个不是我们生成的，需要调用小程序的服务来获取到。\n\n   [ACCESS_TOKEN](https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html)\n\n   获取 `ACCESS_TOKEN` 示例\n\n   \n\n``` JavaScript\n   const getWeChatAccessToken = () => {\n       return new Promise((resolve, reject) => {\n               let url = `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${appId}&secret=${secretKey}`\n               axios.get(url).then(res => {\n                   resolve(res.data)\n               }).catch(e => {\n                   errorlog.error(e)\n                   resolve(Common.unifyResponse(\"获取微信token失败\", 500))\n               })\n           }\n       })\n   }\n```\n>token过期的时间是由微信服务控制的，拿到之后可以存到redis中，不需要每次都去获取新的\n\n 获取到token之后就可以调用生成二维码的方法了\n\n 调用示例\n ```javascript\n const getQRCode = (access_token) => {\n    return new Promise((resolve, reject) => {\n        let fileName = Common.randomNumber()\n        let url = `https://api.weixin.qq.com/cgi-bin/wxaapp/createwxaqrcode?access_token=${access_token}`\n        axios.request({\n            method: 'post',\n            responseType: 'arraybuffer',\n            url,\n            data: {\n                path: 'pages/login/login?clientId='+fileName\n            }\n        }).then(res => {\n            fs.writeFile(Common.config(\"qrCode\") + fileName + \".jpeg\", res.data, \"binary\", function (err) {\n                resolve(fileName)\n            });\n        }).catch(e => {\n            errorlog.error(e)\n            resolve(Common.unifyResponse(\"获取二维码失败\", 500))\n        })\n    })\n}\n ```\n  返回的是二维码的文件名称\n\n\n  ```javascript\n  LoginRouter.post(\"/qrlogin/:clientId\", (req, res) => {\n    let userId = req[\"userId\"];\n    let clientId = req.params.clientId\n    let token = makeToken(userId);\n    axios.post(apiConfig.socketUrl, {\n        clientId,\n        message: token\n    })\n    res.send(true)\n\n})\n  ```\n  处理登录请求，在小程序完成授权之后，调用`webSocket`服务通知页面授权成功，跳转到首页\n  # 页面显示二维码\n  ```javascript\n    $.ajax({\n        url: api,\n        type: 'get',\n        success: function (data) {\n            $('#qrcode').attr(\"src\",\"/\"+data + \".jpeg\")\n            webSocketConnect(data)\n\n        }\n    })\n\n    function webSocketConnect(clientId) {\n        if ('WebSocket' in window) {\n            ws = new WebSocket(SOCKET_URL + clientId);\n        } else if ('MozWebSocket' in window) {\n            ws = new WebSocket(SOCKET_URL + clientId);\n        } else {\n            alert(\"该浏览器不支持websocket\");\n        }\n        ws.onmessage = function (evt) {\n            localStorage.setItem(\"accessToken\", evt.data)\n            window.location.href = 'me.html'\n\n        };\n    }\n\n  ```\n\n   登录页面调用服务器端生成二维码并显示在页面上，并且连接`webSocket`服务，等待服务器确认登录。\n   # 小程序\n\n login.js\n   ```javascript\n   Page({\n    onLoad: function (options) {\n        const scene = decodeURIComponent(options.clientId);\n        wx.setStorage({\n            key: \"clientId\",\n            data: scene\n        })\n    },\n    login: async function (e) {\n        let result = await util.getLoginInfo()\n        if (result) {\n            let clientId = wx.getStorageSync('clientId')\n            await util.httpRequest({\n                method: 'post',\n                url: 'api/wx/qrlogin/' + clientId\n            })\n            wx.switchTab({\n                url: '../index/index'\n            })\n        }\n    }\n})\n```\nlogin.wxml\n```html\n <button open-type=\"getUserInfo\" bindgetuserinfo=\"login\">授权登录</button>\n```\n[github](https://github.com/lizeze/express-leancloud)\n\n[体验地址](http://xx996.cn/jzb/index.html)","source":"_posts/WeChat/微信扫一扫登录.md","raw":"---\ntitle: 微信扫一扫登录\ntags:\n  - wechat\n  - 小程序\n  - node\nabbrlink: 43aabf4e\ndate: 2021-09-10 11:06:48\n---\n个人网站是无法接入微信扫一扫登录的，只能使用曲线救国的方式，采用小程序了，小程序是可以获取到微信用户的 `UnionID` 的。\n\n首先第一步要注册一个小程序应用，很简单的，用邮箱申请即可，[点击注册](https://mp.weixin.qq.com/wxopen/waregister?action=step1)\n\n注册完成之后就可以进行开发了，我后台服务使用的是node来写的\n\n \n\n# 生成小程序二维码\n\n 要做扫一扫登录，二维码是不可少的，官方也提供了几种生成二维码的方式。[查看生成方式](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html)\n\n 我使用的是[A接口](https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.get.html)，详细信息可查看官方文档。\n\n \n\n``` \n POST https://api.weixin.qq.com/wxa/getwxacode?access_token=ACCESS_TOKEN\n ```\n\n  从api上可以看出，调用这个接口需要传入成一个 `ACCESS_TOKEN` ，这个不是我们生成的，需要调用小程序的服务来获取到。\n\n   [ACCESS_TOKEN](https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html)\n\n   获取 `ACCESS_TOKEN` 示例\n\n   \n\n``` JavaScript\n   const getWeChatAccessToken = () => {\n       return new Promise((resolve, reject) => {\n               let url = `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${appId}&secret=${secretKey}`\n               axios.get(url).then(res => {\n                   resolve(res.data)\n               }).catch(e => {\n                   errorlog.error(e)\n                   resolve(Common.unifyResponse(\"获取微信token失败\", 500))\n               })\n           }\n       })\n   }\n```\n>token过期的时间是由微信服务控制的，拿到之后可以存到redis中，不需要每次都去获取新的\n\n 获取到token之后就可以调用生成二维码的方法了\n\n 调用示例\n ```javascript\n const getQRCode = (access_token) => {\n    return new Promise((resolve, reject) => {\n        let fileName = Common.randomNumber()\n        let url = `https://api.weixin.qq.com/cgi-bin/wxaapp/createwxaqrcode?access_token=${access_token}`\n        axios.request({\n            method: 'post',\n            responseType: 'arraybuffer',\n            url,\n            data: {\n                path: 'pages/login/login?clientId='+fileName\n            }\n        }).then(res => {\n            fs.writeFile(Common.config(\"qrCode\") + fileName + \".jpeg\", res.data, \"binary\", function (err) {\n                resolve(fileName)\n            });\n        }).catch(e => {\n            errorlog.error(e)\n            resolve(Common.unifyResponse(\"获取二维码失败\", 500))\n        })\n    })\n}\n ```\n  返回的是二维码的文件名称\n\n\n  ```javascript\n  LoginRouter.post(\"/qrlogin/:clientId\", (req, res) => {\n    let userId = req[\"userId\"];\n    let clientId = req.params.clientId\n    let token = makeToken(userId);\n    axios.post(apiConfig.socketUrl, {\n        clientId,\n        message: token\n    })\n    res.send(true)\n\n})\n  ```\n  处理登录请求，在小程序完成授权之后，调用`webSocket`服务通知页面授权成功，跳转到首页\n  # 页面显示二维码\n  ```javascript\n    $.ajax({\n        url: api,\n        type: 'get',\n        success: function (data) {\n            $('#qrcode').attr(\"src\",\"/\"+data + \".jpeg\")\n            webSocketConnect(data)\n\n        }\n    })\n\n    function webSocketConnect(clientId) {\n        if ('WebSocket' in window) {\n            ws = new WebSocket(SOCKET_URL + clientId);\n        } else if ('MozWebSocket' in window) {\n            ws = new WebSocket(SOCKET_URL + clientId);\n        } else {\n            alert(\"该浏览器不支持websocket\");\n        }\n        ws.onmessage = function (evt) {\n            localStorage.setItem(\"accessToken\", evt.data)\n            window.location.href = 'me.html'\n\n        };\n    }\n\n  ```\n\n   登录页面调用服务器端生成二维码并显示在页面上，并且连接`webSocket`服务，等待服务器确认登录。\n   # 小程序\n\n login.js\n   ```javascript\n   Page({\n    onLoad: function (options) {\n        const scene = decodeURIComponent(options.clientId);\n        wx.setStorage({\n            key: \"clientId\",\n            data: scene\n        })\n    },\n    login: async function (e) {\n        let result = await util.getLoginInfo()\n        if (result) {\n            let clientId = wx.getStorageSync('clientId')\n            await util.httpRequest({\n                method: 'post',\n                url: 'api/wx/qrlogin/' + clientId\n            })\n            wx.switchTab({\n                url: '../index/index'\n            })\n        }\n    }\n})\n```\nlogin.wxml\n```html\n <button open-type=\"getUserInfo\" bindgetuserinfo=\"login\">授权登录</button>\n```\n[github](https://github.com/lizeze/express-leancloud)\n\n[体验地址](http://xx996.cn/jzb/index.html)","slug":"WeChat/微信扫一扫登录","published":1,"updated":"2021-09-16T08:48:58.082Z","_id":"cktmoybju0003kotr5mcj59aq","comments":1,"layout":"post","photos":[],"link":"","content":"<p>个人网站是无法接入微信扫一扫登录的，只能使用曲线救国的方式，采用小程序了，小程序是可以获取到微信用户的 <code>UnionID</code> 的。</p>\n<p>首先第一步要注册一个小程序应用，很简单的，用邮箱申请即可，<a href=\"https://mp.weixin.qq.com/wxopen/waregister?action=step1\">点击注册</a></p>\n<p>注册完成之后就可以进行开发了，我后台服务使用的是node来写的</p>\n<h1 id=\"生成小程序二维码\"><a href=\"#生成小程序二维码\" class=\"headerlink\" title=\"生成小程序二维码\"></a>生成小程序二维码</h1><p> 要做扫一扫登录，二维码是不可少的，官方也提供了几种生成二维码的方式。<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html\">查看生成方式</a></p>\n<p> 我使用的是<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.get.html\">A接口</a>，详细信息可查看官方文档。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST https://api.weixin.qq.com/wxa/getwxacode?access_token=ACCESS_TOKEN</span><br></pre></td></tr></table></figure>\n\n<p>  从api上可以看出，调用这个接口需要传入成一个 <code>ACCESS_TOKEN</code> ，这个不是我们生成的，需要调用小程序的服务来获取到。</p>\n<p>   <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html\">ACCESS_TOKEN</a></p>\n<p>   获取 <code>ACCESS_TOKEN</code> 示例</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getWeChatAccessToken = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> url = <span class=\"string\">`https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=<span class=\"subst\">$&#123;appId&#125;</span>&amp;secret=<span class=\"subst\">$&#123;secretKey&#125;</span>`</span></span><br><span class=\"line\">            axios.get(url).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">                resolve(res.data)</span><br><span class=\"line\">            &#125;).catch(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">                errorlog.error(e)</span><br><span class=\"line\">                resolve(Common.unifyResponse(<span class=\"string\">&quot;获取微信token失败&quot;</span>, <span class=\"number\">500</span>))</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>token过期的时间是由微信服务控制的，拿到之后可以存到redis中，不需要每次都去获取新的</p>\n</blockquote>\n<p> 获取到token之后就可以调用生成二维码的方法了</p>\n<p> 调用示例<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">const</span> getQRCode = <span class=\"function\">(<span class=\"params\">access_token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> fileName = Common.randomNumber()</span><br><span class=\"line\">        <span class=\"keyword\">let</span> url = <span class=\"string\">`https://api.weixin.qq.com/cgi-bin/wxaapp/createwxaqrcode?access_token=<span class=\"subst\">$&#123;access_token&#125;</span>`</span></span><br><span class=\"line\">        axios.request(&#123;</span><br><span class=\"line\">            <span class=\"attr\">method</span>: <span class=\"string\">&#x27;post&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">responseType</span>: <span class=\"string\">&#x27;arraybuffer&#x27;</span>,</span><br><span class=\"line\">            url,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">path</span>: <span class=\"string\">&#x27;pages/login/login?clientId=&#x27;</span>+fileName</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">            fs.writeFile(Common.config(<span class=\"string\">&quot;qrCode&quot;</span>) + fileName + <span class=\"string\">&quot;.jpeg&quot;</span>, res.data, <span class=\"string\">&quot;binary&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">                resolve(fileName)</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;).catch(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">            errorlog.error(e)</span><br><span class=\"line\">            resolve(Common.unifyResponse(<span class=\"string\">&quot;获取二维码失败&quot;</span>, <span class=\"number\">500</span>))</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>  返回的是二维码的文件名称</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  LoginRouter.post(<span class=\"string\">&quot;/qrlogin/:clientId&quot;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> userId = req[<span class=\"string\">&quot;userId&quot;</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> clientId = req.params.clientId</span><br><span class=\"line\">    <span class=\"keyword\">let</span> token = makeToken(userId);</span><br><span class=\"line\">    axios.post(apiConfig.socketUrl, &#123;</span><br><span class=\"line\">        clientId,</span><br><span class=\"line\">        <span class=\"attr\">message</span>: token</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    res.send(<span class=\"literal\">true</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>  处理登录请求，在小程序完成授权之后，调用<code>webSocket</code>服务通知页面授权成功，跳转到首页</p>\n<h1 id=\"页面显示二维码\"><a href=\"#页面显示二维码\" class=\"headerlink\" title=\"页面显示二维码\"></a>页面显示二维码</h1>  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">    <span class=\"attr\">url</span>: api,</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        $(<span class=\"string\">&#x27;#qrcode&#x27;</span>).attr(<span class=\"string\">&quot;src&quot;</span>,<span class=\"string\">&quot;/&quot;</span>+data + <span class=\"string\">&quot;.jpeg&quot;</span>)</span><br><span class=\"line\">        webSocketConnect(data)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">webSocketConnect</span>(<span class=\"params\">clientId</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;WebSocket&#x27;</span> <span class=\"keyword\">in</span> <span class=\"built_in\">window</span>) &#123;</span><br><span class=\"line\">        ws = <span class=\"keyword\">new</span> WebSocket(SOCKET_URL + clientId);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;MozWebSocket&#x27;</span> <span class=\"keyword\">in</span> <span class=\"built_in\">window</span>) &#123;</span><br><span class=\"line\">        ws = <span class=\"keyword\">new</span> WebSocket(SOCKET_URL + clientId);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        alert(<span class=\"string\">&quot;该浏览器不支持websocket&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ws.onmessage = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">evt</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;accessToken&quot;</span>, evt.data)</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.location.href = <span class=\"string\">&#x27;me.html&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>   登录页面调用服务器端生成二维码并显示在页面上，并且连接<code>webSocket</code>服务，等待服务器确认登录。</p>\n<h1 id=\"小程序\"><a href=\"#小程序\" class=\"headerlink\" title=\"小程序\"></a>小程序</h1><p> login.js<br>   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   Page(&#123;</span><br><span class=\"line\">    <span class=\"attr\">onLoad</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> scene = <span class=\"built_in\">decodeURIComponent</span>(options.clientId);</span><br><span class=\"line\">        wx.setStorage(&#123;</span><br><span class=\"line\">            <span class=\"attr\">key</span>: <span class=\"string\">&quot;clientId&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: scene</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">login</span>: <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> result = <span class=\"keyword\">await</span> util.getLoginInfo()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> clientId = wx.getStorageSync(<span class=\"string\">&#x27;clientId&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">await</span> util.httpRequest(&#123;</span><br><span class=\"line\">                <span class=\"attr\">method</span>: <span class=\"string\">&#x27;post&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">url</span>: <span class=\"string\">&#x27;api/wx/qrlogin/&#x27;</span> + clientId</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            wx.switchTab(&#123;</span><br><span class=\"line\">                <span class=\"attr\">url</span>: <span class=\"string\">&#x27;../index/index&#x27;</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure><br>login.wxml</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">open-type</span>=<span class=\"string\">&quot;getUserInfo&quot;</span> <span class=\"attr\">bindgetuserinfo</span>=<span class=\"string\">&quot;login&quot;</span>&gt;</span>授权登录<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/lizeze/express-leancloud\">github</a></p>\n<p><a href=\"http://xx996.cn/jzb/index.html\">体验地址</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>个人网站是无法接入微信扫一扫登录的，只能使用曲线救国的方式，采用小程序了，小程序是可以获取到微信用户的 <code>UnionID</code> 的。</p>\n<p>首先第一步要注册一个小程序应用，很简单的，用邮箱申请即可，<a href=\"https://mp.weixin.qq.com/wxopen/waregister?action=step1\">点击注册</a></p>\n<p>注册完成之后就可以进行开发了，我后台服务使用的是node来写的</p>\n<h1 id=\"生成小程序二维码\"><a href=\"#生成小程序二维码\" class=\"headerlink\" title=\"生成小程序二维码\"></a>生成小程序二维码</h1><p> 要做扫一扫登录，二维码是不可少的，官方也提供了几种生成二维码的方式。<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html\">查看生成方式</a></p>\n<p> 我使用的是<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.get.html\">A接口</a>，详细信息可查看官方文档。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST https://api.weixin.qq.com/wxa/getwxacode?access_token=ACCESS_TOKEN</span><br></pre></td></tr></table></figure>\n\n<p>  从api上可以看出，调用这个接口需要传入成一个 <code>ACCESS_TOKEN</code> ，这个不是我们生成的，需要调用小程序的服务来获取到。</p>\n<p>   <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html\">ACCESS_TOKEN</a></p>\n<p>   获取 <code>ACCESS_TOKEN</code> 示例</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getWeChatAccessToken = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> url = <span class=\"string\">`https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=<span class=\"subst\">$&#123;appId&#125;</span>&amp;secret=<span class=\"subst\">$&#123;secretKey&#125;</span>`</span></span><br><span class=\"line\">            axios.get(url).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">                resolve(res.data)</span><br><span class=\"line\">            &#125;).catch(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">                errorlog.error(e)</span><br><span class=\"line\">                resolve(Common.unifyResponse(<span class=\"string\">&quot;获取微信token失败&quot;</span>, <span class=\"number\">500</span>))</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>token过期的时间是由微信服务控制的，拿到之后可以存到redis中，不需要每次都去获取新的</p>\n</blockquote>\n<p> 获取到token之后就可以调用生成二维码的方法了</p>\n<p> 调用示例<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">const</span> getQRCode = <span class=\"function\">(<span class=\"params\">access_token</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> fileName = Common.randomNumber()</span><br><span class=\"line\">        <span class=\"keyword\">let</span> url = <span class=\"string\">`https://api.weixin.qq.com/cgi-bin/wxaapp/createwxaqrcode?access_token=<span class=\"subst\">$&#123;access_token&#125;</span>`</span></span><br><span class=\"line\">        axios.request(&#123;</span><br><span class=\"line\">            <span class=\"attr\">method</span>: <span class=\"string\">&#x27;post&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">responseType</span>: <span class=\"string\">&#x27;arraybuffer&#x27;</span>,</span><br><span class=\"line\">            url,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">path</span>: <span class=\"string\">&#x27;pages/login/login?clientId=&#x27;</span>+fileName</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">            fs.writeFile(Common.config(<span class=\"string\">&quot;qrCode&quot;</span>) + fileName + <span class=\"string\">&quot;.jpeg&quot;</span>, res.data, <span class=\"string\">&quot;binary&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">                resolve(fileName)</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;).catch(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">            errorlog.error(e)</span><br><span class=\"line\">            resolve(Common.unifyResponse(<span class=\"string\">&quot;获取二维码失败&quot;</span>, <span class=\"number\">500</span>))</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>  返回的是二维码的文件名称</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  LoginRouter.post(<span class=\"string\">&quot;/qrlogin/:clientId&quot;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> userId = req[<span class=\"string\">&quot;userId&quot;</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> clientId = req.params.clientId</span><br><span class=\"line\">    <span class=\"keyword\">let</span> token = makeToken(userId);</span><br><span class=\"line\">    axios.post(apiConfig.socketUrl, &#123;</span><br><span class=\"line\">        clientId,</span><br><span class=\"line\">        <span class=\"attr\">message</span>: token</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    res.send(<span class=\"literal\">true</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>  处理登录请求，在小程序完成授权之后，调用<code>webSocket</code>服务通知页面授权成功，跳转到首页</p>\n<h1 id=\"页面显示二维码\"><a href=\"#页面显示二维码\" class=\"headerlink\" title=\"页面显示二维码\"></a>页面显示二维码</h1>  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">    <span class=\"attr\">url</span>: api,</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        $(<span class=\"string\">&#x27;#qrcode&#x27;</span>).attr(<span class=\"string\">&quot;src&quot;</span>,<span class=\"string\">&quot;/&quot;</span>+data + <span class=\"string\">&quot;.jpeg&quot;</span>)</span><br><span class=\"line\">        webSocketConnect(data)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">webSocketConnect</span>(<span class=\"params\">clientId</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;WebSocket&#x27;</span> <span class=\"keyword\">in</span> <span class=\"built_in\">window</span>) &#123;</span><br><span class=\"line\">        ws = <span class=\"keyword\">new</span> WebSocket(SOCKET_URL + clientId);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"string\">&#x27;MozWebSocket&#x27;</span> <span class=\"keyword\">in</span> <span class=\"built_in\">window</span>) &#123;</span><br><span class=\"line\">        ws = <span class=\"keyword\">new</span> WebSocket(SOCKET_URL + clientId);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        alert(<span class=\"string\">&quot;该浏览器不支持websocket&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ws.onmessage = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">evt</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;accessToken&quot;</span>, evt.data)</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.location.href = <span class=\"string\">&#x27;me.html&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>   登录页面调用服务器端生成二维码并显示在页面上，并且连接<code>webSocket</code>服务，等待服务器确认登录。</p>\n<h1 id=\"小程序\"><a href=\"#小程序\" class=\"headerlink\" title=\"小程序\"></a>小程序</h1><p> login.js<br>   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   Page(&#123;</span><br><span class=\"line\">    <span class=\"attr\">onLoad</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> scene = <span class=\"built_in\">decodeURIComponent</span>(options.clientId);</span><br><span class=\"line\">        wx.setStorage(&#123;</span><br><span class=\"line\">            <span class=\"attr\">key</span>: <span class=\"string\">&quot;clientId&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">data</span>: scene</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">login</span>: <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> result = <span class=\"keyword\">await</span> util.getLoginInfo()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> clientId = wx.getStorageSync(<span class=\"string\">&#x27;clientId&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">await</span> util.httpRequest(&#123;</span><br><span class=\"line\">                <span class=\"attr\">method</span>: <span class=\"string\">&#x27;post&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">url</span>: <span class=\"string\">&#x27;api/wx/qrlogin/&#x27;</span> + clientId</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            wx.switchTab(&#123;</span><br><span class=\"line\">                <span class=\"attr\">url</span>: <span class=\"string\">&#x27;../index/index&#x27;</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure><br>login.wxml</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">open-type</span>=<span class=\"string\">&quot;getUserInfo&quot;</span> <span class=\"attr\">bindgetuserinfo</span>=<span class=\"string\">&quot;login&quot;</span>&gt;</span>授权登录<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/lizeze/express-leancloud\">github</a></p>\n<p><a href=\"http://xx996.cn/jzb/index.html\">体验地址</a></p>\n"},{"title":"docker启动mysql容器之后报错","abbrlink":"51442d59","date":"2021-09-12T04:51:13.000Z","_content":"\n\n```mysql\nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';\nCREATE USER 'root'@'%' IDENTIFIED BY '你的密码';\ngrant all privileges on *.* to 'root'@'%'; \nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';\nflush privileges;\n\n```\n\n``` mysql\n\nCREATE USER 'lzz'@'%' IDENTIFIED BY '123456';\n\ngrant all privileges on *.* to 'lzz'@'%' with grant option;\n\nset global time_zone = '+8:00';\n\n```\n\n  mysql数据库时间少一天\n```\ncharacterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai\n```\n\n把`serverTimezone`值修改为`Asia/Shanghai`","source":"_posts/docker/docker启动mysql容器之后报错.md","raw":"---\ntitle: docker启动mysql容器之后报错\ntags:\n  - docker\n  - mysql\ncategories: docker\nabbrlink: 51442d59\ndate: 2021-09-12 12:51:13\n---\n\n\n```mysql\nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';\nCREATE USER 'root'@'%' IDENTIFIED BY '你的密码';\ngrant all privileges on *.* to 'root'@'%'; \nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';\nflush privileges;\n\n```\n\n``` mysql\n\nCREATE USER 'lzz'@'%' IDENTIFIED BY '123456';\n\ngrant all privileges on *.* to 'lzz'@'%' with grant option;\n\nset global time_zone = '+8:00';\n\n```\n\n  mysql数据库时间少一天\n```\ncharacterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai\n```\n\n把`serverTimezone`值修改为`Asia/Shanghai`","slug":"docker/docker启动mysql容器之后报错","published":1,"updated":"2021-09-16T08:48:58.085Z","_id":"cktmoybjw0005kotr3uv6dmi0","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br><span class=\"line\">CREATE USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;你的密码&#x27;;</span><br><span class=\"line\">grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27;; </span><br><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">CREATE USER &#x27;lzz&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">grant all privileges on *.* to &#x27;lzz&#x27;@&#x27;%&#x27; with grant option;</span><br><span class=\"line\"></span><br><span class=\"line\">set global time_zone = &#x27;+8:00&#x27;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>  mysql数据库时间少一天</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span><br></pre></td></tr></table></figure>\n\n<p>把<code>serverTimezone</code>值修改为<code>Asia/Shanghai</code></p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br><span class=\"line\">CREATE USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;你的密码&#x27;;</span><br><span class=\"line\">grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27;; </span><br><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">CREATE USER &#x27;lzz&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">grant all privileges on *.* to &#x27;lzz&#x27;@&#x27;%&#x27; with grant option;</span><br><span class=\"line\"></span><br><span class=\"line\">set global time_zone = &#x27;+8:00&#x27;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>  mysql数据库时间少一天</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span><br></pre></td></tr></table></figure>\n\n<p>把<code>serverTimezone</code>值修改为<code>Asia/Shanghai</code></p>\n"},{"title":"分享几个css生成工具","abbrlink":"dba10516","date":"2021-09-10T13:36:22.000Z","_content":"* [Neumorphism/Soft UI generator](https://neumorphism.io/#e0e0e0)\n\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/fbd74e3e267632293591cdd6d449eb0d.png)\n\n* [Smooth Shadow generator](https://shadows.brumm.af/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/1b994013ca812d603f87abfa601ddfa2.png)\n\n* [Fancy Border Radius Generator](https://9elements.github.io/fancy-border-radius/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/dfe5745563a89dd1f304ba10902f7c92.png)\n\n * [Easing Gradients](https://larsenwork.com/easing-gradients/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/77c8492b7924605b91552e60e9c7b437.png)\n\n* [Data Viz Color Palette Generator](https://learnui.design/tools/data-color-picker.html)\n\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/7a45985f49af774ea9329d233cc4e922.png)\n\n* [CSS Grid Generator](https://cssgrid-generator.netlify.app/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/54ddf664a2f1c27f119dbe8a2ffe5360.png)\n\n* [CSS Accordion Slider Generator](https://accordionslider.com/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/4aec11b0212bc25a284dfdc0d6e8249b.png)\n\n* [CSS clip-path maker](https://bennettfeely.com/clippy/)\n \n \n![image.png](https://img-blog.csdnimg.cn/img_convert/ea1c9a3378d007e50c2c4b80e2b3dcc5.png)\n* [Get Waves](https://getwaves.io/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/43c1ab0dae9f762a36caae9f654734a1.png)","source":"_posts/css/分享几个css生成工具.md","raw":"---\ntitle: 分享几个css生成工具\ntags: css\ncategories: 工具\nabbrlink: dba10516\ndate: 2021-09-10 21:36:22\n---\n* [Neumorphism/Soft UI generator](https://neumorphism.io/#e0e0e0)\n\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/fbd74e3e267632293591cdd6d449eb0d.png)\n\n* [Smooth Shadow generator](https://shadows.brumm.af/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/1b994013ca812d603f87abfa601ddfa2.png)\n\n* [Fancy Border Radius Generator](https://9elements.github.io/fancy-border-radius/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/dfe5745563a89dd1f304ba10902f7c92.png)\n\n * [Easing Gradients](https://larsenwork.com/easing-gradients/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/77c8492b7924605b91552e60e9c7b437.png)\n\n* [Data Viz Color Palette Generator](https://learnui.design/tools/data-color-picker.html)\n\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/7a45985f49af774ea9329d233cc4e922.png)\n\n* [CSS Grid Generator](https://cssgrid-generator.netlify.app/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/54ddf664a2f1c27f119dbe8a2ffe5360.png)\n\n* [CSS Accordion Slider Generator](https://accordionslider.com/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/4aec11b0212bc25a284dfdc0d6e8249b.png)\n\n* [CSS clip-path maker](https://bennettfeely.com/clippy/)\n \n \n![image.png](https://img-blog.csdnimg.cn/img_convert/ea1c9a3378d007e50c2c4b80e2b3dcc5.png)\n* [Get Waves](https://getwaves.io/)\n\n![image.png](https://img-blog.csdnimg.cn/img_convert/43c1ab0dae9f762a36caae9f654734a1.png)","slug":"css/分享几个css生成工具","published":1,"updated":"2021-09-16T08:48:58.086Z","_id":"cktmoybjy0007kotr24g501xx","comments":1,"layout":"post","photos":[],"link":"","content":"<ul>\n<li><a href=\"https://neumorphism.io/#e0e0e0\">Neumorphism/Soft UI generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/fbd74e3e267632293591cdd6d449eb0d.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://shadows.brumm.af/\">Smooth Shadow generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/1b994013ca812d603f87abfa601ddfa2.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://9elements.github.io/fancy-border-radius/\">Fancy Border Radius Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/dfe5745563a89dd1f304ba10902f7c92.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://larsenwork.com/easing-gradients/\">Easing Gradients</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/77c8492b7924605b91552e60e9c7b437.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://learnui.design/tools/data-color-picker.html\">Data Viz Color Palette Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/7a45985f49af774ea9329d233cc4e922.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://cssgrid-generator.netlify.app/\">CSS Grid Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/54ddf664a2f1c27f119dbe8a2ffe5360.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://accordionslider.com/\">CSS Accordion Slider Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/4aec11b0212bc25a284dfdc0d6e8249b.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://bennettfeely.com/clippy/\">CSS clip-path maker</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/ea1c9a3378d007e50c2c4b80e2b3dcc5.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://getwaves.io/\">Get Waves</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/43c1ab0dae9f762a36caae9f654734a1.png\" alt=\"image.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"https://neumorphism.io/#e0e0e0\">Neumorphism/Soft UI generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/fbd74e3e267632293591cdd6d449eb0d.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://shadows.brumm.af/\">Smooth Shadow generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/1b994013ca812d603f87abfa601ddfa2.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://9elements.github.io/fancy-border-radius/\">Fancy Border Radius Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/dfe5745563a89dd1f304ba10902f7c92.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://larsenwork.com/easing-gradients/\">Easing Gradients</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/77c8492b7924605b91552e60e9c7b437.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://learnui.design/tools/data-color-picker.html\">Data Viz Color Palette Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/7a45985f49af774ea9329d233cc4e922.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://cssgrid-generator.netlify.app/\">CSS Grid Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/54ddf664a2f1c27f119dbe8a2ffe5360.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://accordionslider.com/\">CSS Accordion Slider Generator</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/4aec11b0212bc25a284dfdc0d6e8249b.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://bennettfeely.com/clippy/\">CSS clip-path maker</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/ea1c9a3378d007e50c2c4b80e2b3dcc5.png\" alt=\"image.png\"></p>\n<ul>\n<li><a href=\"https://getwaves.io/\">Get Waves</a></li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/43c1ab0dae9f762a36caae9f654734a1.png\" alt=\"image.png\"></p>\n"},{"title":"git配置ssh","abbrlink":"c8c56574","date":"2021-09-10T13:02:39.000Z","_content":"\n## 在github上新增ssh\n\n``` shell\n$ rm -rf ~/.ssh/* \n$ ssh-keygen -t rsa -b 4096 -C \"你的邮箱\"\n # 按回车三次\n$ cat ~/.ssh/id_rsa.pub\n```\n\n## 基础信息配置\n\n``` shell\n$ git config --global user.name 你的英文名\n$ git config --global user.email 你的邮箱\n$ git config --global push.default matching\n$ git config --global core.quotepath false\n$ git config --global core.editor \"vim\"\n```  ","source":"_posts/git/git配置ssh.md","raw":"---\ntitle: git配置ssh\ntags:\n  - git\n  - ssh\ncategories: 工具\nabbrlink: c8c56574\ndate: 2021-09-10 21:02:39\n---\n\n## 在github上新增ssh\n\n``` shell\n$ rm -rf ~/.ssh/* \n$ ssh-keygen -t rsa -b 4096 -C \"你的邮箱\"\n # 按回车三次\n$ cat ~/.ssh/id_rsa.pub\n```\n\n## 基础信息配置\n\n``` shell\n$ git config --global user.name 你的英文名\n$ git config --global user.email 你的邮箱\n$ git config --global push.default matching\n$ git config --global core.quotepath false\n$ git config --global core.editor \"vim\"\n```  ","slug":"git/git配置ssh","published":1,"updated":"2021-09-16T08:48:58.088Z","_id":"cktmoybjz0009kotr08st2nsb","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"在github上新增ssh\"><a href=\"#在github上新增ssh\" class=\"headerlink\" title=\"在github上新增ssh\"></a>在github上新增ssh</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> rm -rf ~/.ssh/*</span> </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> ssh-keygen -t rsa -b 4096 -C <span class=\"string\">&quot;你的邮箱&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"> #</span><span class=\"bash\"> 按回车三次</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> cat ~/.ssh/id_rsa.pub</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"基础信息配置\"><a href=\"#基础信息配置\" class=\"headerlink\" title=\"基础信息配置\"></a>基础信息配置</h2><pre><code class=\"shell\">$ git config --global user.name 你的英文名\n$ git config --global user.email 你的邮箱\n$ git config --global push.default matching\n$ git config --global core.quotepath false\n$ git config --global core.editor &quot;vim&quot;\n</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"在github上新增ssh\"><a href=\"#在github上新增ssh\" class=\"headerlink\" title=\"在github上新增ssh\"></a>在github上新增ssh</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> rm -rf ~/.ssh/*</span> </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> ssh-keygen -t rsa -b 4096 -C <span class=\"string\">&quot;你的邮箱&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\"> #</span><span class=\"bash\"> 按回车三次</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> cat ~/.ssh/id_rsa.pub</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"基础信息配置\"><a href=\"#基础信息配置\" class=\"headerlink\" title=\"基础信息配置\"></a>基础信息配置</h2><pre><code class=\"shell\">$ git config --global user.name 你的英文名\n$ git config --global user.email 你的邮箱\n$ git config --global push.default matching\n$ git config --global core.quotepath false\n$ git config --global core.editor &quot;vim&quot;\n</code></pre>\n"},{"title":"git仓库同时上传到github和gitee","abbrlink":"f51db730","date":"2021-09-12T04:30:43.000Z","_content":"\n下载仓库到本地\n```shell\ngit clone git@github.com:xx.git\n```\n移除现有仓库\n\n```shell\ngit remote rm origin\n```\n\n关联GitHub的远程库\n\n```\ngit remote add github git@github.com:xx.git\n```\n关联码云仓库\n```\ngit remote add gitee git@xx.git\n```\n\n查看远程仓库\n```\ngit remote -v\n```\n\n代码推送\n```\ngit push github master\n\ngit push gitee master\n```","source":"_posts/git/git仓库同时上传到github和gitee.md","raw":"---\ntitle: git仓库同时上传到github和gitee\ntags: git\ncategories: 工具\nabbrlink: f51db730\ndate: 2021-09-12 12:30:43\n---\n\n下载仓库到本地\n```shell\ngit clone git@github.com:xx.git\n```\n移除现有仓库\n\n```shell\ngit remote rm origin\n```\n\n关联GitHub的远程库\n\n```\ngit remote add github git@github.com:xx.git\n```\n关联码云仓库\n```\ngit remote add gitee git@xx.git\n```\n\n查看远程仓库\n```\ngit remote -v\n```\n\n代码推送\n```\ngit push github master\n\ngit push gitee master\n```","slug":"git/git仓库同时上传到github和gitee","published":1,"updated":"2021-09-16T08:48:58.090Z","_id":"cktmoybk0000akotrdwmo5mff","comments":1,"layout":"post","photos":[],"link":"","content":"<p>下载仓库到本地</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone git@github.com:xx.git</span><br></pre></td></tr></table></figure>\n<p>移除现有仓库</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote rm origin</span><br></pre></td></tr></table></figure>\n\n<p>关联GitHub的远程库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add github git@github.com:xx.git</span><br></pre></td></tr></table></figure>\n<p>关联码云仓库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add gitee git@xx.git</span><br></pre></td></tr></table></figure>\n\n<p>查看远程仓库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n\n<p>代码推送</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push github master</span><br><span class=\"line\"></span><br><span class=\"line\">git push gitee master</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>下载仓库到本地</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone git@github.com:xx.git</span><br></pre></td></tr></table></figure>\n<p>移除现有仓库</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote rm origin</span><br></pre></td></tr></table></figure>\n\n<p>关联GitHub的远程库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add github git@github.com:xx.git</span><br></pre></td></tr></table></figure>\n<p>关联码云仓库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add gitee git@xx.git</span><br></pre></td></tr></table></figure>\n\n<p>查看远程仓库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n\n<p>代码推送</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push github master</span><br><span class=\"line\"></span><br><span class=\"line\">git push gitee master</span><br></pre></td></tr></table></figure>"},{"title":"html知识点","abbrlink":"46c033c6","date":"2021-09-14T01:36:21.000Z","_content":"\n# Img 标签在不同设备上显示不同的图片\n\n```html\n<picture>\n  <source media=\"(min-width:768px)\" srcset=\"med_flag.jpg\" />\n  <source media=\"(min-width:495px)\" srcset=\"small_flower.jpg\" />\n  <img src=\"high_flag.jpg\" alt=\"Flags\" style=\"width:auto;\" />\n</picture>\n```\n\n# 快速搜索匹配项\n\n```html\n<label for=\"country\">Choose your country from the list:</label>\n<input list=\"countries\" name=\"country\" id=\"country\" />\n\n<datalist id=\"countries\">\n  <option value=\"UK\"></option>\n  <option value=\"Germany\"></option>\n  <option value=\"USA\"></option>\n  <option value=\"Japan\"></option>\n  <option value=\"India\"></option>\n</datalist>\n```\n\n# Html 标签变量\n\n```html\n<head>\n  <base href=\"https://www.twitter.com/\" target=\"_blank\" />\n</head>\n\n<body>\n  <img src=\"elonmusk\" alt=\"Elon Musk\" />\n  <a href=\"BillGates\">Bill Gate</a>\n</body>\n```\n\n`img`标签的完整地址是`https://www.twitter.com/elonmusk`\n\n`a`标签同样\n\n# 图片懒加载\n\n```html\n<img src=\"image.png\" loading=\"lazy\" alt=\"…\" width=\"200\" height=\"200\" />\n```\n\n# 使用 CSS 固定 header 与 footer\n\n```html\n<div id=\"container\">\n  <header>header</header>\n\n  <footer>footer</footer>\n</div>\n```\n\n```css\nheader {\n  position: sticky;\n  top: 0;\n}\nfooter {\n  position: sticky;\n  bottom: 0;\n}\n```\n\n# 使用 Promise 实现任务进度\n\n```javascript\nconst loadingBar = document.getElementById(\"loadingBar\");\n\nasync function task() {\n  return new Promise((res) => {\n    setTimeout(res, Math.random() * 5000);\n  });\n}\n\nfunction loadingBarStatus(current, max) {\n  loadingBar.textContent = `Loading ${current} of ${max}`;\n}\n\n(async () => {\n  let current = 1;\n  const promises = new Array(100)\n    .fill(0)\n    .map(() => task().then(() => loadingBarStatus(current++, 100)));\n\n  await Promise.all(promises);\n  loadingBar.textContent = `Loading Finished`;\n})();\n```\n","source":"_posts/html/分享几个html知识点.md","raw":"---\ntitle: html知识点\ntags: html\ncategories: html\nabbrlink: 46c033c6\ndate: 2021-09-14 09:36:21\n---\n\n# Img 标签在不同设备上显示不同的图片\n\n```html\n<picture>\n  <source media=\"(min-width:768px)\" srcset=\"med_flag.jpg\" />\n  <source media=\"(min-width:495px)\" srcset=\"small_flower.jpg\" />\n  <img src=\"high_flag.jpg\" alt=\"Flags\" style=\"width:auto;\" />\n</picture>\n```\n\n# 快速搜索匹配项\n\n```html\n<label for=\"country\">Choose your country from the list:</label>\n<input list=\"countries\" name=\"country\" id=\"country\" />\n\n<datalist id=\"countries\">\n  <option value=\"UK\"></option>\n  <option value=\"Germany\"></option>\n  <option value=\"USA\"></option>\n  <option value=\"Japan\"></option>\n  <option value=\"India\"></option>\n</datalist>\n```\n\n# Html 标签变量\n\n```html\n<head>\n  <base href=\"https://www.twitter.com/\" target=\"_blank\" />\n</head>\n\n<body>\n  <img src=\"elonmusk\" alt=\"Elon Musk\" />\n  <a href=\"BillGates\">Bill Gate</a>\n</body>\n```\n\n`img`标签的完整地址是`https://www.twitter.com/elonmusk`\n\n`a`标签同样\n\n# 图片懒加载\n\n```html\n<img src=\"image.png\" loading=\"lazy\" alt=\"…\" width=\"200\" height=\"200\" />\n```\n\n# 使用 CSS 固定 header 与 footer\n\n```html\n<div id=\"container\">\n  <header>header</header>\n\n  <footer>footer</footer>\n</div>\n```\n\n```css\nheader {\n  position: sticky;\n  top: 0;\n}\nfooter {\n  position: sticky;\n  bottom: 0;\n}\n```\n\n# 使用 Promise 实现任务进度\n\n```javascript\nconst loadingBar = document.getElementById(\"loadingBar\");\n\nasync function task() {\n  return new Promise((res) => {\n    setTimeout(res, Math.random() * 5000);\n  });\n}\n\nfunction loadingBarStatus(current, max) {\n  loadingBar.textContent = `Loading ${current} of ${max}`;\n}\n\n(async () => {\n  let current = 1;\n  const promises = new Array(100)\n    .fill(0)\n    .map(() => task().then(() => loadingBarStatus(current++, 100)));\n\n  await Promise.all(promises);\n  loadingBar.textContent = `Loading Finished`;\n})();\n```\n","slug":"html/分享几个html知识点","published":1,"updated":"2021-09-16T08:48:58.093Z","_id":"cktmoybk1000ckotrgit8hcx2","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Img-标签在不同设备上显示不同的图片\"><a href=\"#Img-标签在不同设备上显示不同的图片\" class=\"headerlink\" title=\"Img 标签在不同设备上显示不同的图片\"></a>Img 标签在不同设备上显示不同的图片</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">picture</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(min-width:768px)&quot;</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;med_flag.jpg&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(min-width:495px)&quot;</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;small_flower.jpg&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;high_flag.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;Flags&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:auto;&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">picture</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"快速搜索匹配项\"><a href=\"#快速搜索匹配项\" class=\"headerlink\" title=\"快速搜索匹配项\"></a>快速搜索匹配项</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;country&quot;</span>&gt;</span>Choose your country from the list:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">list</span>=<span class=\"string\">&quot;countries&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;country&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;country&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">datalist</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;countries&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;UK&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Germany&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;USA&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Japan&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;India&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Html-标签变量\"><a href=\"#Html-标签变量\" class=\"headerlink\" title=\"Html 标签变量\"></a>Html 标签变量</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://www.twitter.com/&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;elonmusk&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;Elon Musk&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;BillGates&quot;</span>&gt;</span>Bill Gate<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>img</code>标签的完整地址是<code>https://www.twitter.com/elonmusk</code></p>\n<p><code>a</code>标签同样</p>\n<h1 id=\"图片懒加载\"><a href=\"#图片懒加载\" class=\"headerlink\" title=\"图片懒加载\"></a>图片懒加载</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;image.png&quot;</span> <span class=\"attr\">loading</span>=<span class=\"string\">&quot;lazy&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;…&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;200&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;200&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"使用-CSS-固定-header-与-footer\"><a href=\"#使用-CSS-固定-header-与-footer\" class=\"headerlink\" title=\"使用 CSS 固定 header 与 footer\"></a>使用 CSS 固定 header 与 footer</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span>header<span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span>footer<span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"使用-Promise-实现任务进度\"><a href=\"#使用-Promise-实现任务进度\" class=\"headerlink\" title=\"使用 Promise 实现任务进度\"></a>使用 Promise 实现任务进度</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> loadingBar = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;loadingBar&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">task</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(res, <span class=\"built_in\">Math</span>.random() * <span class=\"number\">5000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadingBarStatus</span>(<span class=\"params\">current, max</span>) </span>&#123;</span><br><span class=\"line\">  loadingBar.textContent = <span class=\"string\">`Loading <span class=\"subst\">$&#123;current&#125;</span> of <span class=\"subst\">$&#123;max&#125;</span>`</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> current = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> promises = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">100</span>)</span><br><span class=\"line\">    .fill(<span class=\"number\">0</span>)</span><br><span class=\"line\">    .map(<span class=\"function\">() =&gt;</span> task().then(<span class=\"function\">() =&gt;</span> loadingBarStatus(current++, <span class=\"number\">100</span>)));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.all(promises);</span><br><span class=\"line\">  loadingBar.textContent = <span class=\"string\">`Loading Finished`</span>;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Img-标签在不同设备上显示不同的图片\"><a href=\"#Img-标签在不同设备上显示不同的图片\" class=\"headerlink\" title=\"Img 标签在不同设备上显示不同的图片\"></a>Img 标签在不同设备上显示不同的图片</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">picture</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(min-width:768px)&quot;</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;med_flag.jpg&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;(min-width:495px)&quot;</span> <span class=\"attr\">srcset</span>=<span class=\"string\">&quot;small_flower.jpg&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;high_flag.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;Flags&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:auto;&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">picture</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"快速搜索匹配项\"><a href=\"#快速搜索匹配项\" class=\"headerlink\" title=\"快速搜索匹配项\"></a>快速搜索匹配项</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;country&quot;</span>&gt;</span>Choose your country from the list:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">list</span>=<span class=\"string\">&quot;countries&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;country&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;country&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">datalist</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;countries&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;UK&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Germany&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;USA&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Japan&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;India&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Html-标签变量\"><a href=\"#Html-标签变量\" class=\"headerlink\" title=\"Html 标签变量\"></a>Html 标签变量</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://www.twitter.com/&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;elonmusk&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;Elon Musk&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;BillGates&quot;</span>&gt;</span>Bill Gate<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>img</code>标签的完整地址是<code>https://www.twitter.com/elonmusk</code></p>\n<p><code>a</code>标签同样</p>\n<h1 id=\"图片懒加载\"><a href=\"#图片懒加载\" class=\"headerlink\" title=\"图片懒加载\"></a>图片懒加载</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;image.png&quot;</span> <span class=\"attr\">loading</span>=<span class=\"string\">&quot;lazy&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;…&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;200&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;200&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"使用-CSS-固定-header-与-footer\"><a href=\"#使用-CSS-固定-header-与-footer\" class=\"headerlink\" title=\"使用 CSS 固定 header 与 footer\"></a>使用 CSS 固定 header 与 footer</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span>header<span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span>footer<span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"使用-Promise-实现任务进度\"><a href=\"#使用-Promise-实现任务进度\" class=\"headerlink\" title=\"使用 Promise 实现任务进度\"></a>使用 Promise 实现任务进度</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> loadingBar = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;loadingBar&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">task</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(res, <span class=\"built_in\">Math</span>.random() * <span class=\"number\">5000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadingBarStatus</span>(<span class=\"params\">current, max</span>) </span>&#123;</span><br><span class=\"line\">  loadingBar.textContent = <span class=\"string\">`Loading <span class=\"subst\">$&#123;current&#125;</span> of <span class=\"subst\">$&#123;max&#125;</span>`</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> current = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> promises = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(<span class=\"number\">100</span>)</span><br><span class=\"line\">    .fill(<span class=\"number\">0</span>)</span><br><span class=\"line\">    .map(<span class=\"function\">() =&gt;</span> task().then(<span class=\"function\">() =&gt;</span> loadingBarStatus(current++, <span class=\"number\">100</span>)));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.all(promises);</span><br><span class=\"line\">  loadingBar.textContent = <span class=\"string\">`Loading Finished`</span>;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n"},{"title":"Java全局异常捕获处理","abbrlink":"1d5bf6e8","date":"2021-09-10T12:37:39.000Z","_content":"\n\n为了项目的正常运行中,异常捕获,记录也是非常重要的，方便我们排查问题，定位问题\n\n# 定义异常\n\n为了方便定位异常，自定义了几种异常类，方便我们快速定位异常。\n## 基类\n```java\npublic class HttpException extends RuntimeException {\n    protected String code;\n    protected Integer httpStatusCode = 500;\n}\n\n```\n## ParameterException\n```java\npublic class ParameterException extends HttpException {\n    public ParameterException(String code){\n        this.code = code;\n        this.httpStatusCode = 400;\n    }\n}\n```\n## ServerErrorException\n```java\npublic class ServerErrorException extends HttpException {\n    public ServerErrorException(String code) {\n        this.code = code;\n        this.httpStatusCode = 500;\n    }\n}\n\n```\n## UnAuthenticatedException\n```java\npublic class UnAuthenticatedException extends HttpException{\n    public UnAuthenticatedException(String code){\n        this.code = code;\n        this.httpStatusCode = 401;\n    }\n}\n\n```\n## ForbiddenException\n```java\npublic class ForbiddenException extends HttpException {\n    public ForbiddenException(String code) {\n        this.code = code;\n        this.httpStatusCode = 403;\n    }\n}\n```\n## NotFoundException\n```java\npublic class NotFoundException extends HttpException {\n    public NotFoundException(String code){\n        this.httpStatusCode = 404;\n        this.code = code;\n    }\n}\n\n```\n 这里定义了我在项目中常用的几种异常，也可根据实际情况定义自己所需的异常。\n # 捕获异常\n\n 捕获异常需要用到一个注解`@ControllerAdvice`,关于它的详细解释可查看[文档](https://docs.spring.io/spring-framework/docs/5.0.0.M1/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)。\n\n 使用方法如下，定义一个异常捕获类\n\n ```java\n @ControllerAdvice\n public class GlobalExceptionAdvice {\n\n }\n ```\n 这个类就已经实现了捕获全局异常的功能，下面在加上上面定义的几种异常\n  ```java\n @ControllerAdvice\n public class GlobalExceptionAdvice {\n    @ExceptionHandler(UnAuthenticatedException.class)\n    public ResponseEntity unAuthenticatedException(UnAuthenticatedException e) {\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getCode());\n    }\n\n\n    @ExceptionHandler(ParameterException.class)\n    public ResponseEntity handleParameterException(ParameterException e) {\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());\n    }\n\n    @ExceptionHandler(ForbiddenException.class)\n    public ResponseEntity handleForbiddenException(ForbiddenException e) {\n        return ResponseEntity.status(HttpStatus.FORBIDDEN).body(e.getCode());\n    }\n\n    @ExceptionHandler(NotFoundException.class)\n    public ResponseEntity handleNotFoundException(NotFoundException e) {\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(e.getCode());\n    }\n\n    @ExceptionHandler(RuntimeException.class)\n    public ResponseEntity handleRunTimeException(RuntimeException e) {\n\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(500);\n    }\n\n\n }\n ```\n\n `@ExceptionHandler`注解表示该方法捕获的异常类型，就可以在不同的异常中进行不同的处理方式。\n # 记录异常\n  捕获到异常之后我们要记录下来，方便我们对bug的追踪解决。\n\n  记录方法有多种多样的，比如记录到数据库或者`log`文件中。我使用了第二种方式。\n\n  ## 加入依赖\n\n  ```xml\n     <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <optional>true</optional>\n        </dependency>\n       <dependency>\n            <groupId>commons-logging</groupId>\n            <artifactId>commons-logging</artifactId>\n            <version>1.2</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.logging.log4j</groupId>\n            <artifactId>log4j-api</artifactId>\n            <version>2.2</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.logging.log4j</groupId>\n            <artifactId>log4j-core</artifactId>\n            <version>2.2</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.logging.log4j</groupId>\n            <artifactId>log4j-jcl</artifactId>\n            <version>2.2</version>\n        </dependency>\n  ```\n  ## 增加日志配置文件\n\n   `logback.xml`\n  ```xml\n  <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n\n    <!-- 控制台 appender, 几乎是默认的配置 -->\n    <appender name=\"stdout\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder charset=\"UTF-8\">\n            <!-- 输出的日志文本格式, 其他的 appender 与之相同 -->\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n\n    <!-- info 级别的 appender -->\n    <appender name=\"info\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <!-- 日志写入的文件名, 可以是相对目录, 也可以是绝对目录, 如果上级目录不存在会自动创建 -->\n        <file>./logs/info/log-stack.log</file>\n        <!-- 如果是 true, 日志被追加到文件结尾; 如果是 false, 清空现存文件. 默认是true -->\n        <append>true</append>\n        <!-- 日志级别过滤器, 只打 INFO 级别的日志-->\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>INFO</level>\n            <!-- 下面2个属性表示: 匹配 level 的接受打印, 不匹配的拒绝打印 -->\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <!-- 最常用的滚动策略, 它根据时间来制定滚动策略, 既负责滚动也负责触发滚动 -->\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <!-- 设置滚动文件规则, 如果直接使用 %d, 默认格式是 yyyy-MM-dd -->\n            <fileNamePattern>./logs/info/log-stack.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <!-- 保留14天的日志 -->\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <!-- 定义日志输出格式 -->\n        <encoder charset=\"UTF-8\">\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n\n    <!-- error 级别的 appender -->\n    <appender name=\"error\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <file>./logs/error/log-stack.log</file>\n        <append>true</append>\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>./logs/error/log-stack.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <!-- 保留7天的日志 -->\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <!-- 定义日志输出格式 -->\n        <encoder charset=\"UTF-8\">\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n    <!-- error 级别的 appender -->\n    <appender name=\"debug\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <file>./logs/debug/log-stack.log</file>\n        <append>true</append>\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>DEBUG</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>./logs/debug/log-stack.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <!-- 保留7天的日志 -->\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <!-- 定义日志输出格式 -->\n        <encoder charset=\"UTF-8\">\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n    <!-- 指定 com.github 下的日志打印级别, appender -->\n    <logger name=\"com.github\" level=\"debug\" additivity=\"false\">\n        <appender-ref ref=\"stdout\"/>\n        <appender-ref ref=\"info\"/>\n        <appender-ref ref=\"error\"/>\n        <appender-ref ref=\"debug\"/>\n\n    </logger>\n\n \n    <root level=\"info\">\n        <appender-ref ref=\"stdout\"/>\n        <appender-ref ref=\"info\"/>\n        <appender-ref ref=\"error\"/>\n    </root>\n\n</configuration>\n  ```\n## 写入日志\n```java\n@ControllerAdvice\n@Slf4j\npublic class GlobalExceptionAdvice {\n    @ExceptionHandler(ParameterException.class)\n    public ResponseEntity handleParameterException(ParameterException e) {\n        log.error(e.getLocalizedMessage()); \n        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());\n    }\n}\n```\n# 完善异常信息\n\n文章中的异常只定义了`code`，具体的异常信息可以写在配置文件中或者保存在数据库中，在捕获到异常之后，找到对应的描述信息返回调用者，增加友好度。\n\n# 完善记录日志\n\n 以上如果发生了异常，在日志文件中是这样记录的\n\n ```\n 10:19:32.024 [http-nio-8080-exec-2] ERROR c.g.e.d.advice.GlobalExceptionAdvice 41 - / by zero\n ```\n发现记录的行号是在`GlobalExceptionAdvice`类中，并非是代码真实的位置。\n\n如果要记录到代码的真实位置可以这样实现\n```java\n public  String getExceptionDetail(Exception e) {\n\n        StringBuilder stringBuilder = new StringBuilder();\n        stringBuilder.append(e.getClass() + System.getProperty(\"line.separator\"));\n        stringBuilder.append(e.getLocalizedMessage() + System.getProperty(\"line.separator\"));\n        StackTraceElement[] arr = e.getStackTrace();\n        for (int i = 0; i < arr.length; i++) {\n            stringBuilder.append(arr[i].toString() + System.getProperty(\"line.separator\"));\n\n        }\n        return stringBuilder.toString();\n    }\n```\n```java\n log.error(getExceptionDetail(e));\n```\n根据实际情况选择适合自己的方式\n\n# 完整代码\n\n[Github](https://github.com/lizeze/exception-demo)\n\n[Gitee](https://gitee.com/zeze.li/exception-demo)\n","source":"_posts/java/Java全局异常捕获处理.md","raw":"---\ntitle: Java全局异常捕获处理\ntags:\n  - java\n  - 异常\ncategories: Java\nabbrlink: 1d5bf6e8\ndate: 2021-09-10 20:37:39\n---\n\n\n为了项目的正常运行中,异常捕获,记录也是非常重要的，方便我们排查问题，定位问题\n\n# 定义异常\n\n为了方便定位异常，自定义了几种异常类，方便我们快速定位异常。\n## 基类\n```java\npublic class HttpException extends RuntimeException {\n    protected String code;\n    protected Integer httpStatusCode = 500;\n}\n\n```\n## ParameterException\n```java\npublic class ParameterException extends HttpException {\n    public ParameterException(String code){\n        this.code = code;\n        this.httpStatusCode = 400;\n    }\n}\n```\n## ServerErrorException\n```java\npublic class ServerErrorException extends HttpException {\n    public ServerErrorException(String code) {\n        this.code = code;\n        this.httpStatusCode = 500;\n    }\n}\n\n```\n## UnAuthenticatedException\n```java\npublic class UnAuthenticatedException extends HttpException{\n    public UnAuthenticatedException(String code){\n        this.code = code;\n        this.httpStatusCode = 401;\n    }\n}\n\n```\n## ForbiddenException\n```java\npublic class ForbiddenException extends HttpException {\n    public ForbiddenException(String code) {\n        this.code = code;\n        this.httpStatusCode = 403;\n    }\n}\n```\n## NotFoundException\n```java\npublic class NotFoundException extends HttpException {\n    public NotFoundException(String code){\n        this.httpStatusCode = 404;\n        this.code = code;\n    }\n}\n\n```\n 这里定义了我在项目中常用的几种异常，也可根据实际情况定义自己所需的异常。\n # 捕获异常\n\n 捕获异常需要用到一个注解`@ControllerAdvice`,关于它的详细解释可查看[文档](https://docs.spring.io/spring-framework/docs/5.0.0.M1/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)。\n\n 使用方法如下，定义一个异常捕获类\n\n ```java\n @ControllerAdvice\n public class GlobalExceptionAdvice {\n\n }\n ```\n 这个类就已经实现了捕获全局异常的功能，下面在加上上面定义的几种异常\n  ```java\n @ControllerAdvice\n public class GlobalExceptionAdvice {\n    @ExceptionHandler(UnAuthenticatedException.class)\n    public ResponseEntity unAuthenticatedException(UnAuthenticatedException e) {\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getCode());\n    }\n\n\n    @ExceptionHandler(ParameterException.class)\n    public ResponseEntity handleParameterException(ParameterException e) {\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());\n    }\n\n    @ExceptionHandler(ForbiddenException.class)\n    public ResponseEntity handleForbiddenException(ForbiddenException e) {\n        return ResponseEntity.status(HttpStatus.FORBIDDEN).body(e.getCode());\n    }\n\n    @ExceptionHandler(NotFoundException.class)\n    public ResponseEntity handleNotFoundException(NotFoundException e) {\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(e.getCode());\n    }\n\n    @ExceptionHandler(RuntimeException.class)\n    public ResponseEntity handleRunTimeException(RuntimeException e) {\n\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(500);\n    }\n\n\n }\n ```\n\n `@ExceptionHandler`注解表示该方法捕获的异常类型，就可以在不同的异常中进行不同的处理方式。\n # 记录异常\n  捕获到异常之后我们要记录下来，方便我们对bug的追踪解决。\n\n  记录方法有多种多样的，比如记录到数据库或者`log`文件中。我使用了第二种方式。\n\n  ## 加入依赖\n\n  ```xml\n     <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <optional>true</optional>\n        </dependency>\n       <dependency>\n            <groupId>commons-logging</groupId>\n            <artifactId>commons-logging</artifactId>\n            <version>1.2</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.logging.log4j</groupId>\n            <artifactId>log4j-api</artifactId>\n            <version>2.2</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.logging.log4j</groupId>\n            <artifactId>log4j-core</artifactId>\n            <version>2.2</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.logging.log4j</groupId>\n            <artifactId>log4j-jcl</artifactId>\n            <version>2.2</version>\n        </dependency>\n  ```\n  ## 增加日志配置文件\n\n   `logback.xml`\n  ```xml\n  <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n\n    <!-- 控制台 appender, 几乎是默认的配置 -->\n    <appender name=\"stdout\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder charset=\"UTF-8\">\n            <!-- 输出的日志文本格式, 其他的 appender 与之相同 -->\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n\n    <!-- info 级别的 appender -->\n    <appender name=\"info\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <!-- 日志写入的文件名, 可以是相对目录, 也可以是绝对目录, 如果上级目录不存在会自动创建 -->\n        <file>./logs/info/log-stack.log</file>\n        <!-- 如果是 true, 日志被追加到文件结尾; 如果是 false, 清空现存文件. 默认是true -->\n        <append>true</append>\n        <!-- 日志级别过滤器, 只打 INFO 级别的日志-->\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>INFO</level>\n            <!-- 下面2个属性表示: 匹配 level 的接受打印, 不匹配的拒绝打印 -->\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <!-- 最常用的滚动策略, 它根据时间来制定滚动策略, 既负责滚动也负责触发滚动 -->\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <!-- 设置滚动文件规则, 如果直接使用 %d, 默认格式是 yyyy-MM-dd -->\n            <fileNamePattern>./logs/info/log-stack.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <!-- 保留14天的日志 -->\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <!-- 定义日志输出格式 -->\n        <encoder charset=\"UTF-8\">\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n\n    <!-- error 级别的 appender -->\n    <appender name=\"error\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <file>./logs/error/log-stack.log</file>\n        <append>true</append>\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>./logs/error/log-stack.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <!-- 保留7天的日志 -->\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <!-- 定义日志输出格式 -->\n        <encoder charset=\"UTF-8\">\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n    <!-- error 级别的 appender -->\n    <appender name=\"debug\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <file>./logs/debug/log-stack.log</file>\n        <append>true</append>\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>DEBUG</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>./logs/debug/log-stack.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <!-- 保留7天的日志 -->\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <!-- 定义日志输出格式 -->\n        <encoder charset=\"UTF-8\">\n            <pattern> %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} %L - %msg%n</pattern>\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n    <!-- 指定 com.github 下的日志打印级别, appender -->\n    <logger name=\"com.github\" level=\"debug\" additivity=\"false\">\n        <appender-ref ref=\"stdout\"/>\n        <appender-ref ref=\"info\"/>\n        <appender-ref ref=\"error\"/>\n        <appender-ref ref=\"debug\"/>\n\n    </logger>\n\n \n    <root level=\"info\">\n        <appender-ref ref=\"stdout\"/>\n        <appender-ref ref=\"info\"/>\n        <appender-ref ref=\"error\"/>\n    </root>\n\n</configuration>\n  ```\n## 写入日志\n```java\n@ControllerAdvice\n@Slf4j\npublic class GlobalExceptionAdvice {\n    @ExceptionHandler(ParameterException.class)\n    public ResponseEntity handleParameterException(ParameterException e) {\n        log.error(e.getLocalizedMessage()); \n        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());\n    }\n}\n```\n# 完善异常信息\n\n文章中的异常只定义了`code`，具体的异常信息可以写在配置文件中或者保存在数据库中，在捕获到异常之后，找到对应的描述信息返回调用者，增加友好度。\n\n# 完善记录日志\n\n 以上如果发生了异常，在日志文件中是这样记录的\n\n ```\n 10:19:32.024 [http-nio-8080-exec-2] ERROR c.g.e.d.advice.GlobalExceptionAdvice 41 - / by zero\n ```\n发现记录的行号是在`GlobalExceptionAdvice`类中，并非是代码真实的位置。\n\n如果要记录到代码的真实位置可以这样实现\n```java\n public  String getExceptionDetail(Exception e) {\n\n        StringBuilder stringBuilder = new StringBuilder();\n        stringBuilder.append(e.getClass() + System.getProperty(\"line.separator\"));\n        stringBuilder.append(e.getLocalizedMessage() + System.getProperty(\"line.separator\"));\n        StackTraceElement[] arr = e.getStackTrace();\n        for (int i = 0; i < arr.length; i++) {\n            stringBuilder.append(arr[i].toString() + System.getProperty(\"line.separator\"));\n\n        }\n        return stringBuilder.toString();\n    }\n```\n```java\n log.error(getExceptionDetail(e));\n```\n根据实际情况选择适合自己的方式\n\n# 完整代码\n\n[Github](https://github.com/lizeze/exception-demo)\n\n[Gitee](https://gitee.com/zeze.li/exception-demo)\n","slug":"java/Java全局异常捕获处理","published":1,"updated":"2021-09-16T08:48:58.096Z","_id":"cktmoybk2000ekotr4mqf80j4","comments":1,"layout":"post","photos":[],"link":"","content":"<p>为了项目的正常运行中,异常捕获,记录也是非常重要的，方便我们排查问题，定位问题</p>\n<h1 id=\"定义异常\"><a href=\"#定义异常\" class=\"headerlink\" title=\"定义异常\"></a>定义异常</h1><p>为了方便定位异常，自定义了几种异常类，方便我们快速定位异常。</p>\n<h2 id=\"基类\"><a href=\"#基类\" class=\"headerlink\" title=\"基类\"></a>基类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HttpException</span> <span class=\"keyword\">extends</span> <span class=\"title\">RuntimeException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> String code;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> Integer httpStatusCode = <span class=\"number\">500</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"ParameterException\"><a href=\"#ParameterException\" class=\"headerlink\" title=\"ParameterException\"></a>ParameterException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ParameterException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ParameterException</span><span class=\"params\">(String code)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">400</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ServerErrorException\"><a href=\"#ServerErrorException\" class=\"headerlink\" title=\"ServerErrorException\"></a>ServerErrorException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ServerErrorException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ServerErrorException</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">500</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"UnAuthenticatedException\"><a href=\"#UnAuthenticatedException\" class=\"headerlink\" title=\"UnAuthenticatedException\"></a>UnAuthenticatedException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UnAuthenticatedException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">UnAuthenticatedException</span><span class=\"params\">(String code)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">401</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"ForbiddenException\"><a href=\"#ForbiddenException\" class=\"headerlink\" title=\"ForbiddenException\"></a>ForbiddenException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForbiddenException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForbiddenException</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">403</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"NotFoundException\"><a href=\"#NotFoundException\" class=\"headerlink\" title=\"NotFoundException\"></a>NotFoundException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NotFoundException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NotFoundException</span><span class=\"params\">(String code)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">404</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 这里定义了我在项目中常用的几种异常，也可根据实际情况定义自己所需的异常。</p>\n<h1 id=\"捕获异常\"><a href=\"#捕获异常\" class=\"headerlink\" title=\"捕获异常\"></a>捕获异常</h1><p> 捕获异常需要用到一个注解<code>@ControllerAdvice</code>,关于它的详细解释可查看<a href=\"https://docs.spring.io/spring-framework/docs/5.0.0.M1/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\">文档</a>。</p>\n<p> 使用方法如下，定义一个异常捕获类</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@ControllerAdvice</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GlobalExceptionAdvice</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> 这个类就已经实现了捕获全局异常的功能，下面在加上上面定义的几种异常<br>  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@ControllerAdvice</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GlobalExceptionAdvice</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(UnAuthenticatedException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">unAuthenticatedException</span><span class=\"params\">(UnAuthenticatedException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(ParameterException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleParameterException</span><span class=\"params\">(ParameterException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(ForbiddenException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleForbiddenException</span><span class=\"params\">(ForbiddenException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.FORBIDDEN).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(NotFoundException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleNotFoundException</span><span class=\"params\">(NotFoundException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.NOT_FOUND).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(RuntimeException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleRunTimeException</span><span class=\"params\">(RuntimeException e)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(<span class=\"number\">500</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p> <code>@ExceptionHandler</code>注解表示该方法捕获的异常类型，就可以在不同的异常中进行不同的处理方式。</p>\n<h1 id=\"记录异常\"><a href=\"#记录异常\" class=\"headerlink\" title=\"记录异常\"></a>记录异常</h1><p>  捕获到异常之后我们要记录下来，方便我们对bug的追踪解决。</p>\n<p>  记录方法有多种多样的，比如记录到数据库或者<code>log</code>文件中。我使用了第二种方式。</p>\n<h2 id=\"加入依赖\"><a href=\"#加入依赖\" class=\"headerlink\" title=\"加入依赖\"></a>加入依赖</h2>  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-jcl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"增加日志配置文件\"><a href=\"#增加日志配置文件\" class=\"headerlink\" title=\"增加日志配置文件\"></a>增加日志配置文件</h2><p>   <code>logback.xml</code><br>  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 控制台 appender, 几乎是默认的配置 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;stdout&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 输出的日志文本格式, 其他的 appender 与之相同 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- info 级别的 appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;info&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 日志写入的文件名, 可以是相对目录, 也可以是绝对目录, 如果上级目录不存在会自动创建 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>./logs/info/log-stack.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 如果是 true, 日志被追加到文件结尾; 如果是 false, 清空现存文件. 默认是true --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">append</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">append</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 日志级别过滤器, 只打 INFO 级别的日志--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>INFO<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 下面2个属性表示: 匹配 level 的接受打印, 不匹配的拒绝打印 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 最常用的滚动策略, 它根据时间来制定滚动策略, 既负责滚动也负责触发滚动 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 设置滚动文件规则, 如果直接使用 %d, 默认格式是 yyyy-MM-dd --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>./logs/info/log-stack.%d&#123;yyyy-MM-dd&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 保留14天的日志 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">maxHistory</span>&gt;</span>30<span class=\"tag\">&lt;/<span class=\"name\">maxHistory</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 定义日志输出格式 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- error 级别的 appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;error&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>./logs/error/log-stack.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">append</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">append</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>ERROR<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>./logs/error/log-stack.%d&#123;yyyy-MM-dd&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 保留7天的日志 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">maxHistory</span>&gt;</span>30<span class=\"tag\">&lt;/<span class=\"name\">maxHistory</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 定义日志输出格式 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- error 级别的 appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;debug&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>./logs/debug/log-stack.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">append</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">append</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>DEBUG<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>./logs/debug/log-stack.%d&#123;yyyy-MM-dd&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 保留7天的日志 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">maxHistory</span>&gt;</span>30<span class=\"tag\">&lt;/<span class=\"name\">maxHistory</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 定义日志输出格式 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 指定 com.github 下的日志打印级别, appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.github&quot;</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;debug&quot;</span> <span class=\"attr\">additivity</span>=<span class=\"string\">&quot;false&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;stdout&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;info&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;error&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;debug&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">logger</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;info&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;stdout&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;info&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;error&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"写入日志\"><a href=\"#写入日志\" class=\"headerlink\" title=\"写入日志\"></a>写入日志</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@ControllerAdvice</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GlobalExceptionAdvice</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@ExceptionHandler(ParameterException.class)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleParameterException</span><span class=\"params\">(ParameterException e)</span> </span>&#123;</span><br><span class=\"line\">        log.error(e.getLocalizedMessage()); </span><br><span class=\"line\">        <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"完善异常信息\"><a href=\"#完善异常信息\" class=\"headerlink\" title=\"完善异常信息\"></a>完善异常信息</h1><p>文章中的异常只定义了<code>code</code>，具体的异常信息可以写在配置文件中或者保存在数据库中，在捕获到异常之后，找到对应的描述信息返回调用者，增加友好度。</p>\n<h1 id=\"完善记录日志\"><a href=\"#完善记录日志\" class=\"headerlink\" title=\"完善记录日志\"></a>完善记录日志</h1><p> 以上如果发生了异常，在日志文件中是这样记录的</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">10:19:32.024 [http-nio-8080-exec-2] ERROR c.g.e.d.advice.GlobalExceptionAdvice 41 - / by zero</span><br></pre></td></tr></table></figure>\n<p>发现记录的行号是在<code>GlobalExceptionAdvice</code>类中，并非是代码真实的位置。</p>\n<p>如果要记录到代码的真实位置可以这样实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span>  String <span class=\"title\">getExceptionDetail</span><span class=\"params\">(Exception e)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">       stringBuilder.append(e.getClass() + System.getProperty(<span class=\"string\">&quot;line.separator&quot;</span>));</span><br><span class=\"line\">       stringBuilder.append(e.getLocalizedMessage() + System.getProperty(<span class=\"string\">&quot;line.separator&quot;</span>));</span><br><span class=\"line\">       StackTraceElement[] arr = e.getStackTrace();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">           stringBuilder.append(arr[i].toString() + System.getProperty(<span class=\"string\">&quot;line.separator&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> stringBuilder.toString();</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log.error(getExceptionDetail(e));</span><br></pre></td></tr></table></figure>\n<p>根据实际情况选择适合自己的方式</p>\n<h1 id=\"完整代码\"><a href=\"#完整代码\" class=\"headerlink\" title=\"完整代码\"></a>完整代码</h1><p><a href=\"https://github.com/lizeze/exception-demo\">Github</a></p>\n<p><a href=\"https://gitee.com/zeze.li/exception-demo\">Gitee</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>为了项目的正常运行中,异常捕获,记录也是非常重要的，方便我们排查问题，定位问题</p>\n<h1 id=\"定义异常\"><a href=\"#定义异常\" class=\"headerlink\" title=\"定义异常\"></a>定义异常</h1><p>为了方便定位异常，自定义了几种异常类，方便我们快速定位异常。</p>\n<h2 id=\"基类\"><a href=\"#基类\" class=\"headerlink\" title=\"基类\"></a>基类</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HttpException</span> <span class=\"keyword\">extends</span> <span class=\"title\">RuntimeException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> String code;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> Integer httpStatusCode = <span class=\"number\">500</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"ParameterException\"><a href=\"#ParameterException\" class=\"headerlink\" title=\"ParameterException\"></a>ParameterException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ParameterException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ParameterException</span><span class=\"params\">(String code)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">400</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ServerErrorException\"><a href=\"#ServerErrorException\" class=\"headerlink\" title=\"ServerErrorException\"></a>ServerErrorException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ServerErrorException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ServerErrorException</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">500</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"UnAuthenticatedException\"><a href=\"#UnAuthenticatedException\" class=\"headerlink\" title=\"UnAuthenticatedException\"></a>UnAuthenticatedException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UnAuthenticatedException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">UnAuthenticatedException</span><span class=\"params\">(String code)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">401</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"ForbiddenException\"><a href=\"#ForbiddenException\" class=\"headerlink\" title=\"ForbiddenException\"></a>ForbiddenException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForbiddenException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForbiddenException</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">403</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"NotFoundException\"><a href=\"#NotFoundException\" class=\"headerlink\" title=\"NotFoundException\"></a>NotFoundException</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NotFoundException</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NotFoundException</span><span class=\"params\">(String code)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.httpStatusCode = <span class=\"number\">404</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 这里定义了我在项目中常用的几种异常，也可根据实际情况定义自己所需的异常。</p>\n<h1 id=\"捕获异常\"><a href=\"#捕获异常\" class=\"headerlink\" title=\"捕获异常\"></a>捕获异常</h1><p> 捕获异常需要用到一个注解<code>@ControllerAdvice</code>,关于它的详细解释可查看<a href=\"https://docs.spring.io/spring-framework/docs/5.0.0.M1/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\">文档</a>。</p>\n<p> 使用方法如下，定义一个异常捕获类</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@ControllerAdvice</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GlobalExceptionAdvice</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> 这个类就已经实现了捕获全局异常的功能，下面在加上上面定义的几种异常<br>  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@ControllerAdvice</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GlobalExceptionAdvice</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(UnAuthenticatedException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">unAuthenticatedException</span><span class=\"params\">(UnAuthenticatedException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(ParameterException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleParameterException</span><span class=\"params\">(ParameterException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(ForbiddenException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleForbiddenException</span><span class=\"params\">(ForbiddenException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.FORBIDDEN).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(NotFoundException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleNotFoundException</span><span class=\"params\">(NotFoundException e)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.NOT_FOUND).body(e.getCode());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@ExceptionHandler(RuntimeException.class)</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleRunTimeException</span><span class=\"params\">(RuntimeException e)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(<span class=\"number\">500</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p> <code>@ExceptionHandler</code>注解表示该方法捕获的异常类型，就可以在不同的异常中进行不同的处理方式。</p>\n<h1 id=\"记录异常\"><a href=\"#记录异常\" class=\"headerlink\" title=\"记录异常\"></a>记录异常</h1><p>  捕获到异常之后我们要记录下来，方便我们对bug的追踪解决。</p>\n<p>  记录方法有多种多样的，比如记录到数据库或者<code>log</code>文件中。我使用了第二种方式。</p>\n<h2 id=\"加入依赖\"><a href=\"#加入依赖\" class=\"headerlink\" title=\"加入依赖\"></a>加入依赖</h2>  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-jcl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"增加日志配置文件\"><a href=\"#增加日志配置文件\" class=\"headerlink\" title=\"增加日志配置文件\"></a>增加日志配置文件</h2><p>   <code>logback.xml</code><br>  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 控制台 appender, 几乎是默认的配置 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;stdout&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 输出的日志文本格式, 其他的 appender 与之相同 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- info 级别的 appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;info&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 日志写入的文件名, 可以是相对目录, 也可以是绝对目录, 如果上级目录不存在会自动创建 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>./logs/info/log-stack.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 如果是 true, 日志被追加到文件结尾; 如果是 false, 清空现存文件. 默认是true --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">append</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">append</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 日志级别过滤器, 只打 INFO 级别的日志--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>INFO<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 下面2个属性表示: 匹配 level 的接受打印, 不匹配的拒绝打印 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 最常用的滚动策略, 它根据时间来制定滚动策略, 既负责滚动也负责触发滚动 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 设置滚动文件规则, 如果直接使用 %d, 默认格式是 yyyy-MM-dd --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>./logs/info/log-stack.%d&#123;yyyy-MM-dd&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 保留14天的日志 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">maxHistory</span>&gt;</span>30<span class=\"tag\">&lt;/<span class=\"name\">maxHistory</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 定义日志输出格式 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- error 级别的 appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;error&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>./logs/error/log-stack.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">append</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">append</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>ERROR<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>./logs/error/log-stack.%d&#123;yyyy-MM-dd&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 保留7天的日志 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">maxHistory</span>&gt;</span>30<span class=\"tag\">&lt;/<span class=\"name\">maxHistory</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 定义日志输出格式 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- error 级别的 appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;debug&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>./logs/debug/log-stack.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">append</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">append</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>DEBUG<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>./logs/debug/log-stack.%d&#123;yyyy-MM-dd&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 保留7天的日志 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">maxHistory</span>&gt;</span>30<span class=\"tag\">&lt;/<span class=\"name\">maxHistory</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 定义日志输出格式 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span> %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; %L - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 指定 com.github 下的日志打印级别, appender --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.github&quot;</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;debug&quot;</span> <span class=\"attr\">additivity</span>=<span class=\"string\">&quot;false&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;stdout&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;info&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;error&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;debug&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">logger</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;info&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;stdout&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;info&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;error&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"写入日志\"><a href=\"#写入日志\" class=\"headerlink\" title=\"写入日志\"></a>写入日志</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@ControllerAdvice</span></span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GlobalExceptionAdvice</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@ExceptionHandler(ParameterException.class)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">handleParameterException</span><span class=\"params\">(ParameterException e)</span> </span>&#123;</span><br><span class=\"line\">        log.error(e.getLocalizedMessage()); </span><br><span class=\"line\">        <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getCode());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"完善异常信息\"><a href=\"#完善异常信息\" class=\"headerlink\" title=\"完善异常信息\"></a>完善异常信息</h1><p>文章中的异常只定义了<code>code</code>，具体的异常信息可以写在配置文件中或者保存在数据库中，在捕获到异常之后，找到对应的描述信息返回调用者，增加友好度。</p>\n<h1 id=\"完善记录日志\"><a href=\"#完善记录日志\" class=\"headerlink\" title=\"完善记录日志\"></a>完善记录日志</h1><p> 以上如果发生了异常，在日志文件中是这样记录的</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">10:19:32.024 [http-nio-8080-exec-2] ERROR c.g.e.d.advice.GlobalExceptionAdvice 41 - / by zero</span><br></pre></td></tr></table></figure>\n<p>发现记录的行号是在<code>GlobalExceptionAdvice</code>类中，并非是代码真实的位置。</p>\n<p>如果要记录到代码的真实位置可以这样实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span>  String <span class=\"title\">getExceptionDetail</span><span class=\"params\">(Exception e)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">       stringBuilder.append(e.getClass() + System.getProperty(<span class=\"string\">&quot;line.separator&quot;</span>));</span><br><span class=\"line\">       stringBuilder.append(e.getLocalizedMessage() + System.getProperty(<span class=\"string\">&quot;line.separator&quot;</span>));</span><br><span class=\"line\">       StackTraceElement[] arr = e.getStackTrace();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">           stringBuilder.append(arr[i].toString() + System.getProperty(<span class=\"string\">&quot;line.separator&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> stringBuilder.toString();</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log.error(getExceptionDetail(e));</span><br></pre></td></tr></table></figure>\n<p>根据实际情况选择适合自己的方式</p>\n<h1 id=\"完整代码\"><a href=\"#完整代码\" class=\"headerlink\" title=\"完整代码\"></a>完整代码</h1><p><a href=\"https://github.com/lizeze/exception-demo\">Github</a></p>\n<p><a href=\"https://gitee.com/zeze.li/exception-demo\">Gitee</a></p>\n"},{"title":"Springboot使用@value注入静态属性","abbrlink":"daa7cd7","date":"2021-09-10T12:44:39.000Z","_content":"# Springboot @value 注解注入静态属性\n\n``` java\n\n@Component\npublic class FileTool {\n\n    private static String proxyIp;\n\n    @Value(\"${cim.http.proxy_ip}\")\n    public void setProxyIp(String _proxyIp) {\n        proxyIp = _proxyIp;\n    }\n}\n\n```\n\n直接在属性上使用 `@value` 是无效的，要通过 `set` 方法注入， `class` 要加上 `@Component` 注解\n","source":"_posts/java/Springboot使用@value注入静态属性.md","raw":"---\ntitle: Springboot使用@value注入静态属性\ntags:\n  - springboot\ncategories: Java\nabbrlink: daa7cd7\ndate: 2021-09-10 20:44:39\n---\n# Springboot @value 注解注入静态属性\n\n``` java\n\n@Component\npublic class FileTool {\n\n    private static String proxyIp;\n\n    @Value(\"${cim.http.proxy_ip}\")\n    public void setProxyIp(String _proxyIp) {\n        proxyIp = _proxyIp;\n    }\n}\n\n```\n\n直接在属性上使用 `@value` 是无效的，要通过 `set` 方法注入， `class` 要加上 `@Component` 注解\n","slug":"java/Springboot使用@value注入静态属性","published":1,"updated":"2021-09-16T08:48:58.098Z","_id":"cktmoybk4000gkotrffea2czh","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Springboot-value-注解注入静态属性\"><a href=\"#Springboot-value-注解注入静态属性\" class=\"headerlink\" title=\"Springboot @value 注解注入静态属性\"></a>Springboot @value 注解注入静态属性</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileTool</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String proxyIp;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;cim.http.proxy_ip&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setProxyIp</span><span class=\"params\">(String _proxyIp)</span> </span>&#123;</span><br><span class=\"line\">        proxyIp = _proxyIp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>直接在属性上使用 <code>@value</code> 是无效的，要通过 <code>set</code> 方法注入， <code>class</code> 要加上 <code>@Component</code> 注解</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Springboot-value-注解注入静态属性\"><a href=\"#Springboot-value-注解注入静态属性\" class=\"headerlink\" title=\"Springboot @value 注解注入静态属性\"></a>Springboot @value 注解注入静态属性</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FileTool</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String proxyIp;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;cim.http.proxy_ip&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setProxyIp</span><span class=\"params\">(String _proxyIp)</span> </span>&#123;</span><br><span class=\"line\">        proxyIp = _proxyIp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>直接在属性上使用 <code>@value</code> 是无效的，要通过 <code>set</code> 方法注入， <code>class</code> 要加上 <code>@Component</code> 注解</p>\n"},{"title":"MyBatis-Plus通用查询工具类","abbrlink":"939c1baf","date":"2021-09-10T12:39:04.000Z","_content":"\n\n\n> mybatis-plus简称MP是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。\n\n这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus[官网](https://mybatis.plus/) 。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。\n\n下面是在`MP`为基础封装了一个查询类，实现了如果需要增加查询条件只需在前端修改即可。             \n# 查询工具\n* SearchModel\n``` java\npublic class SearchModel<T> {\n\n    private Integer pageIndex;\n    private Integer pageSize;\n    private List<Field> fields;\n    private String orderField;\n    private boolean isAsc;\n\n    public IPage<T> getPage() {\n        IPage<T> page = new Page<>(pageIndex, pageSize);\n        if (!StringUtil.isEmptyOrNull(orderField)) {\n            OrderItem orderItem = new OrderItem();\n            orderItem.setAsc(isAsc);\n            orderItem.setColumn(orderField);\n            page.orders().add(orderItem);\n        }\n        return page;\n\n    }\n\n    public QueryWrapper<T> getQueryModel() {\n        QueryWrapper<T> queryWrapper = new QueryWrapper<>();\n        for (Iterator iter = this.fields.iterator(); iter.hasNext(); ) {\n            Field field = (Field) iter.next();\n            switch (field.getQueryMethod()) {\n                case eq:\n                    queryWrapper.eq(true, field.getName(), field.getValue());\n                    break;\n                case like:\n                    queryWrapper.like(true, field.getName(), field.getValue());\n            }\n        }\n\n        if (!StringUtil.isEmptyOrNull(orderField)) {\n            queryWrapper.orderBy(true, isAsc, orderField);\n        }\n        return queryWrapper;\n    }\n}\n```\n* Field\n``` java\npublic class Field {\n    public Field(String name, Object value) {\n        this.name = name;\n        this.value = value;\n        this.queryMethod = QueryMethod.eq;\n    }\n\n    public Field(String name, Object value, QueryMethod queryMethod) {\n        this.name = name;\n        this.value = value;\n        this.queryMethod = queryMethod;\n    }\n\n    private String name;\n    private Object value;\n    private QueryMethod queryMethod;\n}\n```\n* QueryMethod\n```java\npublic enum QueryMethod {\n    eq, like\n}\n\n```\n## 调用示例\n\n```json\n {\n \"fields\": [\n             {\n             \"value\": \"v\",\n             \"name\": \"project_code\",\n             \"queryMethod\": \"eq\"\n             },\n             {\n             \"name\": \"type\",\n             \"queryMethod\": \"like\",\n            \"value\": \"b\"\n             },\n             {\n             \"name\": \"id\",\n             \"queryMethod\": \"like\",\n             \"value\": \"a\"\n             }\n ],\n \"pageIndex\": 1,\n \"pageSize\": 8,\n \"orderField\": \"type\",\n \"isAsc\": \"false\"\n }\n```\n在api中传入上面的json对象即可完成一个查询服务,查询条件通过前端传入的字段控制\n# BaseService\n* IBaseService\n```java\n\npublic interface IBaseService<T> {\n\n    T save(T entity) throws Exception;\n\n    boolean saveBatch(Collection<T> entityList);\n\n\n    // TableId 注解存在更新记录，否插入一条记录\n    boolean saveOrUpdate(T entity);\n\n    // 根据updateWrapper尝试更新，否继续执行saveOrUpdate(T)方法\n    boolean saveOrUpdate(T entity, Wrapper<T> updateWrapper);\n\n    // 批量修改插入\n    boolean saveOrUpdateBatch(Collection<T> entityList);\n\n    // 根据 entity 条件，删除记录\n    boolean remove(Wrapper<T> queryWrapper);\n\n    // 根据 ID 删除\n    boolean removeById(Serializable id);\n\n    // 根据 columnMap 条件，删除记录\n    boolean removeByMap(Map<String, Object> columnMap);\n\n    // 删除（根据ID 批量删除）\n    boolean removeByIds(Collection<? extends Serializable> idList);\n\n    List<T> list();\n\n    // 查询列表\n    List<T> list(SearchModel<T> searchModel);\n\n    // 查询（根据ID 批量查询）\n    Collection<T> listByIds(Collection<? extends Serializable> idList);\n\n    // 查询（根据 columnMap 条件）\n    Collection<T> listByMap(Map<String, Object> columnMap);\n\n    // 翻页查询\n    IPage<T> page(SearchModel<T> searchModel);\n\n    T selectById(Serializable id);\n\n    T selectOne(Wrapper<T> queryWrapper);\n}\n\n```\n\n* BaseServiceImpl\n ```java\npublic class BaseServiceImpl<M extends BaseMapper<T>, T> implements IBaseService<T> {\n\n    @Autowired\n    private M baseMapper;\n\n\n    @Override\n    public T save(T entity) throws Exception {\n        baseMapper.insert(entity);\n        return entity;\n    }\n\n    @Transactional(rollbackFor = RuntimeException.class)\n    @Override\n    public boolean saveBatch(Collection<T> entityList) {\n        Integer size = entityList.size();\n        for (T entity : entityList) {\n            baseMapper.insert(entity);\n            size++;\n        }\n        return size == entityList.size();\n    }\n\n    @Override\n    public boolean saveOrUpdate(T entity) {\n        int rs = baseMapper.updateById(entity);\n        if (rs > 0) return true;\n        return baseMapper.insert(entity) > 0;\n    }\n\n    @Override\n    public boolean saveOrUpdate(T entity, Wrapper<T> updateWrapper) {\n\n\n        return false;\n    }\n\n    @Transactional(rollbackFor = RuntimeException.class)\n    @Override\n    public boolean saveOrUpdateBatch(Collection<T> entityList) {\n\n        for (T entity : entityList) {\n            saveOrUpdate(entity);\n        }\n        return true;\n    }\n\n    @Override\n    public boolean remove(Wrapper<T> queryWrapper) {\n        return baseMapper.delete(queryWrapper) > 0;\n    }\n\n    @Override\n    public boolean removeById(Serializable id) {\n        return baseMapper.deleteById(id) > 0;\n    }\n\n    @Override\n    public boolean removeByMap(Map<String, Object> columnMap) {\n        return baseMapper.deleteByMap(columnMap) > 0;\n    }\n\n    @Override\n    public boolean removeByIds(Collection<? extends Serializable> idList) {\n        return baseMapper.deleteBatchIds(idList) > 0;\n    }\n\n    @Override\n    public List<T> list() {\n        return baseMapper.selectList(new QueryWrapper<T>());\n    }\n\n    @Override\n    public List<T> list(SearchModel<T> searchModel) {\n        return baseMapper.selectList(searchModel.getQueryModel());\n    }\n\n    @Override\n    public Collection<T> listByIds(Collection<? extends Serializable> idList) {\n        return baseMapper.selectBatchIds(idList);\n    }\n\n    @Override\n    public Collection<T> listByMap(Map<String, Object> columnMap) {\n        return baseMapper.selectByMap(columnMap);\n    }\n\n\n    @Override\n    public IPage<T> page(SearchModel<T> searchModel) {\n        return baseMapper.selectPage(searchModel.getPage(), searchModel.getQueryModel());\n\n    }\n\n    @Override\n    public T selectById(Serializable id) {\n        return baseMapper.selectById(id);\n    }\n\n    @Override\n    public T selectOne(Wrapper<T> queryWrapper) {\n        return baseMapper.selectOne(queryWrapper);\n    }\n}\n\n```\n\nMP实现了mapper层基础的CRUD方法，这里把一些常用的service层的方法整理了一下，又减少了一些代码量\n\n [代码地址](https://github.com/lizeze/mp-search)\n \n [使用示例](https://github.com/lizeze/mp-demo)","source":"_posts/java/MyBatis-Plus通用查询工具类.md.md","raw":"---\ntitle: MyBatis-Plus通用查询工具类\ntags:\n  - mybatis-plus\n  - java\ncategories: Java\nabbrlink: 939c1baf\ndate: 2021-09-10 20:39:04\n---\n\n\n\n> mybatis-plus简称MP是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。\n\n这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus[官网](https://mybatis.plus/) 。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。\n\n下面是在`MP`为基础封装了一个查询类，实现了如果需要增加查询条件只需在前端修改即可。             \n# 查询工具\n* SearchModel\n``` java\npublic class SearchModel<T> {\n\n    private Integer pageIndex;\n    private Integer pageSize;\n    private List<Field> fields;\n    private String orderField;\n    private boolean isAsc;\n\n    public IPage<T> getPage() {\n        IPage<T> page = new Page<>(pageIndex, pageSize);\n        if (!StringUtil.isEmptyOrNull(orderField)) {\n            OrderItem orderItem = new OrderItem();\n            orderItem.setAsc(isAsc);\n            orderItem.setColumn(orderField);\n            page.orders().add(orderItem);\n        }\n        return page;\n\n    }\n\n    public QueryWrapper<T> getQueryModel() {\n        QueryWrapper<T> queryWrapper = new QueryWrapper<>();\n        for (Iterator iter = this.fields.iterator(); iter.hasNext(); ) {\n            Field field = (Field) iter.next();\n            switch (field.getQueryMethod()) {\n                case eq:\n                    queryWrapper.eq(true, field.getName(), field.getValue());\n                    break;\n                case like:\n                    queryWrapper.like(true, field.getName(), field.getValue());\n            }\n        }\n\n        if (!StringUtil.isEmptyOrNull(orderField)) {\n            queryWrapper.orderBy(true, isAsc, orderField);\n        }\n        return queryWrapper;\n    }\n}\n```\n* Field\n``` java\npublic class Field {\n    public Field(String name, Object value) {\n        this.name = name;\n        this.value = value;\n        this.queryMethod = QueryMethod.eq;\n    }\n\n    public Field(String name, Object value, QueryMethod queryMethod) {\n        this.name = name;\n        this.value = value;\n        this.queryMethod = queryMethod;\n    }\n\n    private String name;\n    private Object value;\n    private QueryMethod queryMethod;\n}\n```\n* QueryMethod\n```java\npublic enum QueryMethod {\n    eq, like\n}\n\n```\n## 调用示例\n\n```json\n {\n \"fields\": [\n             {\n             \"value\": \"v\",\n             \"name\": \"project_code\",\n             \"queryMethod\": \"eq\"\n             },\n             {\n             \"name\": \"type\",\n             \"queryMethod\": \"like\",\n            \"value\": \"b\"\n             },\n             {\n             \"name\": \"id\",\n             \"queryMethod\": \"like\",\n             \"value\": \"a\"\n             }\n ],\n \"pageIndex\": 1,\n \"pageSize\": 8,\n \"orderField\": \"type\",\n \"isAsc\": \"false\"\n }\n```\n在api中传入上面的json对象即可完成一个查询服务,查询条件通过前端传入的字段控制\n# BaseService\n* IBaseService\n```java\n\npublic interface IBaseService<T> {\n\n    T save(T entity) throws Exception;\n\n    boolean saveBatch(Collection<T> entityList);\n\n\n    // TableId 注解存在更新记录，否插入一条记录\n    boolean saveOrUpdate(T entity);\n\n    // 根据updateWrapper尝试更新，否继续执行saveOrUpdate(T)方法\n    boolean saveOrUpdate(T entity, Wrapper<T> updateWrapper);\n\n    // 批量修改插入\n    boolean saveOrUpdateBatch(Collection<T> entityList);\n\n    // 根据 entity 条件，删除记录\n    boolean remove(Wrapper<T> queryWrapper);\n\n    // 根据 ID 删除\n    boolean removeById(Serializable id);\n\n    // 根据 columnMap 条件，删除记录\n    boolean removeByMap(Map<String, Object> columnMap);\n\n    // 删除（根据ID 批量删除）\n    boolean removeByIds(Collection<? extends Serializable> idList);\n\n    List<T> list();\n\n    // 查询列表\n    List<T> list(SearchModel<T> searchModel);\n\n    // 查询（根据ID 批量查询）\n    Collection<T> listByIds(Collection<? extends Serializable> idList);\n\n    // 查询（根据 columnMap 条件）\n    Collection<T> listByMap(Map<String, Object> columnMap);\n\n    // 翻页查询\n    IPage<T> page(SearchModel<T> searchModel);\n\n    T selectById(Serializable id);\n\n    T selectOne(Wrapper<T> queryWrapper);\n}\n\n```\n\n* BaseServiceImpl\n ```java\npublic class BaseServiceImpl<M extends BaseMapper<T>, T> implements IBaseService<T> {\n\n    @Autowired\n    private M baseMapper;\n\n\n    @Override\n    public T save(T entity) throws Exception {\n        baseMapper.insert(entity);\n        return entity;\n    }\n\n    @Transactional(rollbackFor = RuntimeException.class)\n    @Override\n    public boolean saveBatch(Collection<T> entityList) {\n        Integer size = entityList.size();\n        for (T entity : entityList) {\n            baseMapper.insert(entity);\n            size++;\n        }\n        return size == entityList.size();\n    }\n\n    @Override\n    public boolean saveOrUpdate(T entity) {\n        int rs = baseMapper.updateById(entity);\n        if (rs > 0) return true;\n        return baseMapper.insert(entity) > 0;\n    }\n\n    @Override\n    public boolean saveOrUpdate(T entity, Wrapper<T> updateWrapper) {\n\n\n        return false;\n    }\n\n    @Transactional(rollbackFor = RuntimeException.class)\n    @Override\n    public boolean saveOrUpdateBatch(Collection<T> entityList) {\n\n        for (T entity : entityList) {\n            saveOrUpdate(entity);\n        }\n        return true;\n    }\n\n    @Override\n    public boolean remove(Wrapper<T> queryWrapper) {\n        return baseMapper.delete(queryWrapper) > 0;\n    }\n\n    @Override\n    public boolean removeById(Serializable id) {\n        return baseMapper.deleteById(id) > 0;\n    }\n\n    @Override\n    public boolean removeByMap(Map<String, Object> columnMap) {\n        return baseMapper.deleteByMap(columnMap) > 0;\n    }\n\n    @Override\n    public boolean removeByIds(Collection<? extends Serializable> idList) {\n        return baseMapper.deleteBatchIds(idList) > 0;\n    }\n\n    @Override\n    public List<T> list() {\n        return baseMapper.selectList(new QueryWrapper<T>());\n    }\n\n    @Override\n    public List<T> list(SearchModel<T> searchModel) {\n        return baseMapper.selectList(searchModel.getQueryModel());\n    }\n\n    @Override\n    public Collection<T> listByIds(Collection<? extends Serializable> idList) {\n        return baseMapper.selectBatchIds(idList);\n    }\n\n    @Override\n    public Collection<T> listByMap(Map<String, Object> columnMap) {\n        return baseMapper.selectByMap(columnMap);\n    }\n\n\n    @Override\n    public IPage<T> page(SearchModel<T> searchModel) {\n        return baseMapper.selectPage(searchModel.getPage(), searchModel.getQueryModel());\n\n    }\n\n    @Override\n    public T selectById(Serializable id) {\n        return baseMapper.selectById(id);\n    }\n\n    @Override\n    public T selectOne(Wrapper<T> queryWrapper) {\n        return baseMapper.selectOne(queryWrapper);\n    }\n}\n\n```\n\nMP实现了mapper层基础的CRUD方法，这里把一些常用的service层的方法整理了一下，又减少了一些代码量\n\n [代码地址](https://github.com/lizeze/mp-search)\n \n [使用示例](https://github.com/lizeze/mp-demo)","slug":"java/MyBatis-Plus通用查询工具类.md","published":1,"updated":"2021-09-16T08:48:58.101Z","_id":"cktmoybk7000jkotrfolr9d6c","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>mybatis-plus简称MP是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>\n</blockquote>\n<p>这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus<a href=\"https://mybatis.plus/\">官网</a> 。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。</p>\n<p>下面是在<code>MP</code>为基础封装了一个查询类，实现了如果需要增加查询条件只需在前端修改即可。             </p>\n<h1 id=\"查询工具\"><a href=\"#查询工具\" class=\"headerlink\" title=\"查询工具\"></a>查询工具</h1><ul>\n<li>SearchModel<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SearchModel</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer pageIndex;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer pageSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Field&gt; fields;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String orderField;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> isAsc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IPage&lt;T&gt; <span class=\"title\">getPage</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        IPage&lt;T&gt; page = <span class=\"keyword\">new</span> Page&lt;&gt;(pageIndex, pageSize);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!StringUtil.isEmptyOrNull(orderField)) &#123;</span><br><span class=\"line\">            OrderItem orderItem = <span class=\"keyword\">new</span> OrderItem();</span><br><span class=\"line\">            orderItem.setAsc(isAsc);</span><br><span class=\"line\">            orderItem.setColumn(orderField);</span><br><span class=\"line\">            page.orders().add(orderItem);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> page;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> QueryWrapper&lt;T&gt; <span class=\"title\">getQueryModel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        QueryWrapper&lt;T&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Iterator iter = <span class=\"keyword\">this</span>.fields.iterator(); iter.hasNext(); ) &#123;</span><br><span class=\"line\">            Field field = (Field) iter.next();</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (field.getQueryMethod()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> eq:</span><br><span class=\"line\">                    queryWrapper.eq(<span class=\"keyword\">true</span>, field.getName(), field.getValue());</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> like:</span><br><span class=\"line\">                    queryWrapper.like(<span class=\"keyword\">true</span>, field.getName(), field.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!StringUtil.isEmptyOrNull(orderField)) &#123;</span><br><span class=\"line\">            queryWrapper.orderBy(<span class=\"keyword\">true</span>, isAsc, orderField);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> queryWrapper;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>Field<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Field</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Field</span><span class=\"params\">(String name, Object value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.queryMethod = QueryMethod.eq;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Field</span><span class=\"params\">(String name, Object value, QueryMethod queryMethod)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.queryMethod = queryMethod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Object value;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> QueryMethod queryMethod;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>QueryMethod<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">QueryMethod</span> </span>&#123;</span><br><span class=\"line\">    eq, like</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"调用示例\"><a href=\"#调用示例\" class=\"headerlink\" title=\"调用示例\"></a>调用示例</h2></li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"attr\">&quot;fields&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;value&quot;</span>: <span class=\"string\">&quot;v&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;project_code&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;queryMethod&quot;</span>: <span class=\"string\">&quot;eq&quot;</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;type&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;queryMethod&quot;</span>: <span class=\"string\">&quot;like&quot;</span>,</span><br><span class=\"line\">           <span class=\"attr\">&quot;value&quot;</span>: <span class=\"string\">&quot;b&quot;</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;id&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;queryMethod&quot;</span>: <span class=\"string\">&quot;like&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;value&quot;</span>: <span class=\"string\">&quot;a&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">],</span><br><span class=\"line\"><span class=\"attr\">&quot;pageIndex&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\"><span class=\"attr\">&quot;pageSize&quot;</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\"><span class=\"attr\">&quot;orderField&quot;</span>: <span class=\"string\">&quot;type&quot;</span>,</span><br><span class=\"line\"><span class=\"attr\">&quot;isAsc&quot;</span>: <span class=\"string\">&quot;false&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在api中传入上面的json对象即可完成一个查询服务,查询条件通过前端传入的字段控制</p>\n<h1 id=\"BaseService\"><a href=\"#BaseService\" class=\"headerlink\" title=\"BaseService\"></a>BaseService</h1><ul>\n<li><p>IBaseService</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IBaseService</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">T <span class=\"title\">save</span><span class=\"params\">(T entity)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// TableId 注解存在更新记录，否插入一条记录</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据updateWrapper尝试更新，否继续执行saveOrUpdate(T)方法</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity, Wrapper&lt;T&gt; updateWrapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 批量修改插入</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据 entity 条件，删除记录</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据 ID 删除</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据 columnMap 条件，删除记录</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 删除（根据ID 批量删除）</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查询列表</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查询（根据ID 批量查询）</span></span><br><span class=\"line\">    <span class=\"function\">Collection&lt;T&gt; <span class=\"title\">listByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查询（根据 columnMap 条件）</span></span><br><span class=\"line\">    <span class=\"function\">Collection&lt;T&gt; <span class=\"title\">listByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 翻页查询</span></span><br><span class=\"line\">    <span class=\"function\">IPage&lt;T&gt; <span class=\"title\">page</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">T <span class=\"title\">selectById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">T <span class=\"title\">selectOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n<li><p>BaseServiceImpl</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseServiceImpl</span>&lt;<span class=\"title\">M</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">T</span>&gt;, <span class=\"title\">T</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">IBaseService</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> M baseMapper;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">save</span><span class=\"params\">(T entity)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        baseMapper.insert(entity);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> entity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Transactional(rollbackFor = RuntimeException.class)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span> </span>&#123;</span><br><span class=\"line\">        Integer size = entityList.size();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (T entity : entityList) &#123;</span><br><span class=\"line\">            baseMapper.insert(entity);</span><br><span class=\"line\">            size++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size == entityList.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> rs = baseMapper.updateById(entity);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (rs &gt; <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.insert(entity) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity, Wrapper&lt;T&gt; updateWrapper)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Transactional(rollbackFor = RuntimeException.class)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (T entity : entityList) &#123;</span><br><span class=\"line\">            saveOrUpdate(entity);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.delete(queryWrapper) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeById</span><span class=\"params\">(Serializable id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.deleteById(id) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.deleteByMap(columnMap) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.deleteBatchIds(idList) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectList(<span class=\"keyword\">new</span> QueryWrapper&lt;T&gt;());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectList(searchModel.getQueryModel());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;T&gt; <span class=\"title\">listByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectBatchIds(idList);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;T&gt; <span class=\"title\">listByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectByMap(columnMap);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IPage&lt;T&gt; <span class=\"title\">page</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectPage(searchModel.getPage(), searchModel.getQueryModel());</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">selectById</span><span class=\"params\">(Serializable id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectById(id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">selectOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectOne(queryWrapper);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>MP实现了mapper层基础的CRUD方法，这里把一些常用的service层的方法整理了一下，又减少了一些代码量</p>\n<p> <a href=\"https://github.com/lizeze/mp-search\">代码地址</a></p>\n<p> <a href=\"https://github.com/lizeze/mp-demo\">使用示例</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>mybatis-plus简称MP是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>\n</blockquote>\n<p>这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus<a href=\"https://mybatis.plus/\">官网</a> 。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。</p>\n<p>下面是在<code>MP</code>为基础封装了一个查询类，实现了如果需要增加查询条件只需在前端修改即可。             </p>\n<h1 id=\"查询工具\"><a href=\"#查询工具\" class=\"headerlink\" title=\"查询工具\"></a>查询工具</h1><ul>\n<li>SearchModel<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SearchModel</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer pageIndex;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer pageSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Field&gt; fields;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String orderField;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> isAsc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IPage&lt;T&gt; <span class=\"title\">getPage</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        IPage&lt;T&gt; page = <span class=\"keyword\">new</span> Page&lt;&gt;(pageIndex, pageSize);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!StringUtil.isEmptyOrNull(orderField)) &#123;</span><br><span class=\"line\">            OrderItem orderItem = <span class=\"keyword\">new</span> OrderItem();</span><br><span class=\"line\">            orderItem.setAsc(isAsc);</span><br><span class=\"line\">            orderItem.setColumn(orderField);</span><br><span class=\"line\">            page.orders().add(orderItem);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> page;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> QueryWrapper&lt;T&gt; <span class=\"title\">getQueryModel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        QueryWrapper&lt;T&gt; queryWrapper = <span class=\"keyword\">new</span> QueryWrapper&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Iterator iter = <span class=\"keyword\">this</span>.fields.iterator(); iter.hasNext(); ) &#123;</span><br><span class=\"line\">            Field field = (Field) iter.next();</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (field.getQueryMethod()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> eq:</span><br><span class=\"line\">                    queryWrapper.eq(<span class=\"keyword\">true</span>, field.getName(), field.getValue());</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> like:</span><br><span class=\"line\">                    queryWrapper.like(<span class=\"keyword\">true</span>, field.getName(), field.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!StringUtil.isEmptyOrNull(orderField)) &#123;</span><br><span class=\"line\">            queryWrapper.orderBy(<span class=\"keyword\">true</span>, isAsc, orderField);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> queryWrapper;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>Field<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Field</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Field</span><span class=\"params\">(String name, Object value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.queryMethod = QueryMethod.eq;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Field</span><span class=\"params\">(String name, Object value, QueryMethod queryMethod)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.queryMethod = queryMethod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Object value;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> QueryMethod queryMethod;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>QueryMethod<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">enum</span> <span class=\"title\">QueryMethod</span> </span>&#123;</span><br><span class=\"line\">    eq, like</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"调用示例\"><a href=\"#调用示例\" class=\"headerlink\" title=\"调用示例\"></a>调用示例</h2></li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"attr\">&quot;fields&quot;</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;value&quot;</span>: <span class=\"string\">&quot;v&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;project_code&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;queryMethod&quot;</span>: <span class=\"string\">&quot;eq&quot;</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;type&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;queryMethod&quot;</span>: <span class=\"string\">&quot;like&quot;</span>,</span><br><span class=\"line\">           <span class=\"attr\">&quot;value&quot;</span>: <span class=\"string\">&quot;b&quot;</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;id&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;queryMethod&quot;</span>: <span class=\"string\">&quot;like&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;value&quot;</span>: <span class=\"string\">&quot;a&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">],</span><br><span class=\"line\"><span class=\"attr\">&quot;pageIndex&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\"><span class=\"attr\">&quot;pageSize&quot;</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\"><span class=\"attr\">&quot;orderField&quot;</span>: <span class=\"string\">&quot;type&quot;</span>,</span><br><span class=\"line\"><span class=\"attr\">&quot;isAsc&quot;</span>: <span class=\"string\">&quot;false&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在api中传入上面的json对象即可完成一个查询服务,查询条件通过前端传入的字段控制</p>\n<h1 id=\"BaseService\"><a href=\"#BaseService\" class=\"headerlink\" title=\"BaseService\"></a>BaseService</h1><ul>\n<li><p>IBaseService</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IBaseService</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">T <span class=\"title\">save</span><span class=\"params\">(T entity)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// TableId 注解存在更新记录，否插入一条记录</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据updateWrapper尝试更新，否继续执行saveOrUpdate(T)方法</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity, Wrapper&lt;T&gt; updateWrapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 批量修改插入</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据 entity 条件，删除记录</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据 ID 删除</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 根据 columnMap 条件，删除记录</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 删除（根据ID 批量删除）</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查询列表</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查询（根据ID 批量查询）</span></span><br><span class=\"line\">    <span class=\"function\">Collection&lt;T&gt; <span class=\"title\">listByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查询（根据 columnMap 条件）</span></span><br><span class=\"line\">    <span class=\"function\">Collection&lt;T&gt; <span class=\"title\">listByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 翻页查询</span></span><br><span class=\"line\">    <span class=\"function\">IPage&lt;T&gt; <span class=\"title\">page</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">T <span class=\"title\">selectById</span><span class=\"params\">(Serializable id)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">T <span class=\"title\">selectOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n<li><p>BaseServiceImpl</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseServiceImpl</span>&lt;<span class=\"title\">M</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">T</span>&gt;, <span class=\"title\">T</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">IBaseService</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> M baseMapper;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">save</span><span class=\"params\">(T entity)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        baseMapper.insert(entity);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> entity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Transactional(rollbackFor = RuntimeException.class)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span> </span>&#123;</span><br><span class=\"line\">        Integer size = entityList.size();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (T entity : entityList) &#123;</span><br><span class=\"line\">            baseMapper.insert(entity);</span><br><span class=\"line\">            size++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size == entityList.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> rs = baseMapper.updateById(entity);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (rs &gt; <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.insert(entity) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdate</span><span class=\"params\">(T entity, Wrapper&lt;T&gt; updateWrapper)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Transactional(rollbackFor = RuntimeException.class)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (T entity : entityList) &#123;</span><br><span class=\"line\">            saveOrUpdate(entity);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.delete(queryWrapper) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeById</span><span class=\"params\">(Serializable id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.deleteById(id) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.deleteByMap(columnMap) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.deleteBatchIds(idList) &gt; <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectList(<span class=\"keyword\">new</span> QueryWrapper&lt;T&gt;());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;T&gt; <span class=\"title\">list</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectList(searchModel.getQueryModel());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;T&gt; <span class=\"title\">listByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectBatchIds(idList);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Collection&lt;T&gt; <span class=\"title\">listByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectByMap(columnMap);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IPage&lt;T&gt; <span class=\"title\">page</span><span class=\"params\">(SearchModel&lt;T&gt; searchModel)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectPage(searchModel.getPage(), searchModel.getQueryModel());</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">selectById</span><span class=\"params\">(Serializable id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectById(id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">selectOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> baseMapper.selectOne(queryWrapper);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>MP实现了mapper层基础的CRUD方法，这里把一些常用的service层的方法整理了一下，又减少了一些代码量</p>\n<p> <a href=\"https://github.com/lizeze/mp-search\">代码地址</a></p>\n<p> <a href=\"https://github.com/lizeze/mp-demo\">使用示例</a></p>\n"},{"title":"api自动增加前缀","abbrlink":"2494396d","date":"2021-09-10T13:45:52.000Z","_content":"* AutoPrefixUrlMapping.java\n```java\npublic class AutoPrefixUrlMapping extends RequestMappingHandlerMapping {\n\n    @Value(\"${api-package}\")\n    private String apiPackagePath;\n\n    @Override\n    protected RequestMappingInfo getMappingForMethod(Method method, Class<?> handlerType) {\n        RequestMappingInfo mappingInfo =  super.getMappingForMethod(method, handlerType);\n        if(mappingInfo != null){\n            String prefix = this.getPrefix(handlerType);\n            return RequestMappingInfo.paths(prefix).build().combine(mappingInfo);\n        }\n        return mappingInfo;\n    }\n\n    private String getPrefix(Class<?> handlerType){\n        String packageName = handlerType.getPackage().getName();\n        String dotPath = packageName.replaceAll(this.apiPackagePath,\"\");\n        return dotPath.replace(\".\", \"/\");\n    }\n}\n``` \n\n* AutoPrefixConfiguration.java\n```java\n\n@Configuration\npublic class AutoPrefixConfiguration implements WebMvcRegistrations {\n\n    @Override\n    public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {\n        return new AutoPrefixUrlMapping();\n    }\n}\n```\n\n\n* application.yml\n\n```yml\n  api-package: com.example.demo\n```\n* DemoController\n\n```java\n@RestController\n@RequestMapping(\"/demo\")\npublic class DemoController {\n\n    @GetMapping(\"/a\")\n    public ResponseEntity getUser() {\n        return ResponseEntity.status(HttpStatus.OK).body(\"22\");\n    }\n\n```\n *  目录结构\n \n{% asset_img api.png 目录结构 %}\n请求地址:http://localhost:8080/api/demo/a","source":"_posts/java/api自动增加前缀.md","raw":"---\ntitle: api自动增加前缀\ntags:\n  - java\n  - springboot\ncategories: Java\nabbrlink: 2494396d\ndate: 2021-09-10 21:45:52\n---\n* AutoPrefixUrlMapping.java\n```java\npublic class AutoPrefixUrlMapping extends RequestMappingHandlerMapping {\n\n    @Value(\"${api-package}\")\n    private String apiPackagePath;\n\n    @Override\n    protected RequestMappingInfo getMappingForMethod(Method method, Class<?> handlerType) {\n        RequestMappingInfo mappingInfo =  super.getMappingForMethod(method, handlerType);\n        if(mappingInfo != null){\n            String prefix = this.getPrefix(handlerType);\n            return RequestMappingInfo.paths(prefix).build().combine(mappingInfo);\n        }\n        return mappingInfo;\n    }\n\n    private String getPrefix(Class<?> handlerType){\n        String packageName = handlerType.getPackage().getName();\n        String dotPath = packageName.replaceAll(this.apiPackagePath,\"\");\n        return dotPath.replace(\".\", \"/\");\n    }\n}\n``` \n\n* AutoPrefixConfiguration.java\n```java\n\n@Configuration\npublic class AutoPrefixConfiguration implements WebMvcRegistrations {\n\n    @Override\n    public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {\n        return new AutoPrefixUrlMapping();\n    }\n}\n```\n\n\n* application.yml\n\n```yml\n  api-package: com.example.demo\n```\n* DemoController\n\n```java\n@RestController\n@RequestMapping(\"/demo\")\npublic class DemoController {\n\n    @GetMapping(\"/a\")\n    public ResponseEntity getUser() {\n        return ResponseEntity.status(HttpStatus.OK).body(\"22\");\n    }\n\n```\n *  目录结构\n \n{% asset_img api.png 目录结构 %}\n请求地址:http://localhost:8080/api/demo/a","slug":"java/api自动增加前缀","published":1,"updated":"2021-09-16T08:48:58.103Z","_id":"cktmoybk9000lkotrbmx6109f","comments":1,"layout":"post","photos":[],"link":"","content":"<ul>\n<li><p>AutoPrefixUrlMapping.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AutoPrefixUrlMapping</span> <span class=\"keyword\">extends</span> <span class=\"title\">RequestMappingHandlerMapping</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;api-package&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String apiPackagePath;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> RequestMappingInfo <span class=\"title\">getMappingForMethod</span><span class=\"params\">(Method method, Class&lt;?&gt; handlerType)</span> </span>&#123;</span><br><span class=\"line\">        RequestMappingInfo mappingInfo =  <span class=\"keyword\">super</span>.getMappingForMethod(method, handlerType);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mappingInfo != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            String prefix = <span class=\"keyword\">this</span>.getPrefix(handlerType);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> RequestMappingInfo.paths(prefix).build().combine(mappingInfo);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mappingInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">getPrefix</span><span class=\"params\">(Class&lt;?&gt; handlerType)</span></span>&#123;</span><br><span class=\"line\">        String packageName = handlerType.getPackage().getName();</span><br><span class=\"line\">        String dotPath = packageName.replaceAll(<span class=\"keyword\">this</span>.apiPackagePath,<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dotPath.replace(<span class=\"string\">&quot;.&quot;</span>, <span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>AutoPrefixConfiguration.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AutoPrefixConfiguration</span> <span class=\"keyword\">implements</span> <span class=\"title\">WebMvcRegistrations</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> RequestMappingHandlerMapping <span class=\"title\">getRequestMappingHandlerMapping</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AutoPrefixUrlMapping();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<ul>\n<li>application.yml</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">api-package:</span> <span class=\"string\">com.example.demo</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>DemoController</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(&quot;/demo&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/a&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">getUser</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.OK).body(<span class=\"string\">&quot;22&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li> 目录结构</li>\n</ul>\n<img src=\"/article/2494396d/api.png\" class=\"\" title=\"目录结构\">\n<p>请求地址:<a href=\"http://localhost:8080/api/demo/a\">http://localhost:8080/api/demo/a</a></p>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>AutoPrefixUrlMapping.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AutoPrefixUrlMapping</span> <span class=\"keyword\">extends</span> <span class=\"title\">RequestMappingHandlerMapping</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;api-package&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String apiPackagePath;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> RequestMappingInfo <span class=\"title\">getMappingForMethod</span><span class=\"params\">(Method method, Class&lt;?&gt; handlerType)</span> </span>&#123;</span><br><span class=\"line\">        RequestMappingInfo mappingInfo =  <span class=\"keyword\">super</span>.getMappingForMethod(method, handlerType);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mappingInfo != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            String prefix = <span class=\"keyword\">this</span>.getPrefix(handlerType);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> RequestMappingInfo.paths(prefix).build().combine(mappingInfo);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mappingInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">getPrefix</span><span class=\"params\">(Class&lt;?&gt; handlerType)</span></span>&#123;</span><br><span class=\"line\">        String packageName = handlerType.getPackage().getName();</span><br><span class=\"line\">        String dotPath = packageName.replaceAll(<span class=\"keyword\">this</span>.apiPackagePath,<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dotPath.replace(<span class=\"string\">&quot;.&quot;</span>, <span class=\"string\">&quot;/&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>AutoPrefixConfiguration.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AutoPrefixConfiguration</span> <span class=\"keyword\">implements</span> <span class=\"title\">WebMvcRegistrations</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> RequestMappingHandlerMapping <span class=\"title\">getRequestMappingHandlerMapping</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AutoPrefixUrlMapping();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<ul>\n<li>application.yml</li>\n</ul>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">api-package:</span> <span class=\"string\">com.example.demo</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>DemoController</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(&quot;/demo&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/a&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">getUser</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ResponseEntity.status(HttpStatus.OK).body(<span class=\"string\">&quot;22&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li> 目录结构</li>\n</ul>\n<img src=\"/article/2494396d/api.png\" class=\"\" title=\"目录结构\">\n<p>请求地址:<a href=\"http://localhost:8080/api/demo/a\">http://localhost:8080/api/demo/a</a></p>\n"},{"title":"java设置使用代理","abbrlink":"dc9ca875","date":"2021-09-12T04:56:06.000Z","_content":"\n```java\n        System.setProperty(\"proxySet\", \"true\");\n        System.setProperty(\"socksProxyHost\", \"10.194.69.85\");\n        System.setProperty(\"socksProxyPort\", \"10086\");\n```","source":"_posts/java/java设置使用代理.md","raw":"---\ntitle: java设置使用代理\ntags: java\ncategories: Java\nabbrlink: dc9ca875\ndate: 2021-09-12 12:56:06\n---\n\n```java\n        System.setProperty(\"proxySet\", \"true\");\n        System.setProperty(\"socksProxyHost\", \"10.194.69.85\");\n        System.setProperty(\"socksProxyPort\", \"10086\");\n```","slug":"java/java设置使用代理","published":1,"updated":"2021-09-16T08:48:58.105Z","_id":"cktmoybka000pkotrcp1cc0uw","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.setProperty(<span class=\"string\">&quot;proxySet&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);</span><br><span class=\"line\">System.setProperty(<span class=\"string\">&quot;socksProxyHost&quot;</span>, <span class=\"string\">&quot;10.194.69.85&quot;</span>);</span><br><span class=\"line\">System.setProperty(<span class=\"string\">&quot;socksProxyPort&quot;</span>, <span class=\"string\">&quot;10086&quot;</span>);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.setProperty(<span class=\"string\">&quot;proxySet&quot;</span>, <span class=\"string\">&quot;true&quot;</span>);</span><br><span class=\"line\">System.setProperty(<span class=\"string\">&quot;socksProxyHost&quot;</span>, <span class=\"string\">&quot;10.194.69.85&quot;</span>);</span><br><span class=\"line\">System.setProperty(<span class=\"string\">&quot;socksProxyPort&quot;</span>, <span class=\"string\">&quot;10086&quot;</span>);</span><br></pre></td></tr></table></figure>"},{"title":"发布jar包到maven中央仓库（2021最新）","abbrlink":"7d888e25","date":"2021-09-10T13:11:00.000Z","_content":"# 配置环境\n  ## 安装`java`环境\n\n  ```\n  链接：https://pan.baidu.com/s/1o-wFA-m33JQs-sQJ-DgRaQ \n  提取码：ux7j\n  ```\n下载到服务器之后解压到指定位置\n\n```shell\n\n$ mkdir /usr/java\n$ tar xzf jdk-8u301-linux-x64.tar.gz  -C /usr/java\n$ vim /etc/profile\n```\n写入下面的内容\n```\nexport JAVA_HOME=/usr/java/jdk1.8.0_301\nexport CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib\nexport PATH=$JAVA_HOME/bin:$PATH\n```\n保存退出\n执行`source /etc/profile`使配置文件生效。\n\n验证是否安装成功\n```\n $ java -version\n   java version \"1.8.0_301\"\n   Java(TM) SE Runtime Environment (build 1.8.0_301-b09)\n   Java HotSpot(TM) 64-Bit Server VM (build 25.301-b09, mixed mode)\n```\n看到这个就表示安装成功了。\n\n##  安装`maven`\n```\n$ mkdir /usr/mvn\n$ cd /usr/mvn\n$ wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.tar.gz\n$ tar -zxvf apache-maven-3.8.1-bin.tar.gz\n$ vim /etc/profile\n```\n写入下面内容\n```\nexport MAVEN_HOME=/usr/mvn/apache-maven-3.8.1\n\nexport PATH=$PATH:$MAVEN_HOME/bin\n\n```\n保存退出\n执行`source /etc/profile`使配置文件生效。\n\n验证是否安装成功\n```\n $ mvn -version\n Maven home: /usr/mvn/apache-maven-3.8.1\n Java version: 1.8.0_301, vendor: Oracle Corporation, runtime: /usr/java/jdk1.8.0_301/jre\n Default locale: en_US, platform encoding: UTF-8\n OS name: \"linux\", version: \"4.18.0-240.10.1.el8_3.x86_64\", arch: \"amd64\", family: \"unix\"\n```\n# 其他工具\n\n```\n$ yum install git gpg -y\n```\n如果已经安装可以跳过这步\n# 注册`sonatype`账号\n\n [点击](https://issues.sonatype.org/secure/Signup!default.jspa) 注册一个新的账户。\n\n 登录之后新建一个`issues`\n ![在这里插入图片描述](https://img-blog.csdnimg.cn/34d16e165bc64fcb8b95b59845e69ba6.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n 按要求填写就可以了，主要说一个`Group Id`\n 如果你的代码时托管在`Github`上的，那么写`Group Id`的时候就不能写\n `com.github.xxx`了,我使用`io`开头，详情在[这里](https://central.sonatype.org/changelog/#2021-04-01-comgithub-is-not-supported-anymore-as-a-valid-coordinate)\n\n 创建完成之后会跳转到这个连接`https://issues.sonatype.org/browse/OSSRH-xxxx`,当看到这个连接之后，你要在你的`Github`上创建一个仓库，来证明你是这个`Github`的主人，仓库的名字就是连接里的`OSSRH-xxxx`。\n\n 创建后的仓库连接为`https://github.com/yourgithubname/OSSRH-xxxx`,然后在帖子下面留言告诉管理员这个仓库你已经创建好了名字为`OSSRH-xxxx`的仓库,这样可以省去他让你证明你是这个账户的拥有者，提高效率。等到管理员回复之后就可以上传`jar`包了。\n\n 下面是管理员的回复，看到这个就表示完成了。\n\n ```\nio.github.xxx has been prepared, now user(s) youname can:\nPublish snapshot and release artifacts to s01.oss.sonatype.org\nHave a look at this section of our official guide for deployment instructions:\nhttps://central.sonatype.org/publish/publish-guide/#deployment\n\nDepending on your build configuration, your first component(s) might be released automatically after a successful deployment.\nIf that happens, you will see a comment on this ticket confirming that your artifact has synced to Maven Central.\nIf you do not see this comment within an hour or two, you can follow the steps in this section of our guide:\nhttps://central.sonatype.org/publish/release/\n\n######\n\nAs part of our efforts to improve the security and quality posture of the open source supply chain,\nwe plan to enable additional scanning of dependencies for security alerts soon. Since you're already\nhosting your source code in Github, you can get these insights today by enabling Sonatype Lift.\nSonatype Lift is free forever on public repositories! Lift tells you about open source vulnerabilities\nduring code review, and goes beyond open source to scan your code for both code quality and security issues,\nproviding feedback right in your pull requests.\nMore information can be found at https://links.sonatype.com/products/lift/github-integration\n\n######\n ```\n\n #  发布前的准备\n\n  ## 修改`pom`文件\n  ```xml\n\n    <groupId>io.github.xxxx</groupId>\n    <artifactId>xxxx</artifactId>\n    <version>1.0.0</version>\n    <name>xxx</name>\n    <url>xxxx</url>\n    <description>xxxxx</description>\n    <distributionManagement>\n        <snapshotRepository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/content/repositories/snapshots</url>\n        </snapshotRepository>\n        <repository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n        </repository>\n    </distributionManagement>\n    <build>\n        <plugins>\n\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.1</version>\n                <configuration>\n                    <source>1.8</source>\n                    <target>1.8</target>\n                </configuration>\n            </plugin>\n            <!-- Source -->\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-source-plugin</artifactId>\n                <version>2.2.1</version>\n                <executions>\n                    <execution>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>jar-no-fork</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <!-- Javadoc -->\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-javadoc-plugin</artifactId>\n                <version>2.9.1</version>\n                <configuration>\n                    <additionalparam>-Xdoclint:none</additionalparam>\n                </configuration>\n                <executions>\n                    <execution>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>jar</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <!-- GPG mvn clean deploy -P release -Dgpg.passphrase=YourPassphase -->\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-gpg-plugin</artifactId>\n                <version>1.5</version>\n                <executions>\n                    <execution>\n                        <id>sign-artifacts</id>\n                        <phase>verify</phase>\n                        <goals>\n                            <goal>sign</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n\n    <licenses>\n        <license>\n            <name>MIT License</name>\n            <url>https://github.com/xxx/xxx/xxxxxx/master/LICENSE</url>\n            <distribution>repo,manual</distribution>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <name>xxx</name>\n            <email>xxxx</email>\n            <url>xxxx</url>\n        </developer>\n    </developers>\n    <scm>\n        <connection>scm:git:https://github.com/xxx/xxxx.git</connection>\n        <developerConnection>scm:git:https://github.com/xxxx/xxxx.git</developerConnection>\n        <url>https://github.com/xxxx/xxxxx</url>\n        <tag>0.0.1</tag>\n    </scm>\n  ```\n只需修改和自己相关的内容即可，文中用`xxxx`表示，其他的不需要修改\n\n`Group Id`一定要和申请的保持一致\n\n## 上传`gpg key`\n\n ```shell\n $  gpg generate-key\n # 按照提示输入用户名和邮箱，最后会输入一个密码，记住这个密码下面会用 \n ```\n\n  ### 将公钥发送到PGP密钥服务器\n\n ```shell\n $   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E\n ```\n 返回结果\n\n```shell\ngpg: 将密钥‘14F722543E7D2C1E’上传到 hkp://keyserver.ubuntu.com:11371\n```\n验证是否上传成功\n\n```shell\n$   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E\n```\n返回结果\n```shell\ngpg: 密钥 14F722543E7D2C1E：“houbb <XXX@XX.com>”未改变\ngpg: 合计被处理的数量：1\ngpg:           未改变：1\n```\n\n## `setting.xml`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<settings xmlns=\"http://maven.apache.org/SETTINGS/1.2.0\"\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd\">\n  <servers>\n    <server>\n      <id>ossrh</id>\n      <username>sonatype账号</username>\n      <password>sonatype密码</password>\n    </server>\n  </servers>\n  <profiles>\n   <profile>\n      <id>ossrh</id>\n      <activation>\n        <activeByDefault>true</activeByDefault>\n      </activation>\n      <properties>\n        <gpg.executable>gpg2</gpg.executable>\n        <gpg.passphrase>gpg公钥的密码</gpg.passphrase>\n      </properties>\n    </profile>\n  </profiles>\n</settings>\n```\n注意判断`mvn`使用的`setting.xml`是哪里的，一般在`mvn`主目录下的`conf`文件夹和用户目录下的`.m2`文件夹\n# 上传程序\n\n在项目根目录下执行\n\n```shell\n$ mvn clean deploy\n```\n稍等片刻会出现一个窗口，输入`gpg`的密码\n\n![看到这个表示发布成功](https://img-blog.csdnimg.cn/3432ac48ec174e53990e7a3296fdb385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n 看到这个表示已经上传成功了。\n\n 上传成功之后登录到`https://s01.oss.sonatype.org/`,账号就是一开始注册的sonatype账号。\n\n 登录之后会点击`Staging Repositories`会看到这个页面，选中记录点击`close`,成功之后点击`Release`。\n\n 到这步就已经大功告成了,稍等片刻就可以在这里看到上传的包了\n \n 比如 `Group Id`是`io.github.xxx`\n \n  `artifactId`是`tool`\n  \n   `version`是`1.0.0`,\n \n 查看地址就是`https://repo.maven.apache.org/maven2/io/github/xxx/tool/1.0.0`\n\n 如果上面这个连接可以查到，就已经可以在项目中使用了。同步到中央仓库的时间不太确定。\n\n发布成功之后去帖子上回复一下，告诉管理员发布成功了。\n\n\n ![在这里插入图片描述](https://img-blog.csdnimg.cn/689a5fa7f23b4d76890e46a39b577421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n\n# 遇到的问题\n\n  * 执行`mvn deploy`的时候总是返回`401` 错误，找了各种办法都不能解决，重新注册了个账户就可以了，不知道是为什么。\n\n  * `repository`地址已经改变了，现在网上大部分的文章都是旧的，新的是这样的\n  ```xml\n    <distributionManagement>\n        <snapshotRepository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/content/repositories/snapshots</url>\n        </snapshotRepository>\n        <repository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n        </repository>\n    </distributionManagement>\n  ```\n[官方文档](https://central.sonatype.org/publish/publish-maven/)有最新的配置信息，遇到问题之后还是要先查官方文档\n\n * 在`centos`发布时报错\n `Failed to execute goal org.apache.maven.plugins:maven-gpg-plugin:1.6:sign`\n\n   [解决方法](https://blog.csdn.net/li5672/article/details/119564796)","source":"_posts/java/发布jar包到maven中央仓库（2021最新).md","raw":"---\ntitle: 发布jar包到maven中央仓库（2021最新）\ntags:\n  - java\n  - maven\n  - gpg\ncategories: 工具\nabbrlink: 7d888e25\ndate: 2021-09-10 21:11:00\n---\n# 配置环境\n  ## 安装`java`环境\n\n  ```\n  链接：https://pan.baidu.com/s/1o-wFA-m33JQs-sQJ-DgRaQ \n  提取码：ux7j\n  ```\n下载到服务器之后解压到指定位置\n\n```shell\n\n$ mkdir /usr/java\n$ tar xzf jdk-8u301-linux-x64.tar.gz  -C /usr/java\n$ vim /etc/profile\n```\n写入下面的内容\n```\nexport JAVA_HOME=/usr/java/jdk1.8.0_301\nexport CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib\nexport PATH=$JAVA_HOME/bin:$PATH\n```\n保存退出\n执行`source /etc/profile`使配置文件生效。\n\n验证是否安装成功\n```\n $ java -version\n   java version \"1.8.0_301\"\n   Java(TM) SE Runtime Environment (build 1.8.0_301-b09)\n   Java HotSpot(TM) 64-Bit Server VM (build 25.301-b09, mixed mode)\n```\n看到这个就表示安装成功了。\n\n##  安装`maven`\n```\n$ mkdir /usr/mvn\n$ cd /usr/mvn\n$ wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.tar.gz\n$ tar -zxvf apache-maven-3.8.1-bin.tar.gz\n$ vim /etc/profile\n```\n写入下面内容\n```\nexport MAVEN_HOME=/usr/mvn/apache-maven-3.8.1\n\nexport PATH=$PATH:$MAVEN_HOME/bin\n\n```\n保存退出\n执行`source /etc/profile`使配置文件生效。\n\n验证是否安装成功\n```\n $ mvn -version\n Maven home: /usr/mvn/apache-maven-3.8.1\n Java version: 1.8.0_301, vendor: Oracle Corporation, runtime: /usr/java/jdk1.8.0_301/jre\n Default locale: en_US, platform encoding: UTF-8\n OS name: \"linux\", version: \"4.18.0-240.10.1.el8_3.x86_64\", arch: \"amd64\", family: \"unix\"\n```\n# 其他工具\n\n```\n$ yum install git gpg -y\n```\n如果已经安装可以跳过这步\n# 注册`sonatype`账号\n\n [点击](https://issues.sonatype.org/secure/Signup!default.jspa) 注册一个新的账户。\n\n 登录之后新建一个`issues`\n ![在这里插入图片描述](https://img-blog.csdnimg.cn/34d16e165bc64fcb8b95b59845e69ba6.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n 按要求填写就可以了，主要说一个`Group Id`\n 如果你的代码时托管在`Github`上的，那么写`Group Id`的时候就不能写\n `com.github.xxx`了,我使用`io`开头，详情在[这里](https://central.sonatype.org/changelog/#2021-04-01-comgithub-is-not-supported-anymore-as-a-valid-coordinate)\n\n 创建完成之后会跳转到这个连接`https://issues.sonatype.org/browse/OSSRH-xxxx`,当看到这个连接之后，你要在你的`Github`上创建一个仓库，来证明你是这个`Github`的主人，仓库的名字就是连接里的`OSSRH-xxxx`。\n\n 创建后的仓库连接为`https://github.com/yourgithubname/OSSRH-xxxx`,然后在帖子下面留言告诉管理员这个仓库你已经创建好了名字为`OSSRH-xxxx`的仓库,这样可以省去他让你证明你是这个账户的拥有者，提高效率。等到管理员回复之后就可以上传`jar`包了。\n\n 下面是管理员的回复，看到这个就表示完成了。\n\n ```\nio.github.xxx has been prepared, now user(s) youname can:\nPublish snapshot and release artifacts to s01.oss.sonatype.org\nHave a look at this section of our official guide for deployment instructions:\nhttps://central.sonatype.org/publish/publish-guide/#deployment\n\nDepending on your build configuration, your first component(s) might be released automatically after a successful deployment.\nIf that happens, you will see a comment on this ticket confirming that your artifact has synced to Maven Central.\nIf you do not see this comment within an hour or two, you can follow the steps in this section of our guide:\nhttps://central.sonatype.org/publish/release/\n\n######\n\nAs part of our efforts to improve the security and quality posture of the open source supply chain,\nwe plan to enable additional scanning of dependencies for security alerts soon. Since you're already\nhosting your source code in Github, you can get these insights today by enabling Sonatype Lift.\nSonatype Lift is free forever on public repositories! Lift tells you about open source vulnerabilities\nduring code review, and goes beyond open source to scan your code for both code quality and security issues,\nproviding feedback right in your pull requests.\nMore information can be found at https://links.sonatype.com/products/lift/github-integration\n\n######\n ```\n\n #  发布前的准备\n\n  ## 修改`pom`文件\n  ```xml\n\n    <groupId>io.github.xxxx</groupId>\n    <artifactId>xxxx</artifactId>\n    <version>1.0.0</version>\n    <name>xxx</name>\n    <url>xxxx</url>\n    <description>xxxxx</description>\n    <distributionManagement>\n        <snapshotRepository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/content/repositories/snapshots</url>\n        </snapshotRepository>\n        <repository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n        </repository>\n    </distributionManagement>\n    <build>\n        <plugins>\n\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.1</version>\n                <configuration>\n                    <source>1.8</source>\n                    <target>1.8</target>\n                </configuration>\n            </plugin>\n            <!-- Source -->\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-source-plugin</artifactId>\n                <version>2.2.1</version>\n                <executions>\n                    <execution>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>jar-no-fork</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <!-- Javadoc -->\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-javadoc-plugin</artifactId>\n                <version>2.9.1</version>\n                <configuration>\n                    <additionalparam>-Xdoclint:none</additionalparam>\n                </configuration>\n                <executions>\n                    <execution>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>jar</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <!-- GPG mvn clean deploy -P release -Dgpg.passphrase=YourPassphase -->\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-gpg-plugin</artifactId>\n                <version>1.5</version>\n                <executions>\n                    <execution>\n                        <id>sign-artifacts</id>\n                        <phase>verify</phase>\n                        <goals>\n                            <goal>sign</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n\n    <licenses>\n        <license>\n            <name>MIT License</name>\n            <url>https://github.com/xxx/xxx/xxxxxx/master/LICENSE</url>\n            <distribution>repo,manual</distribution>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <name>xxx</name>\n            <email>xxxx</email>\n            <url>xxxx</url>\n        </developer>\n    </developers>\n    <scm>\n        <connection>scm:git:https://github.com/xxx/xxxx.git</connection>\n        <developerConnection>scm:git:https://github.com/xxxx/xxxx.git</developerConnection>\n        <url>https://github.com/xxxx/xxxxx</url>\n        <tag>0.0.1</tag>\n    </scm>\n  ```\n只需修改和自己相关的内容即可，文中用`xxxx`表示，其他的不需要修改\n\n`Group Id`一定要和申请的保持一致\n\n## 上传`gpg key`\n\n ```shell\n $  gpg generate-key\n # 按照提示输入用户名和邮箱，最后会输入一个密码，记住这个密码下面会用 \n ```\n\n  ### 将公钥发送到PGP密钥服务器\n\n ```shell\n $   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E\n ```\n 返回结果\n\n```shell\ngpg: 将密钥‘14F722543E7D2C1E’上传到 hkp://keyserver.ubuntu.com:11371\n```\n验证是否上传成功\n\n```shell\n$   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E\n```\n返回结果\n```shell\ngpg: 密钥 14F722543E7D2C1E：“houbb <XXX@XX.com>”未改变\ngpg: 合计被处理的数量：1\ngpg:           未改变：1\n```\n\n## `setting.xml`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<settings xmlns=\"http://maven.apache.org/SETTINGS/1.2.0\"\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd\">\n  <servers>\n    <server>\n      <id>ossrh</id>\n      <username>sonatype账号</username>\n      <password>sonatype密码</password>\n    </server>\n  </servers>\n  <profiles>\n   <profile>\n      <id>ossrh</id>\n      <activation>\n        <activeByDefault>true</activeByDefault>\n      </activation>\n      <properties>\n        <gpg.executable>gpg2</gpg.executable>\n        <gpg.passphrase>gpg公钥的密码</gpg.passphrase>\n      </properties>\n    </profile>\n  </profiles>\n</settings>\n```\n注意判断`mvn`使用的`setting.xml`是哪里的，一般在`mvn`主目录下的`conf`文件夹和用户目录下的`.m2`文件夹\n# 上传程序\n\n在项目根目录下执行\n\n```shell\n$ mvn clean deploy\n```\n稍等片刻会出现一个窗口，输入`gpg`的密码\n\n![看到这个表示发布成功](https://img-blog.csdnimg.cn/3432ac48ec174e53990e7a3296fdb385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n 看到这个表示已经上传成功了。\n\n 上传成功之后登录到`https://s01.oss.sonatype.org/`,账号就是一开始注册的sonatype账号。\n\n 登录之后会点击`Staging Repositories`会看到这个页面，选中记录点击`close`,成功之后点击`Release`。\n\n 到这步就已经大功告成了,稍等片刻就可以在这里看到上传的包了\n \n 比如 `Group Id`是`io.github.xxx`\n \n  `artifactId`是`tool`\n  \n   `version`是`1.0.0`,\n \n 查看地址就是`https://repo.maven.apache.org/maven2/io/github/xxx/tool/1.0.0`\n\n 如果上面这个连接可以查到，就已经可以在项目中使用了。同步到中央仓库的时间不太确定。\n\n发布成功之后去帖子上回复一下，告诉管理员发布成功了。\n\n\n ![在这里插入图片描述](https://img-blog.csdnimg.cn/689a5fa7f23b4d76890e46a39b577421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n\n# 遇到的问题\n\n  * 执行`mvn deploy`的时候总是返回`401` 错误，找了各种办法都不能解决，重新注册了个账户就可以了，不知道是为什么。\n\n  * `repository`地址已经改变了，现在网上大部分的文章都是旧的，新的是这样的\n  ```xml\n    <distributionManagement>\n        <snapshotRepository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/content/repositories/snapshots</url>\n        </snapshotRepository>\n        <repository>\n            <id>ossrh</id>\n            <url>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n        </repository>\n    </distributionManagement>\n  ```\n[官方文档](https://central.sonatype.org/publish/publish-maven/)有最新的配置信息，遇到问题之后还是要先查官方文档\n\n * 在`centos`发布时报错\n `Failed to execute goal org.apache.maven.plugins:maven-gpg-plugin:1.6:sign`\n\n   [解决方法](https://blog.csdn.net/li5672/article/details/119564796)","slug":"java/发布jar包到maven中央仓库（2021最新)","published":1,"updated":"2021-09-16T08:48:58.107Z","_id":"cktmoybkc000skotretym9qgn","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"配置环境\"><a href=\"#配置环境\" class=\"headerlink\" title=\"配置环境\"></a>配置环境</h1><h2 id=\"安装java环境\"><a href=\"#安装java环境\" class=\"headerlink\" title=\"安装java环境\"></a>安装<code>java</code>环境</h2>  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">链接：https://pan.baidu.com/s/1o-wFA-m33JQs-sQJ-DgRaQ </span><br><span class=\"line\">提取码：ux7j</span><br></pre></td></tr></table></figure>\n<p>下载到服务器之后解压到指定位置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir /usr/java</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> tar xzf jdk-8u301-linux-x64.tar.gz  -C /usr/java</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim /etc/profile</span></span><br></pre></td></tr></table></figure>\n<p>写入下面的内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME=/usr/java/jdk1.8.0_301</span><br><span class=\"line\">export CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib</span><br><span class=\"line\">export PATH=$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>\n<p>保存退出<br>执行<code>source /etc/profile</code>使配置文件生效。</p>\n<p>验证是否安装成功</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ java -version</span><br><span class=\"line\">  java version &quot;1.8.0_301&quot;</span><br><span class=\"line\">  Java(TM) SE Runtime Environment (build 1.8.0_301-b09)</span><br><span class=\"line\">  Java HotSpot(TM) 64-Bit Server VM (build 25.301-b09, mixed mode)</span><br></pre></td></tr></table></figure>\n<p>看到这个就表示安装成功了。</p>\n<h2 id=\"安装maven\"><a href=\"#安装maven\" class=\"headerlink\" title=\"安装maven\"></a>安装<code>maven</code></h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir /usr/mvn</span><br><span class=\"line\">$ cd /usr/mvn</span><br><span class=\"line\">$ wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.tar.gz</span><br><span class=\"line\">$ tar -zxvf apache-maven-3.8.1-bin.tar.gz</span><br><span class=\"line\">$ vim /etc/profile</span><br></pre></td></tr></table></figure>\n<p>写入下面内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export MAVEN_HOME=/usr/mvn/apache-maven-3.8.1</span><br><span class=\"line\"></span><br><span class=\"line\">export PATH=$PATH:$MAVEN_HOME/bin</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>保存退出<br>执行<code>source /etc/profile</code>使配置文件生效。</p>\n<p>验证是否安装成功</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mvn -version</span><br><span class=\"line\">Maven home: /usr/mvn/apache-maven-3.8.1</span><br><span class=\"line\">Java version: 1.8.0_301, vendor: Oracle Corporation, runtime: /usr/java/jdk1.8.0_301/jre</span><br><span class=\"line\">Default locale: en_US, platform encoding: UTF-8</span><br><span class=\"line\">OS name: &quot;linux&quot;, version: &quot;4.18.0-240.10.1.el8_3.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</span><br></pre></td></tr></table></figure>\n<h1 id=\"其他工具\"><a href=\"#其他工具\" class=\"headerlink\" title=\"其他工具\"></a>其他工具</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ yum install git gpg -y</span><br></pre></td></tr></table></figure>\n<p>如果已经安装可以跳过这步</p>\n<h1 id=\"注册sonatype账号\"><a href=\"#注册sonatype账号\" class=\"headerlink\" title=\"注册sonatype账号\"></a>注册<code>sonatype</code>账号</h1><p> <a href=\"https://issues.sonatype.org/secure/Signup!default.jspa\">点击</a> 注册一个新的账户。</p>\n<p> 登录之后新建一个<code>issues</code><br> <img src=\"https://img-blog.csdnimg.cn/34d16e165bc64fcb8b95b59845e69ba6.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p> 按要求填写就可以了，主要说一个<code>Group Id</code><br> 如果你的代码时托管在<code>Github</code>上的，那么写<code>Group Id</code>的时候就不能写<br> <code>com.github.xxx</code>了,我使用<code>io</code>开头，详情在<a href=\"https://central.sonatype.org/changelog/#2021-04-01-comgithub-is-not-supported-anymore-as-a-valid-coordinate\">这里</a></p>\n<p> 创建完成之后会跳转到这个连接<code>https://issues.sonatype.org/browse/OSSRH-xxxx</code>,当看到这个连接之后，你要在你的<code>Github</code>上创建一个仓库，来证明你是这个<code>Github</code>的主人，仓库的名字就是连接里的<code>OSSRH-xxxx</code>。</p>\n<p> 创建后的仓库连接为<code>https://github.com/yourgithubname/OSSRH-xxxx</code>,然后在帖子下面留言告诉管理员这个仓库你已经创建好了名字为<code>OSSRH-xxxx</code>的仓库,这样可以省去他让你证明你是这个账户的拥有者，提高效率。等到管理员回复之后就可以上传<code>jar</code>包了。</p>\n<p> 下面是管理员的回复，看到这个就表示完成了。</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">io.github.xxx has been prepared, now user(s) youname can:</span><br><span class=\"line\">Publish snapshot and release artifacts to s01.oss.sonatype.org</span><br><span class=\"line\">Have a look at this section of our official guide for deployment instructions:</span><br><span class=\"line\">https://central.sonatype.org/publish/publish-guide/#deployment</span><br><span class=\"line\"></span><br><span class=\"line\">Depending on your build configuration, your first component(s) might be released automatically after a successful deployment.</span><br><span class=\"line\">If that happens, you will see a comment on this ticket confirming that your artifact has synced to Maven Central.</span><br><span class=\"line\">If you do not see this comment within an hour or two, you can follow the steps in this section of our guide:</span><br><span class=\"line\">https://central.sonatype.org/publish/release/</span><br><span class=\"line\"></span><br><span class=\"line\">######</span><br><span class=\"line\"></span><br><span class=\"line\">As part of our efforts to improve the security and quality posture of the open source supply chain,</span><br><span class=\"line\">we plan to enable additional scanning of dependencies for security alerts soon. Since you&#x27;re already</span><br><span class=\"line\">hosting your source code in Github, you can get these insights today by enabling Sonatype Lift.</span><br><span class=\"line\">Sonatype Lift is free forever on public repositories! Lift tells you about open source vulnerabilities</span><br><span class=\"line\">during code review, and goes beyond open source to scan your code for both code quality and security issues,</span><br><span class=\"line\">providing feedback right in your pull requests.</span><br><span class=\"line\">More information can be found at https://links.sonatype.com/products/lift/github-integration</span><br><span class=\"line\"></span><br><span class=\"line\">######</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"发布前的准备\"><a href=\"#发布前的准备\" class=\"headerlink\" title=\"发布前的准备\"></a>发布前的准备</h1><h2 id=\"修改pom文件\"><a href=\"#修改pom文件\" class=\"headerlink\" title=\"修改pom文件\"></a>修改<code>pom</code>文件</h2>  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.github.xxxx<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>xxx<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>xxxxx<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">source</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- Source --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-source-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>package<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>jar-no-fork<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- Javadoc --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-javadoc-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">additionalparam</span>&gt;</span>-Xdoclint:none<span class=\"tag\">&lt;/<span class=\"name\">additionalparam</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>package<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- GPG mvn clean deploy -P release -Dgpg.passphrase=YourPassphase --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-gpg-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.5<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>sign-artifacts<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>verify<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>sign<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">licenses</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">license</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>MIT License<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://github.com/xxx/xxx/xxxxxx/master/LICENSE<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">distribution</span>&gt;</span>repo,manual<span class=\"tag\">&lt;/<span class=\"name\">distribution</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">license</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">licenses</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">developers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">developer</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>xxx<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">email</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">email</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">developer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">developers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">scm</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">connection</span>&gt;</span>scm:git:https://github.com/xxx/xxxx.git<span class=\"tag\">&lt;/<span class=\"name\">connection</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">developerConnection</span>&gt;</span>scm:git:https://github.com/xxxx/xxxx.git<span class=\"tag\">&lt;/<span class=\"name\">developerConnection</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://github.com/xxxx/xxxxx<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tag</span>&gt;</span>0.0.1<span class=\"tag\">&lt;/<span class=\"name\">tag</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">scm</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>只需修改和自己相关的内容即可，文中用<code>xxxx</code>表示，其他的不需要修改</p>\n<p><code>Group Id</code>一定要和申请的保持一致</p>\n<h2 id=\"上传gpg-key\"><a href=\"#上传gpg-key\" class=\"headerlink\" title=\"上传gpg key\"></a>上传<code>gpg key</code></h2> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  gpg generate-key</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 按照提示输入用户名和邮箱，最后会输入一个密码，记住这个密码下面会用</span> </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"将公钥发送到PGP密钥服务器\"><a href=\"#将公钥发送到PGP密钥服务器\" class=\"headerlink\" title=\"将公钥发送到PGP密钥服务器\"></a>将公钥发送到PGP密钥服务器</h3> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E</span></span><br></pre></td></tr></table></figure>\n<p> 返回结果</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gpg: 将密钥‘14F722543E7D2C1E’上传到 hkp://keyserver.ubuntu.com:11371</span><br></pre></td></tr></table></figure>\n<p>验证是否上传成功</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E</span></span><br></pre></td></tr></table></figure>\n<p>返回结果</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gpg: 密钥 14F722543E7D2C1E：“houbb &lt;XXX@XX.com&gt;”未改变</span><br><span class=\"line\">gpg: 合计被处理的数量：1</span><br><span class=\"line\">gpg:           未改变：1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"setting-xml\"><a href=\"#setting-xml\" class=\"headerlink\" title=\"setting.xml\"></a><code>setting.xml</code></h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">settings</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/SETTINGS/1.2.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>sonatype账号<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>sonatype密码<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servers</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">activeByDefault</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">activeByDefault</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">gpg.executable</span>&gt;</span>gpg2<span class=\"tag\">&lt;/<span class=\"name\">gpg.executable</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">gpg.passphrase</span>&gt;</span>gpg公钥的密码<span class=\"tag\">&lt;/<span class=\"name\">gpg.passphrase</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>注意判断<code>mvn</code>使用的<code>setting.xml</code>是哪里的，一般在<code>mvn</code>主目录下的<code>conf</code>文件夹和用户目录下的<code>.m2</code>文件夹</p>\n<h1 id=\"上传程序\"><a href=\"#上传程序\" class=\"headerlink\" title=\"上传程序\"></a>上传程序</h1><p>在项目根目录下执行</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mvn clean deploy</span></span><br></pre></td></tr></table></figure>\n<p>稍等片刻会出现一个窗口，输入<code>gpg</code>的密码</p>\n<p><img src=\"https://img-blog.csdnimg.cn/3432ac48ec174e53990e7a3296fdb385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"看到这个表示发布成功\"></p>\n<p> 看到这个表示已经上传成功了。</p>\n<p> 上传成功之后登录到<code>https://s01.oss.sonatype.org/</code>,账号就是一开始注册的sonatype账号。</p>\n<p> 登录之后会点击<code>Staging Repositories</code>会看到这个页面，选中记录点击<code>close</code>,成功之后点击<code>Release</code>。</p>\n<p> 到这步就已经大功告成了,稍等片刻就可以在这里看到上传的包了</p>\n<p> 比如 <code>Group Id</code>是<code>io.github.xxx</code></p>\n<p>  <code>artifactId</code>是<code>tool</code></p>\n<p>   <code>version</code>是<code>1.0.0</code>,</p>\n<p> 查看地址就是<code>https://repo.maven.apache.org/maven2/io/github/xxx/tool/1.0.0</code></p>\n<p> 如果上面这个连接可以查到，就已经可以在项目中使用了。同步到中央仓库的时间不太确定。</p>\n<p>发布成功之后去帖子上回复一下，告诉管理员发布成功了。</p>\n<p> <img src=\"https://img-blog.csdnimg.cn/689a5fa7f23b4d76890e46a39b577421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<h1 id=\"遇到的问题\"><a href=\"#遇到的问题\" class=\"headerlink\" title=\"遇到的问题\"></a>遇到的问题</h1><ul>\n<li><p>执行<code>mvn deploy</code>的时候总是返回<code>401</code> 错误，找了各种办法都不能解决，重新注册了个账户就可以了，不知道是为什么。</p>\n</li>\n<li><p><code>repository</code>地址已经改变了，现在网上大部分的文章都是旧的，新的是这样的</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://central.sonatype.org/publish/publish-maven/\">官方文档</a>有最新的配置信息，遇到问题之后还是要先查官方文档</p>\n</li>\n<li><p>在<code>centos</code>发布时报错<br><code>Failed to execute goal org.apache.maven.plugins:maven-gpg-plugin:1.6:sign</code></p>\n<p><a href=\"https://blog.csdn.net/li5672/article/details/119564796\">解决方法</a></p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"配置环境\"><a href=\"#配置环境\" class=\"headerlink\" title=\"配置环境\"></a>配置环境</h1><h2 id=\"安装java环境\"><a href=\"#安装java环境\" class=\"headerlink\" title=\"安装java环境\"></a>安装<code>java</code>环境</h2>  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">链接：https://pan.baidu.com/s/1o-wFA-m33JQs-sQJ-DgRaQ </span><br><span class=\"line\">提取码：ux7j</span><br></pre></td></tr></table></figure>\n<p>下载到服务器之后解压到指定位置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir /usr/java</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> tar xzf jdk-8u301-linux-x64.tar.gz  -C /usr/java</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim /etc/profile</span></span><br></pre></td></tr></table></figure>\n<p>写入下面的内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME=/usr/java/jdk1.8.0_301</span><br><span class=\"line\">export CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib</span><br><span class=\"line\">export PATH=$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>\n<p>保存退出<br>执行<code>source /etc/profile</code>使配置文件生效。</p>\n<p>验证是否安装成功</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ java -version</span><br><span class=\"line\">  java version &quot;1.8.0_301&quot;</span><br><span class=\"line\">  Java(TM) SE Runtime Environment (build 1.8.0_301-b09)</span><br><span class=\"line\">  Java HotSpot(TM) 64-Bit Server VM (build 25.301-b09, mixed mode)</span><br></pre></td></tr></table></figure>\n<p>看到这个就表示安装成功了。</p>\n<h2 id=\"安装maven\"><a href=\"#安装maven\" class=\"headerlink\" title=\"安装maven\"></a>安装<code>maven</code></h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir /usr/mvn</span><br><span class=\"line\">$ cd /usr/mvn</span><br><span class=\"line\">$ wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.tar.gz</span><br><span class=\"line\">$ tar -zxvf apache-maven-3.8.1-bin.tar.gz</span><br><span class=\"line\">$ vim /etc/profile</span><br></pre></td></tr></table></figure>\n<p>写入下面内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export MAVEN_HOME=/usr/mvn/apache-maven-3.8.1</span><br><span class=\"line\"></span><br><span class=\"line\">export PATH=$PATH:$MAVEN_HOME/bin</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>保存退出<br>执行<code>source /etc/profile</code>使配置文件生效。</p>\n<p>验证是否安装成功</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mvn -version</span><br><span class=\"line\">Maven home: /usr/mvn/apache-maven-3.8.1</span><br><span class=\"line\">Java version: 1.8.0_301, vendor: Oracle Corporation, runtime: /usr/java/jdk1.8.0_301/jre</span><br><span class=\"line\">Default locale: en_US, platform encoding: UTF-8</span><br><span class=\"line\">OS name: &quot;linux&quot;, version: &quot;4.18.0-240.10.1.el8_3.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</span><br></pre></td></tr></table></figure>\n<h1 id=\"其他工具\"><a href=\"#其他工具\" class=\"headerlink\" title=\"其他工具\"></a>其他工具</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ yum install git gpg -y</span><br></pre></td></tr></table></figure>\n<p>如果已经安装可以跳过这步</p>\n<h1 id=\"注册sonatype账号\"><a href=\"#注册sonatype账号\" class=\"headerlink\" title=\"注册sonatype账号\"></a>注册<code>sonatype</code>账号</h1><p> <a href=\"https://issues.sonatype.org/secure/Signup!default.jspa\">点击</a> 注册一个新的账户。</p>\n<p> 登录之后新建一个<code>issues</code><br> <img src=\"https://img-blog.csdnimg.cn/34d16e165bc64fcb8b95b59845e69ba6.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p> 按要求填写就可以了，主要说一个<code>Group Id</code><br> 如果你的代码时托管在<code>Github</code>上的，那么写<code>Group Id</code>的时候就不能写<br> <code>com.github.xxx</code>了,我使用<code>io</code>开头，详情在<a href=\"https://central.sonatype.org/changelog/#2021-04-01-comgithub-is-not-supported-anymore-as-a-valid-coordinate\">这里</a></p>\n<p> 创建完成之后会跳转到这个连接<code>https://issues.sonatype.org/browse/OSSRH-xxxx</code>,当看到这个连接之后，你要在你的<code>Github</code>上创建一个仓库，来证明你是这个<code>Github</code>的主人，仓库的名字就是连接里的<code>OSSRH-xxxx</code>。</p>\n<p> 创建后的仓库连接为<code>https://github.com/yourgithubname/OSSRH-xxxx</code>,然后在帖子下面留言告诉管理员这个仓库你已经创建好了名字为<code>OSSRH-xxxx</code>的仓库,这样可以省去他让你证明你是这个账户的拥有者，提高效率。等到管理员回复之后就可以上传<code>jar</code>包了。</p>\n<p> 下面是管理员的回复，看到这个就表示完成了。</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">io.github.xxx has been prepared, now user(s) youname can:</span><br><span class=\"line\">Publish snapshot and release artifacts to s01.oss.sonatype.org</span><br><span class=\"line\">Have a look at this section of our official guide for deployment instructions:</span><br><span class=\"line\">https://central.sonatype.org/publish/publish-guide/#deployment</span><br><span class=\"line\"></span><br><span class=\"line\">Depending on your build configuration, your first component(s) might be released automatically after a successful deployment.</span><br><span class=\"line\">If that happens, you will see a comment on this ticket confirming that your artifact has synced to Maven Central.</span><br><span class=\"line\">If you do not see this comment within an hour or two, you can follow the steps in this section of our guide:</span><br><span class=\"line\">https://central.sonatype.org/publish/release/</span><br><span class=\"line\"></span><br><span class=\"line\">######</span><br><span class=\"line\"></span><br><span class=\"line\">As part of our efforts to improve the security and quality posture of the open source supply chain,</span><br><span class=\"line\">we plan to enable additional scanning of dependencies for security alerts soon. Since you&#x27;re already</span><br><span class=\"line\">hosting your source code in Github, you can get these insights today by enabling Sonatype Lift.</span><br><span class=\"line\">Sonatype Lift is free forever on public repositories! Lift tells you about open source vulnerabilities</span><br><span class=\"line\">during code review, and goes beyond open source to scan your code for both code quality and security issues,</span><br><span class=\"line\">providing feedback right in your pull requests.</span><br><span class=\"line\">More information can be found at https://links.sonatype.com/products/lift/github-integration</span><br><span class=\"line\"></span><br><span class=\"line\">######</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"发布前的准备\"><a href=\"#发布前的准备\" class=\"headerlink\" title=\"发布前的准备\"></a>发布前的准备</h1><h2 id=\"修改pom文件\"><a href=\"#修改pom文件\" class=\"headerlink\" title=\"修改pom文件\"></a>修改<code>pom</code>文件</h2>  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.github.xxxx<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>xxx<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>xxxxx<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">source</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- Source --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-source-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.2.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>package<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>jar-no-fork<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- Javadoc --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-javadoc-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">additionalparam</span>&gt;</span>-Xdoclint:none<span class=\"tag\">&lt;/<span class=\"name\">additionalparam</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>package<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- GPG mvn clean deploy -P release -Dgpg.passphrase=YourPassphase --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-gpg-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.5<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>sign-artifacts<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>verify<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>sign<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">licenses</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">license</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>MIT License<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://github.com/xxx/xxx/xxxxxx/master/LICENSE<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">distribution</span>&gt;</span>repo,manual<span class=\"tag\">&lt;/<span class=\"name\">distribution</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">license</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">licenses</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">developers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">developer</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>xxx<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">email</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">email</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>xxxx<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">developer</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">developers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">scm</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">connection</span>&gt;</span>scm:git:https://github.com/xxx/xxxx.git<span class=\"tag\">&lt;/<span class=\"name\">connection</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">developerConnection</span>&gt;</span>scm:git:https://github.com/xxxx/xxxx.git<span class=\"tag\">&lt;/<span class=\"name\">developerConnection</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://github.com/xxxx/xxxxx<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tag</span>&gt;</span>0.0.1<span class=\"tag\">&lt;/<span class=\"name\">tag</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">scm</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>只需修改和自己相关的内容即可，文中用<code>xxxx</code>表示，其他的不需要修改</p>\n<p><code>Group Id</code>一定要和申请的保持一致</p>\n<h2 id=\"上传gpg-key\"><a href=\"#上传gpg-key\" class=\"headerlink\" title=\"上传gpg key\"></a>上传<code>gpg key</code></h2> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  gpg generate-key</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 按照提示输入用户名和邮箱，最后会输入一个密码，记住这个密码下面会用</span> </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"将公钥发送到PGP密钥服务器\"><a href=\"#将公钥发送到PGP密钥服务器\" class=\"headerlink\" title=\"将公钥发送到PGP密钥服务器\"></a>将公钥发送到PGP密钥服务器</h3> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E</span></span><br></pre></td></tr></table></figure>\n<p> 返回结果</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gpg: 将密钥‘14F722543E7D2C1E’上传到 hkp://keyserver.ubuntu.com:11371</span><br></pre></td></tr></table></figure>\n<p>验证是否上传成功</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">   gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-keys 6107DF0A8EE6A62EABFDD12914F722543E7D2C1E</span></span><br></pre></td></tr></table></figure>\n<p>返回结果</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gpg: 密钥 14F722543E7D2C1E：“houbb &lt;XXX@XX.com&gt;”未改变</span><br><span class=\"line\">gpg: 合计被处理的数量：1</span><br><span class=\"line\">gpg:           未改变：1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"setting-xml\"><a href=\"#setting-xml\" class=\"headerlink\" title=\"setting.xml\"></a><code>setting.xml</code></h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">settings</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/SETTINGS/1.2.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>sonatype账号<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>sonatype密码<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servers</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">activeByDefault</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">activeByDefault</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">gpg.executable</span>&gt;</span>gpg2<span class=\"tag\">&lt;/<span class=\"name\">gpg.executable</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">gpg.passphrase</span>&gt;</span>gpg公钥的密码<span class=\"tag\">&lt;/<span class=\"name\">gpg.passphrase</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>注意判断<code>mvn</code>使用的<code>setting.xml</code>是哪里的，一般在<code>mvn</code>主目录下的<code>conf</code>文件夹和用户目录下的<code>.m2</code>文件夹</p>\n<h1 id=\"上传程序\"><a href=\"#上传程序\" class=\"headerlink\" title=\"上传程序\"></a>上传程序</h1><p>在项目根目录下执行</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mvn clean deploy</span></span><br></pre></td></tr></table></figure>\n<p>稍等片刻会出现一个窗口，输入<code>gpg</code>的密码</p>\n<p><img src=\"https://img-blog.csdnimg.cn/3432ac48ec174e53990e7a3296fdb385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"看到这个表示发布成功\"></p>\n<p> 看到这个表示已经上传成功了。</p>\n<p> 上传成功之后登录到<code>https://s01.oss.sonatype.org/</code>,账号就是一开始注册的sonatype账号。</p>\n<p> 登录之后会点击<code>Staging Repositories</code>会看到这个页面，选中记录点击<code>close</code>,成功之后点击<code>Release</code>。</p>\n<p> 到这步就已经大功告成了,稍等片刻就可以在这里看到上传的包了</p>\n<p> 比如 <code>Group Id</code>是<code>io.github.xxx</code></p>\n<p>  <code>artifactId</code>是<code>tool</code></p>\n<p>   <code>version</code>是<code>1.0.0</code>,</p>\n<p> 查看地址就是<code>https://repo.maven.apache.org/maven2/io/github/xxx/tool/1.0.0</code></p>\n<p> 如果上面这个连接可以查到，就已经可以在项目中使用了。同步到中央仓库的时间不太确定。</p>\n<p>发布成功之后去帖子上回复一下，告诉管理员发布成功了。</p>\n<p> <img src=\"https://img-blog.csdnimg.cn/689a5fa7f23b4d76890e46a39b577421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<h1 id=\"遇到的问题\"><a href=\"#遇到的问题\" class=\"headerlink\" title=\"遇到的问题\"></a>遇到的问题</h1><ul>\n<li><p>执行<code>mvn deploy</code>的时候总是返回<code>401</code> 错误，找了各种办法都不能解决，重新注册了个账户就可以了，不知道是为什么。</p>\n</li>\n<li><p><code>repository</code>地址已经改变了，现在网上大部分的文章都是旧的，新的是这样的</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>ossrh<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://central.sonatype.org/publish/publish-maven/\">官方文档</a>有最新的配置信息，遇到问题之后还是要先查官方文档</p>\n</li>\n<li><p>在<code>centos</code>发布时报错<br><code>Failed to execute goal org.apache.maven.plugins:maven-gpg-plugin:1.6:sign</code></p>\n<p><a href=\"https://blog.csdn.net/li5672/article/details/119564796\">解决方法</a></p>\n</li>\n</ul>\n"},{"title":"搭建maven私有仓库.","abbrlink":"c3ac5d8c","date":"2021-09-10T13:00:39.000Z","_content":"\n# 下载安装包\n\n[点击\n](https://www.sonatype.com/product/repository-oss-download)从官网选择自己适合自己操作系统的安装包，下载完成之后放到一个合适的位置，无需要安装。\n\n# 启动\n 进入`nexus-3.30.0-01\\bin`目录下，输入`cmd`\n \n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01b5e22cbf7b40eab4fd704115ec0571~tplv-k3u1fbpfcp-watermark.image)\n\n在命令行中输入`nexus /run`，稍等片刻\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b42cdcc5df0c4b8984e295c7b439f852~tplv-k3u1fbpfcp-watermark.image)\n\n提示`8081`端口已经被占用，原来`nexus`默认使用的端口是`8081`,关闭正在使用的`8081`端口之后，在此运行命令稍等片刻启动成功。\n# 登陆系统\n\n启动成功之在浏览器打开`http://localhost:8081/`，\n\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fba587f47f764e12ab8c0ffcabb0cc67~tplv-k3u1fbpfcp-watermark.image)\n\n初始化完成之后点击`Sign in`登陆，默认账户是`admin`,初始密码在`nexus-3.30.0-01-win64\\sonatype-work\\nexus3`目录下的`admin.password`文件中，复制到登陆表单中完成登陆，成功之后会提示重新设置密码，设置一个自己常用的密码即可。\n# 增加阿里代理仓库\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34ad4efa144a49af9265d1404d499f61~tplv-k3u1fbpfcp-watermark.image)\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76920d2ca8264380b167b2a5de96257d~tplv-k3u1fbpfcp-watermark.image)\n\n输入两个必选项\n\n`aliyun`\n\n`http://maven.aliyun.com/nexus/content/groups/public/`\n\n保存完成\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c7f21c6038943d5abf204b3ff4cb3e9~tplv-k3u1fbpfcp-watermark.image)\n\n选择`Configuration` > `Repository`, 然后双击 `maven-public`\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ce1038d21464c519b207d2b7c650e01~tplv-k3u1fbpfcp-watermark.image)\n\n 把`aliyun`移动到右侧 保存。\n # 配置Maven\n \n找到`maven`中的`setting.xml`,在`servers`标签中\n\n写入下面的配置\n```xml\n<server>\n        <id>releases</id>\n        <username>admin</username>\n        <password>123456</password>\n    </server>\n    \n    <server>\n        <id>snapshots</id>\n        <username>admin</username>\n        <password>123456</password>\n    </server>\n \n```\n > password是自己设置的登陆密码\n \n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d5387e245e049c5833b26feedeb3f86~tplv-k3u1fbpfcp-watermark.image)\n\n\n## 在pom文件中加入下面的配置\n\n``` xml\n<distributionManagement>\n        <repository>\n            <id>releases</id>\n            <name>User Project Release</name>\n            <url>http://127.0.0.1:8081/repository/maven-releases</url>\n        </repository>\n    </distributionManagement>\n```\n\n## 发布代码到私有仓库\n\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10c8548941ca45779f197fd35aa41513~tplv-k3u1fbpfcp-watermark.image)\n\n双击即可\n\n# 查看发布的项目\n\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad834c71a6d540b1aaaa92a580ab7ae7~tplv-k3u1fbpfcp-watermark.image)\n# 使用仓库中的项目\n\n在`pom`文件中加入下面的配置\n\n```xml\n<repositories>\n        <repository>\n            <id>nexus</id>\n            <name>Nexus Snapshot Repository</name>\n            <url>http://127.0.0.1:8081/repository/maven-public/</url>\n            <releases>\n                <enabled>true</enabled>\n            </releases>\n            <snapshots>\n                <enabled>true</enabled>\n            </snapshots>\n        </repository>\n  </repositories>\n```\n# 在发布和下载的时候如果遇到权限问题\n\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79dac5d8a27a4ba3a8e20cd605d19c2e~tplv-k3u1fbpfcp-watermark.image)\n\n\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f1f5bd879b4448f960cdba9000820bc~tplv-k3u1fbpfcp-watermark.image)\n","source":"_posts/java/搭建maven私有仓库.md","raw":"---\ntitle: 搭建maven私有仓库.\ntags:\n  - java\n  - maven\n  - nexus\ncategories: 工具\nabbrlink: c3ac5d8c\ndate: 2021-09-10 21:00:39\n---\n\n# 下载安装包\n\n[点击\n](https://www.sonatype.com/product/repository-oss-download)从官网选择自己适合自己操作系统的安装包，下载完成之后放到一个合适的位置，无需要安装。\n\n# 启动\n 进入`nexus-3.30.0-01\\bin`目录下，输入`cmd`\n \n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01b5e22cbf7b40eab4fd704115ec0571~tplv-k3u1fbpfcp-watermark.image)\n\n在命令行中输入`nexus /run`，稍等片刻\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b42cdcc5df0c4b8984e295c7b439f852~tplv-k3u1fbpfcp-watermark.image)\n\n提示`8081`端口已经被占用，原来`nexus`默认使用的端口是`8081`,关闭正在使用的`8081`端口之后，在此运行命令稍等片刻启动成功。\n# 登陆系统\n\n启动成功之在浏览器打开`http://localhost:8081/`，\n\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fba587f47f764e12ab8c0ffcabb0cc67~tplv-k3u1fbpfcp-watermark.image)\n\n初始化完成之后点击`Sign in`登陆，默认账户是`admin`,初始密码在`nexus-3.30.0-01-win64\\sonatype-work\\nexus3`目录下的`admin.password`文件中，复制到登陆表单中完成登陆，成功之后会提示重新设置密码，设置一个自己常用的密码即可。\n# 增加阿里代理仓库\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34ad4efa144a49af9265d1404d499f61~tplv-k3u1fbpfcp-watermark.image)\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76920d2ca8264380b167b2a5de96257d~tplv-k3u1fbpfcp-watermark.image)\n\n输入两个必选项\n\n`aliyun`\n\n`http://maven.aliyun.com/nexus/content/groups/public/`\n\n保存完成\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c7f21c6038943d5abf204b3ff4cb3e9~tplv-k3u1fbpfcp-watermark.image)\n\n选择`Configuration` > `Repository`, 然后双击 `maven-public`\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ce1038d21464c519b207d2b7c650e01~tplv-k3u1fbpfcp-watermark.image)\n\n 把`aliyun`移动到右侧 保存。\n # 配置Maven\n \n找到`maven`中的`setting.xml`,在`servers`标签中\n\n写入下面的配置\n```xml\n<server>\n        <id>releases</id>\n        <username>admin</username>\n        <password>123456</password>\n    </server>\n    \n    <server>\n        <id>snapshots</id>\n        <username>admin</username>\n        <password>123456</password>\n    </server>\n \n```\n > password是自己设置的登陆密码\n \n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d5387e245e049c5833b26feedeb3f86~tplv-k3u1fbpfcp-watermark.image)\n\n\n## 在pom文件中加入下面的配置\n\n``` xml\n<distributionManagement>\n        <repository>\n            <id>releases</id>\n            <name>User Project Release</name>\n            <url>http://127.0.0.1:8081/repository/maven-releases</url>\n        </repository>\n    </distributionManagement>\n```\n\n## 发布代码到私有仓库\n\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10c8548941ca45779f197fd35aa41513~tplv-k3u1fbpfcp-watermark.image)\n\n双击即可\n\n# 查看发布的项目\n\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad834c71a6d540b1aaaa92a580ab7ae7~tplv-k3u1fbpfcp-watermark.image)\n# 使用仓库中的项目\n\n在`pom`文件中加入下面的配置\n\n```xml\n<repositories>\n        <repository>\n            <id>nexus</id>\n            <name>Nexus Snapshot Repository</name>\n            <url>http://127.0.0.1:8081/repository/maven-public/</url>\n            <releases>\n                <enabled>true</enabled>\n            </releases>\n            <snapshots>\n                <enabled>true</enabled>\n            </snapshots>\n        </repository>\n  </repositories>\n```\n# 在发布和下载的时候如果遇到权限问题\n\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79dac5d8a27a4ba3a8e20cd605d19c2e~tplv-k3u1fbpfcp-watermark.image)\n\n\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f1f5bd879b4448f960cdba9000820bc~tplv-k3u1fbpfcp-watermark.image)\n","slug":"java/搭建maven私有仓库","published":1,"updated":"2021-09-16T08:48:58.111Z","_id":"cktmoybkd000wkotrajpc67f6","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h1><p><a href=\"https://www.sonatype.com/product/repository-oss-download\">点击\n</a>从官网选择自己适合自己操作系统的安装包，下载完成之后放到一个合适的位置，无需要安装。</p>\n<h1 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h1><p> 进入<code>nexus-3.30.0-01\\bin</code>目录下，输入<code>cmd</code></p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01b5e22cbf7b40eab4fd704115ec0571~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>在命令行中输入<code>nexus /run</code>，稍等片刻</p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b42cdcc5df0c4b8984e295c7b439f852~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>提示<code>8081</code>端口已经被占用，原来<code>nexus</code>默认使用的端口是<code>8081</code>,关闭正在使用的<code>8081</code>端口之后，在此运行命令稍等片刻启动成功。</p>\n<h1 id=\"登陆系统\"><a href=\"#登陆系统\" class=\"headerlink\" title=\"登陆系统\"></a>登陆系统</h1><p>启动成功之在浏览器打开<code>http://localhost:8081/</code>，</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fba587f47f764e12ab8c0ffcabb0cc67~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>初始化完成之后点击<code>Sign in</code>登陆，默认账户是<code>admin</code>,初始密码在<code>nexus-3.30.0-01-win64\\sonatype-work\\nexus3</code>目录下的<code>admin.password</code>文件中，复制到登陆表单中完成登陆，成功之后会提示重新设置密码，设置一个自己常用的密码即可。</p>\n<h1 id=\"增加阿里代理仓库\"><a href=\"#增加阿里代理仓库\" class=\"headerlink\" title=\"增加阿里代理仓库\"></a>增加阿里代理仓库</h1><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34ad4efa144a49af9265d1404d499f61~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76920d2ca8264380b167b2a5de96257d~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>输入两个必选项</p>\n<p><code>aliyun</code></p>\n<p><code>http://maven.aliyun.com/nexus/content/groups/public/</code></p>\n<p>保存完成</p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c7f21c6038943d5abf204b3ff4cb3e9~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>选择<code>Configuration</code> &gt; <code>Repository</code>, 然后双击 <code>maven-public</code></p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ce1038d21464c519b207d2b7c650e01~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p> 把<code>aliyun</code>移动到右侧 保存。</p>\n<h1 id=\"配置Maven\"><a href=\"#配置Maven\" class=\"headerlink\" title=\"配置Maven\"></a>配置Maven</h1><p>找到<code>maven</code>中的<code>setting.xml</code>,在<code>servers</code>标签中</p>\n<p>写入下面的配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>123456<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>123456<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>password是自己设置的登陆密码</p>\n</blockquote>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d5387e245e049c5833b26feedeb3f86~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h2 id=\"在pom文件中加入下面的配置\"><a href=\"#在pom文件中加入下面的配置\" class=\"headerlink\" title=\"在pom文件中加入下面的配置\"></a>在pom文件中加入下面的配置</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>User Project Release<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://127.0.0.1:8081/repository/maven-releases<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"发布代码到私有仓库\"><a href=\"#发布代码到私有仓库\" class=\"headerlink\" title=\"发布代码到私有仓库\"></a>发布代码到私有仓库</h2><p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10c8548941ca45779f197fd35aa41513~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>双击即可</p>\n<h1 id=\"查看发布的项目\"><a href=\"#查看发布的项目\" class=\"headerlink\" title=\"查看发布的项目\"></a>查看发布的项目</h1><p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad834c71a6d540b1aaaa92a580ab7ae7~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h1 id=\"使用仓库中的项目\"><a href=\"#使用仓库中的项目\" class=\"headerlink\" title=\"使用仓库中的项目\"></a>使用仓库中的项目</h1><p>在<code>pom</code>文件中加入下面的配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>Nexus Snapshot Repository<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://127.0.0.1:8081/repository/maven-public/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"在发布和下载的时候如果遇到权限问题\"><a href=\"#在发布和下载的时候如果遇到权限问题\" class=\"headerlink\" title=\"在发布和下载的时候如果遇到权限问题\"></a>在发布和下载的时候如果遇到权限问题</h1><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79dac5d8a27a4ba3a8e20cd605d19c2e~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f1f5bd879b4448f960cdba9000820bc~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h1><p><a href=\"https://www.sonatype.com/product/repository-oss-download\">点击\n</a>从官网选择自己适合自己操作系统的安装包，下载完成之后放到一个合适的位置，无需要安装。</p>\n<h1 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h1><p> 进入<code>nexus-3.30.0-01\\bin</code>目录下，输入<code>cmd</code></p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01b5e22cbf7b40eab4fd704115ec0571~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>在命令行中输入<code>nexus /run</code>，稍等片刻</p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b42cdcc5df0c4b8984e295c7b439f852~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>提示<code>8081</code>端口已经被占用，原来<code>nexus</code>默认使用的端口是<code>8081</code>,关闭正在使用的<code>8081</code>端口之后，在此运行命令稍等片刻启动成功。</p>\n<h1 id=\"登陆系统\"><a href=\"#登陆系统\" class=\"headerlink\" title=\"登陆系统\"></a>登陆系统</h1><p>启动成功之在浏览器打开<code>http://localhost:8081/</code>，</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fba587f47f764e12ab8c0ffcabb0cc67~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>初始化完成之后点击<code>Sign in</code>登陆，默认账户是<code>admin</code>,初始密码在<code>nexus-3.30.0-01-win64\\sonatype-work\\nexus3</code>目录下的<code>admin.password</code>文件中，复制到登陆表单中完成登陆，成功之后会提示重新设置密码，设置一个自己常用的密码即可。</p>\n<h1 id=\"增加阿里代理仓库\"><a href=\"#增加阿里代理仓库\" class=\"headerlink\" title=\"增加阿里代理仓库\"></a>增加阿里代理仓库</h1><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34ad4efa144a49af9265d1404d499f61~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76920d2ca8264380b167b2a5de96257d~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>输入两个必选项</p>\n<p><code>aliyun</code></p>\n<p><code>http://maven.aliyun.com/nexus/content/groups/public/</code></p>\n<p>保存完成</p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c7f21c6038943d5abf204b3ff4cb3e9~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>选择<code>Configuration</code> &gt; <code>Repository</code>, 然后双击 <code>maven-public</code></p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ce1038d21464c519b207d2b7c650e01~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p> 把<code>aliyun</code>移动到右侧 保存。</p>\n<h1 id=\"配置Maven\"><a href=\"#配置Maven\" class=\"headerlink\" title=\"配置Maven\"></a>配置Maven</h1><p>找到<code>maven</code>中的<code>setting.xml</code>,在<code>servers</code>标签中</p>\n<p>写入下面的配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>123456<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>123456<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>password是自己设置的登陆密码</p>\n</blockquote>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d5387e245e049c5833b26feedeb3f86~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h2 id=\"在pom文件中加入下面的配置\"><a href=\"#在pom文件中加入下面的配置\" class=\"headerlink\" title=\"在pom文件中加入下面的配置\"></a>在pom文件中加入下面的配置</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>User Project Release<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://127.0.0.1:8081/repository/maven-releases<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"发布代码到私有仓库\"><a href=\"#发布代码到私有仓库\" class=\"headerlink\" title=\"发布代码到私有仓库\"></a>发布代码到私有仓库</h2><p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10c8548941ca45779f197fd35aa41513~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>双击即可</p>\n<h1 id=\"查看发布的项目\"><a href=\"#查看发布的项目\" class=\"headerlink\" title=\"查看发布的项目\"></a>查看发布的项目</h1><p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad834c71a6d540b1aaaa92a580ab7ae7~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h1 id=\"使用仓库中的项目\"><a href=\"#使用仓库中的项目\" class=\"headerlink\" title=\"使用仓库中的项目\"></a>使用仓库中的项目</h1><p>在<code>pom</code>文件中加入下面的配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>Nexus Snapshot Repository<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://127.0.0.1:8081/repository/maven-public/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"在发布和下载的时候如果遇到权限问题\"><a href=\"#在发布和下载的时候如果遇到权限问题\" class=\"headerlink\" title=\"在发布和下载的时候如果遇到权限问题\"></a>在发布和下载的时候如果遇到权限问题</h1><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79dac5d8a27a4ba3a8e20cd605d19c2e~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f1f5bd879b4448f960cdba9000820bc~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n"},{"title":"使用babel把es6转成es5","abbrlink":"9da0838d","date":"2021-09-10T12:35:09.000Z","_content":"\n\n# Babel 是什么\n\nBabel 是一个工具链，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。\n\n# Babel能用在哪里\n\n## NodeJs\n\n###  使用 `npm` 初始化项目\n\n```shell script\n$ mkdir es6-to-es5\n$ npm init -y\n```\n   \n### 安装Babel\n ```shell script\n$ npm install --save-dev @babel/core @babel/cli\n```\n\n安装完成之后, 你的 `package.json` 会加入这些代码\n   \n\n```json5\n  \"devDependencies\": {\n   + \"@babel/cli\": \"^7.12.8\",\n   + \"@babel/core\": \"^7.12.9\"\n  }\n```\n\n 现在把 `Babel` 的运行命令放入到 `npm` 脚本中, 也是在 `package.json` 中\n \n\n```json5\n \"scripts\": {\n+     \"build\": \"babel src -d lib\"\n\n  }\n```\n\n### 创建.babelrc配置文件\n\n```shell script\n$ npm install @babel/preset-env --save-dev\n\n```\n创建`babel.config.json`文件,写入以下内容\n```json\n{\n  \"presets\": [\"@babel/preset-env\"]\n}\n```\n\n环境都配置完成, 下面开始正式写代码了\n\n### 写一段ES6代码\n\n 创建 `/src/index.js`\n\n ```shell script\n$  mkdir src\n$  touch src/index.js\n\n```\n写入一个简单的箭头函数\n```javascript\nlet sayHello = () => {\n    console.log('hello xiaotaideng')\n}\n\nsayHello()\n\n```\n\n现在运行刚刚写好的启动脚本\n\n```shell script\n$ npm run build\n\n```\n 完成之后可以看到目录中新增了一个`build`文件夹,打开里面的`index.js`它的内容是这样的\n \n ```javascript\n\"use strict\";\n\nvar sayHello = function sayHello() {\n  console.log('hello xiaotaideng');\n};\n\nsayHello();\n```\n\n现在执行下面的命令\n\n```shell\n $  node build/index.js\n```\n\n 可以正常的输出，到现在好像已经可以正常的使用了\n \n[点击](https://github.com/lizeze/es6-to-es5)获取源码 \n\n ","source":"_posts/js/使用babel把es6转成es5.md","raw":"---\ntitle: 使用babel把es6转成es5\ntags:\n  - JavaScript\n  - es6\n  - es5\n  - babel\n  - webpack\ncategories: JavaScript\nabbrlink: 9da0838d\ndate: 2021-09-10 20:35:09\n---\n\n\n# Babel 是什么\n\nBabel 是一个工具链，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。\n\n# Babel能用在哪里\n\n## NodeJs\n\n###  使用 `npm` 初始化项目\n\n```shell script\n$ mkdir es6-to-es5\n$ npm init -y\n```\n   \n### 安装Babel\n ```shell script\n$ npm install --save-dev @babel/core @babel/cli\n```\n\n安装完成之后, 你的 `package.json` 会加入这些代码\n   \n\n```json5\n  \"devDependencies\": {\n   + \"@babel/cli\": \"^7.12.8\",\n   + \"@babel/core\": \"^7.12.9\"\n  }\n```\n\n 现在把 `Babel` 的运行命令放入到 `npm` 脚本中, 也是在 `package.json` 中\n \n\n```json5\n \"scripts\": {\n+     \"build\": \"babel src -d lib\"\n\n  }\n```\n\n### 创建.babelrc配置文件\n\n```shell script\n$ npm install @babel/preset-env --save-dev\n\n```\n创建`babel.config.json`文件,写入以下内容\n```json\n{\n  \"presets\": [\"@babel/preset-env\"]\n}\n```\n\n环境都配置完成, 下面开始正式写代码了\n\n### 写一段ES6代码\n\n 创建 `/src/index.js`\n\n ```shell script\n$  mkdir src\n$  touch src/index.js\n\n```\n写入一个简单的箭头函数\n```javascript\nlet sayHello = () => {\n    console.log('hello xiaotaideng')\n}\n\nsayHello()\n\n```\n\n现在运行刚刚写好的启动脚本\n\n```shell script\n$ npm run build\n\n```\n 完成之后可以看到目录中新增了一个`build`文件夹,打开里面的`index.js`它的内容是这样的\n \n ```javascript\n\"use strict\";\n\nvar sayHello = function sayHello() {\n  console.log('hello xiaotaideng');\n};\n\nsayHello();\n```\n\n现在执行下面的命令\n\n```shell\n $  node build/index.js\n```\n\n 可以正常的输出，到现在好像已经可以正常的使用了\n \n[点击](https://github.com/lizeze/es6-to-es5)获取源码 \n\n ","slug":"js/使用babel把es6转成es5","published":1,"updated":"2021-09-16T08:48:58.114Z","_id":"cktmoybke000xkotr0ucmckno","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Babel-是什么\"><a href=\"#Babel-是什么\" class=\"headerlink\" title=\"Babel 是什么\"></a>Babel 是什么</h1><p>Babel 是一个工具链，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p>\n<h1 id=\"Babel能用在哪里\"><a href=\"#Babel能用在哪里\" class=\"headerlink\" title=\"Babel能用在哪里\"></a>Babel能用在哪里</h1><h2 id=\"NodeJs\"><a href=\"#NodeJs\" class=\"headerlink\" title=\"NodeJs\"></a>NodeJs</h2><h3 id=\"使用-npm-初始化项目\"><a href=\"#使用-npm-初始化项目\" class=\"headerlink\" title=\"使用 npm 初始化项目\"></a>使用 <code>npm</code> 初始化项目</h3><figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir es6-to-es5</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm init -y</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"安装Babel\"><a href=\"#安装Babel\" class=\"headerlink\" title=\"安装Babel\"></a>安装Babel</h3> <figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm install --save-dev @babel/core @babel/cli</span></span><br></pre></td></tr></table></figure>\n\n<p>安装完成之后, 你的 <code>package.json</code> 会加入这些代码</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;devDependencies&quot;: &#123;</span><br><span class=\"line\"> + &quot;@babel/cli&quot;: &quot;^7.12.8&quot;,</span><br><span class=\"line\"> + &quot;@babel/core&quot;: &quot;^7.12.9&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> 现在把 <code>Babel</code> 的运行命令放入到 <code>npm</code> 脚本中, 也是在 <code>package.json</code> 中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> &quot;scripts&quot;: &#123;</span><br><span class=\"line\">+     &quot;build&quot;: &quot;babel src -d lib&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建-babelrc配置文件\"><a href=\"#创建-babelrc配置文件\" class=\"headerlink\" title=\"创建.babelrc配置文件\"></a>创建.babelrc配置文件</h3><figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm install @babel/preset-env --save-dev</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>创建<code>babel.config.json</code>文件,写入以下内容</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>环境都配置完成, 下面开始正式写代码了</p>\n<h3 id=\"写一段ES6代码\"><a href=\"#写一段ES6代码\" class=\"headerlink\" title=\"写一段ES6代码\"></a>写一段ES6代码</h3><p> 创建 <code>/src/index.js</code></p>\n <figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  mkdir src</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  touch src/index.js</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>写入一个简单的箭头函数</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> sayHello = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;hello xiaotaideng&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">sayHello()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>现在运行刚刚写好的启动脚本</p>\n<figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm run build</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 完成之后可以看到目录中新增了一个<code>build</code>文件夹,打开里面的<code>index.js</code>它的内容是这样的</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> sayHello = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;hello xiaotaideng&#x27;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">sayHello();</span><br></pre></td></tr></table></figure>\n\n<p>现在执行下面的命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  node build/index.js</span></span><br></pre></td></tr></table></figure>\n\n<p> 可以正常的输出，到现在好像已经可以正常的使用了</p>\n<p><a href=\"https://github.com/lizeze/es6-to-es5\">点击</a>获取源码 </p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Babel-是什么\"><a href=\"#Babel-是什么\" class=\"headerlink\" title=\"Babel 是什么\"></a>Babel 是什么</h1><p>Babel 是一个工具链，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p>\n<h1 id=\"Babel能用在哪里\"><a href=\"#Babel能用在哪里\" class=\"headerlink\" title=\"Babel能用在哪里\"></a>Babel能用在哪里</h1><h2 id=\"NodeJs\"><a href=\"#NodeJs\" class=\"headerlink\" title=\"NodeJs\"></a>NodeJs</h2><h3 id=\"使用-npm-初始化项目\"><a href=\"#使用-npm-初始化项目\" class=\"headerlink\" title=\"使用 npm 初始化项目\"></a>使用 <code>npm</code> 初始化项目</h3><figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir es6-to-es5</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm init -y</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"安装Babel\"><a href=\"#安装Babel\" class=\"headerlink\" title=\"安装Babel\"></a>安装Babel</h3> <figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm install --save-dev @babel/core @babel/cli</span></span><br></pre></td></tr></table></figure>\n\n<p>安装完成之后, 你的 <code>package.json</code> 会加入这些代码</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;devDependencies&quot;: &#123;</span><br><span class=\"line\"> + &quot;@babel/cli&quot;: &quot;^7.12.8&quot;,</span><br><span class=\"line\"> + &quot;@babel/core&quot;: &quot;^7.12.9&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> 现在把 <code>Babel</code> 的运行命令放入到 <code>npm</code> 脚本中, 也是在 <code>package.json</code> 中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> &quot;scripts&quot;: &#123;</span><br><span class=\"line\">+     &quot;build&quot;: &quot;babel src -d lib&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建-babelrc配置文件\"><a href=\"#创建-babelrc配置文件\" class=\"headerlink\" title=\"创建.babelrc配置文件\"></a>创建.babelrc配置文件</h3><figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm install @babel/preset-env --save-dev</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>创建<code>babel.config.json</code>文件,写入以下内容</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;presets&quot;</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>环境都配置完成, 下面开始正式写代码了</p>\n<h3 id=\"写一段ES6代码\"><a href=\"#写一段ES6代码\" class=\"headerlink\" title=\"写一段ES6代码\"></a>写一段ES6代码</h3><p> 创建 <code>/src/index.js</code></p>\n <figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  mkdir src</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  touch src/index.js</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>写入一个简单的箭头函数</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> sayHello = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;hello xiaotaideng&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">sayHello()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>现在运行刚刚写好的启动脚本</p>\n<figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm run build</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 完成之后可以看到目录中新增了一个<code>build</code>文件夹,打开里面的<code>index.js</code>它的内容是这样的</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> sayHello = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;hello xiaotaideng&#x27;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">sayHello();</span><br></pre></td></tr></table></figure>\n\n<p>现在执行下面的命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  node build/index.js</span></span><br></pre></td></tr></table></figure>\n\n<p> 可以正常的输出，到现在好像已经可以正常的使用了</p>\n<p><a href=\"https://github.com/lizeze/es6-to-es5\">点击</a>获取源码 </p>\n"},{"title":"使用js下载文件","abbrlink":"39437d16","date":"2021-09-12T04:46:20.000Z","_content":"\n```javascript\n var url = 'download/?filename=aaa.txt';\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);      \n    xhr.responseType = \"blob\";    \n    xhr.onload = function () {\n        if (this.status === 200) {\n            var blob = this.response;\n            var reader = new FileReader();\n            reader.readAsDataURL(blob);     \n            reader.onload = function (e) {\n                var a = document.createElement('a');\n                a.download = 'name';\n                a.href = e.target.result;\n                $(\"body\").append(a);   \n                a.click();\n                $(a).remove();\n            }\n        }\n    };\n    xhr.send()\n```","source":"_posts/js/使用js下载文件.md","raw":"---\ntitle: 使用js下载文件\ntags: js\ncategories: JavaScript\nabbrlink: 39437d16\ndate: 2021-09-12 12:46:20\n---\n\n```javascript\n var url = 'download/?filename=aaa.txt';\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);      \n    xhr.responseType = \"blob\";    \n    xhr.onload = function () {\n        if (this.status === 200) {\n            var blob = this.response;\n            var reader = new FileReader();\n            reader.readAsDataURL(blob);     \n            reader.onload = function (e) {\n                var a = document.createElement('a');\n                a.download = 'name';\n                a.href = e.target.result;\n                $(\"body\").append(a);   \n                a.click();\n                $(a).remove();\n            }\n        }\n    };\n    xhr.send()\n```","slug":"js/使用js下载文件","published":1,"updated":"2021-09-16T08:48:58.117Z","_id":"cktmoybkf0012kotr5gqre5lb","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"string\">&#x27;download/?filename=aaa.txt&#x27;</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">   xhr.open(<span class=\"string\">&#x27;GET&#x27;</span>, url, <span class=\"literal\">true</span>);      </span><br><span class=\"line\">   xhr.responseType = <span class=\"string\">&quot;blob&quot;</span>;    </span><br><span class=\"line\">   xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.status === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">var</span> blob = <span class=\"built_in\">this</span>.response;</span><br><span class=\"line\">           <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">           reader.readAsDataURL(blob);     </span><br><span class=\"line\">           reader.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">               <span class=\"keyword\">var</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">               a.download = <span class=\"string\">&#x27;name&#x27;</span>;</span><br><span class=\"line\">               a.href = e.target.result;</span><br><span class=\"line\">               $(<span class=\"string\">&quot;body&quot;</span>).append(a);   </span><br><span class=\"line\">               a.click();</span><br><span class=\"line\">               $(a).remove();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;;</span><br><span class=\"line\">   xhr.send()</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"string\">&#x27;download/?filename=aaa.txt&#x27;</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">   xhr.open(<span class=\"string\">&#x27;GET&#x27;</span>, url, <span class=\"literal\">true</span>);      </span><br><span class=\"line\">   xhr.responseType = <span class=\"string\">&quot;blob&quot;</span>;    </span><br><span class=\"line\">   xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.status === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">var</span> blob = <span class=\"built_in\">this</span>.response;</span><br><span class=\"line\">           <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">           reader.readAsDataURL(blob);     </span><br><span class=\"line\">           reader.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">               <span class=\"keyword\">var</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;a&#x27;</span>);</span><br><span class=\"line\">               a.download = <span class=\"string\">&#x27;name&#x27;</span>;</span><br><span class=\"line\">               a.href = e.target.result;</span><br><span class=\"line\">               $(<span class=\"string\">&quot;body&quot;</span>).append(a);   </span><br><span class=\"line\">               a.click();</span><br><span class=\"line\">               $(a).remove();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;;</span><br><span class=\"line\">   xhr.send()</span><br></pre></td></tr></table></figure>"},{"title":"Nginx代理设置反向代理与缓存","abbrlink":"592ccd47","date":"2021-09-10T12:27:20.000Z","_content":" ## 反向代理\n\n``` nginx\nupstream tomcats {\n    server 127.0.0.1:8001;\n    server 127.0.0.1:8002;\n    server 127.0.0.1:8003;\n}\n# 要定义在http模块之内，server模块之外\n  ```\n\n``` nginx\nserver {\n         listen 80 ;\n        location / {\n            proxy_pass_header Server;\n            proxy_set_header Host $http_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Scheme $scheme;\n            proxy_pass http://tomcats;\n           \n        }\n}    \n                                                              \n```\n\n## 设置缓存\n\n``` nginx\nproxy_cache_path /opt/app/cache levels=1:2 \nkeys_zone=lzz_cache:10m max_size=10g inactive=60m use_temp_path=off;\n\nserver {\n\n   location / {\n     expires      1h;\n     proxy_pass_header Server;\n     proxy_set_header Host $http_host;\n     proxy_set_header X-Real-IP $remote_addr;\n     proxy_set_header X-Scheme $scheme;\n     proxy_pass http://tomcats;\n     proxy_cache lzz_cache;\n     proxy_cache_valid 200 304 1m;\n     proxy_cache_valid any 10m;\n     proxy_cache_key $host$uri$is_args$args;\n     add_header Nginx-Cache \"$upstream_cache_status\";\n     proxy_next_upstream error timeout invalid_header http_500http_502 http_503 http_504;\n\n  }\n\n}\n\n```\n\n \n \n \n \n \n","source":"_posts/nginx/Nginx代理与缓存.md","raw":"---\ntitle: Nginx代理设置反向代理与缓存\ntags:\n  - nginx\n  - proxy\n  - cache\ncategories: Nginx\nabbrlink: 592ccd47\ndate: 2021-09-10 20:27:20\n---\n ## 反向代理\n\n``` nginx\nupstream tomcats {\n    server 127.0.0.1:8001;\n    server 127.0.0.1:8002;\n    server 127.0.0.1:8003;\n}\n# 要定义在http模块之内，server模块之外\n  ```\n\n``` nginx\nserver {\n         listen 80 ;\n        location / {\n            proxy_pass_header Server;\n            proxy_set_header Host $http_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Scheme $scheme;\n            proxy_pass http://tomcats;\n           \n        }\n}    \n                                                              \n```\n\n## 设置缓存\n\n``` nginx\nproxy_cache_path /opt/app/cache levels=1:2 \nkeys_zone=lzz_cache:10m max_size=10g inactive=60m use_temp_path=off;\n\nserver {\n\n   location / {\n     expires      1h;\n     proxy_pass_header Server;\n     proxy_set_header Host $http_host;\n     proxy_set_header X-Real-IP $remote_addr;\n     proxy_set_header X-Scheme $scheme;\n     proxy_pass http://tomcats;\n     proxy_cache lzz_cache;\n     proxy_cache_valid 200 304 1m;\n     proxy_cache_valid any 10m;\n     proxy_cache_key $host$uri$is_args$args;\n     add_header Nginx-Cache \"$upstream_cache_status\";\n     proxy_next_upstream error timeout invalid_header http_500http_502 http_503 http_504;\n\n  }\n\n}\n\n```\n\n \n \n \n \n \n","slug":"nginx/Nginx代理与缓存","published":1,"updated":"2021-09-16T08:48:58.119Z","_id":"cktmoybkg0015kotr021d7gvx","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"反向代理\"><a href=\"#反向代理\" class=\"headerlink\" title=\"反向代理\"></a>反向代理</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">upstream</span> tomcats &#123;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8001</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8002</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8003</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\"># 要定义在http模块之内，server模块之外</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">         <span class=\"attribute\">listen</span> <span class=\"number\">80</span> ;</span><br><span class=\"line\">        <span class=\"attribute\">location</span> / &#123;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_pass_header</span> Server;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_set_header</span> Host $http_host;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_set_header</span> X-Scheme $scheme;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_pass</span> http://tomcats;</span><br><span class=\"line\">           </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;    </span><br><span class=\"line\">                                                              </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置缓存\"><a href=\"#设置缓存\" class=\"headerlink\" title=\"设置缓存\"></a>设置缓存</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">proxy_cache_path</span> /opt/app/cache levels=<span class=\"number\">1</span>:<span class=\"number\">2</span> </span><br><span class=\"line\">keys_zone=lzz_cache:<span class=\"number\">10m</span> max_size=<span class=\"number\">10g</span> inactive=<span class=\"number\">60m</span> use_temp_path=<span class=\"literal\">off</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"attribute\">location</span> / &#123;</span><br><span class=\"line\">     <span class=\"attribute\">expires</span>      <span class=\"number\">1h</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_pass_header</span> Server;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_set_header</span> Host $http_host;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_set_header</span> X-Scheme $scheme;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_pass</span> http://tomcats;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache</span> lzz_cache;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache_valid</span> <span class=\"number\">200</span> <span class=\"number\">304</span> <span class=\"number\">1m</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache_valid</span> any <span class=\"number\">10m</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache_key</span> $host$uri$is_args$args;</span><br><span class=\"line\">     <span class=\"attribute\">add_header</span> Nginx-Cache <span class=\"string\">&quot;$upstream_cache_status&quot;</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_next_upstream</span> <span class=\"literal\">error</span> timeout invalid_header http_500http_502 http_503 http_504;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"反向代理\"><a href=\"#反向代理\" class=\"headerlink\" title=\"反向代理\"></a>反向代理</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">upstream</span> tomcats &#123;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8001</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8002</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8003</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\"># 要定义在http模块之内，server模块之外</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">         <span class=\"attribute\">listen</span> <span class=\"number\">80</span> ;</span><br><span class=\"line\">        <span class=\"attribute\">location</span> / &#123;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_pass_header</span> Server;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_set_header</span> Host $http_host;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_set_header</span> X-Scheme $scheme;</span><br><span class=\"line\">            <span class=\"attribute\">proxy_pass</span> http://tomcats;</span><br><span class=\"line\">           </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;    </span><br><span class=\"line\">                                                              </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置缓存\"><a href=\"#设置缓存\" class=\"headerlink\" title=\"设置缓存\"></a>设置缓存</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">proxy_cache_path</span> /opt/app/cache levels=<span class=\"number\">1</span>:<span class=\"number\">2</span> </span><br><span class=\"line\">keys_zone=lzz_cache:<span class=\"number\">10m</span> max_size=<span class=\"number\">10g</span> inactive=<span class=\"number\">60m</span> use_temp_path=<span class=\"literal\">off</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"attribute\">location</span> / &#123;</span><br><span class=\"line\">     <span class=\"attribute\">expires</span>      <span class=\"number\">1h</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_pass_header</span> Server;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_set_header</span> Host $http_host;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_set_header</span> X-Scheme $scheme;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_pass</span> http://tomcats;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache</span> lzz_cache;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache_valid</span> <span class=\"number\">200</span> <span class=\"number\">304</span> <span class=\"number\">1m</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache_valid</span> any <span class=\"number\">10m</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_cache_key</span> $host$uri$is_args$args;</span><br><span class=\"line\">     <span class=\"attribute\">add_header</span> Nginx-Cache <span class=\"string\">&quot;$upstream_cache_status&quot;</span>;</span><br><span class=\"line\">     <span class=\"attribute\">proxy_next_upstream</span> <span class=\"literal\">error</span> timeout invalid_header http_500http_502 http_503 http_504;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"Nginx配合后台服务控制文件的下载与预览","abbrlink":"71eca8f7","date":"2021-09-10T13:35:10.000Z","_content":"\n# 背景\n最近接到一个项目，有这样一个需求，需要对部分文件的下载与预览增加权限控制，只允许会员用户使用，找了一些资料之后最后决定使用`Nginx`配合`Java`服务来实现这个功能。\n> 只针对一些业务文件采用此方式，网页中的静态文件尽量不要使用这种方法，以免增加服务器的负担\n\n#  配置Nginx\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210328130245299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n配置中使用`Nginx`开启了一个端口为`8086`的文件服务器,配置中增加了`internal`属性，表示文件只允许内部访问。在接收到请求后代理转发给了端口为`8080`的`Java`权限认证服务。\n\n这些基本上就是`Nginx`的全部配置了，不是很复杂，配置完成之后记得重启，确保生效。\n\n# Java服务\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/2021032813145673.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n后台使用`SpringBoot`搭建服务，在认证通过之后通过设置`ResponseHeader`通知`Nginx`是否返回请求的文件。\n\n* Content-Type\n* Content-Disposition\n*  X-Accel-Redirect\n> 三个主要的header\n> \n更多的[header](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers)介绍\n\n[完整代码](https://github.com/lizeze/note/issues/43)","source":"_posts/nginx/Nginx配合后台服务控制文件的下载与预览.md","raw":"---\ntitle: Nginx配合后台服务控制文件的下载与预览\ntags:\n  - nginx\n  - java\ncategories: Java\nabbrlink: 71eca8f7\ndate: 2021-09-10 21:35:10\n---\n\n# 背景\n最近接到一个项目，有这样一个需求，需要对部分文件的下载与预览增加权限控制，只允许会员用户使用，找了一些资料之后最后决定使用`Nginx`配合`Java`服务来实现这个功能。\n> 只针对一些业务文件采用此方式，网页中的静态文件尽量不要使用这种方法，以免增加服务器的负担\n\n#  配置Nginx\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210328130245299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n配置中使用`Nginx`开启了一个端口为`8086`的文件服务器,配置中增加了`internal`属性，表示文件只允许内部访问。在接收到请求后代理转发给了端口为`8080`的`Java`权限认证服务。\n\n这些基本上就是`Nginx`的全部配置了，不是很复杂，配置完成之后记得重启，确保生效。\n\n# Java服务\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/2021032813145673.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n后台使用`SpringBoot`搭建服务，在认证通过之后通过设置`ResponseHeader`通知`Nginx`是否返回请求的文件。\n\n* Content-Type\n* Content-Disposition\n*  X-Accel-Redirect\n> 三个主要的header\n> \n更多的[header](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers)介绍\n\n[完整代码](https://github.com/lizeze/note/issues/43)","slug":"nginx/Nginx配合后台服务控制文件的下载与预览","published":1,"updated":"2021-09-16T08:48:58.121Z","_id":"cktmoybkh0019kotr3o2ihus7","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>最近接到一个项目，有这样一个需求，需要对部分文件的下载与预览增加权限控制，只允许会员用户使用，找了一些资料之后最后决定使用<code>Nginx</code>配合<code>Java</code>服务来实现这个功能。</p>\n<blockquote>\n<p>只针对一些业务文件采用此方式，网页中的静态文件尽量不要使用这种方法，以免增加服务器的负担</p>\n</blockquote>\n<h1 id=\"配置Nginx\"><a href=\"#配置Nginx\" class=\"headerlink\" title=\"配置Nginx\"></a>配置Nginx</h1><p><img src=\"https://img-blog.csdnimg.cn/20210328130245299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>配置中使用<code>Nginx</code>开启了一个端口为<code>8086</code>的文件服务器,配置中增加了<code>internal</code>属性，表示文件只允许内部访问。在接收到请求后代理转发给了端口为<code>8080</code>的<code>Java</code>权限认证服务。</p>\n<p>这些基本上就是<code>Nginx</code>的全部配置了，不是很复杂，配置完成之后记得重启，确保生效。</p>\n<h1 id=\"Java服务\"><a href=\"#Java服务\" class=\"headerlink\" title=\"Java服务\"></a>Java服务</h1><p><img src=\"https://img-blog.csdnimg.cn/2021032813145673.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>后台使用<code>SpringBoot</code>搭建服务，在认证通过之后通过设置<code>ResponseHeader</code>通知<code>Nginx</code>是否返回请求的文件。</p>\n<ul>\n<li>Content-Type</li>\n<li>Content-Disposition</li>\n<li> X-Accel-Redirect<blockquote>\n<p>三个主要的header</p>\n</blockquote>\n更多的<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers\">header</a>介绍</li>\n</ul>\n<p><a href=\"https://github.com/lizeze/note/issues/43\">完整代码</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>最近接到一个项目，有这样一个需求，需要对部分文件的下载与预览增加权限控制，只允许会员用户使用，找了一些资料之后最后决定使用<code>Nginx</code>配合<code>Java</code>服务来实现这个功能。</p>\n<blockquote>\n<p>只针对一些业务文件采用此方式，网页中的静态文件尽量不要使用这种方法，以免增加服务器的负担</p>\n</blockquote>\n<h1 id=\"配置Nginx\"><a href=\"#配置Nginx\" class=\"headerlink\" title=\"配置Nginx\"></a>配置Nginx</h1><p><img src=\"https://img-blog.csdnimg.cn/20210328130245299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>配置中使用<code>Nginx</code>开启了一个端口为<code>8086</code>的文件服务器,配置中增加了<code>internal</code>属性，表示文件只允许内部访问。在接收到请求后代理转发给了端口为<code>8080</code>的<code>Java</code>权限认证服务。</p>\n<p>这些基本上就是<code>Nginx</code>的全部配置了，不是很复杂，配置完成之后记得重启，确保生效。</p>\n<h1 id=\"Java服务\"><a href=\"#Java服务\" class=\"headerlink\" title=\"Java服务\"></a>Java服务</h1><p><img src=\"https://img-blog.csdnimg.cn/2021032813145673.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>后台使用<code>SpringBoot</code>搭建服务，在认证通过之后通过设置<code>ResponseHeader</code>通知<code>Nginx</code>是否返回请求的文件。</p>\n<ul>\n<li>Content-Type</li>\n<li>Content-Disposition</li>\n<li> X-Accel-Redirect<blockquote>\n<p>三个主要的header</p>\n</blockquote>\n更多的<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers\">header</a>介绍</li>\n</ul>\n<p><a href=\"https://github.com/lizeze/note/issues/43\">完整代码</a></p>\n"},{"title":"linux安装Nginx","abbrlink":"64d53267","date":"2021-09-10T12:29:22.000Z","_content":"```shell\n$ sudo yum install -y epel-release\n$ sudo yum install -y nginx\n```\n\n安装成功后，默认的网站目录为： /usr/share/nginx/html\n\n默认的配置文件为：/etc/nginx/nginx.conf\n\n自定义配置文件目录为: /etc/nginx/conf.d/\n\n# 开启端口\n```shell\n$ sudo firewall-cmd --permanent --zone=public --add-service=http\n$ sudo firewall-cmd --permanent --zone=public --add-service=https\n$ sudo firewall-cmd --reload\n```\n> 开启80和443端口\n# 常用操作\n\n 启动Nginx\n ```shell\n $ systemctl start nginx\n ```\n 停止Nginx\n\n ```shell\n $ systemctl stop nginx\n ```\n 重启Nginx\n ```shell\n$ systemctl restart nginx\n ```\n\n 查看Nginx状态\n\n ```shell\n systemctl status nginx\n ```\n\n 设置开机启动\n ```shell\n $ systemctl enable nginx\n ```\n\n禁止开机启动\n```shell\n$ systemctl disable nginx\n```","source":"_posts/nginx/linux安装Nginx.md","raw":"---\ntitle: linux安装Nginx\ntags:\n  - nginx\n  - linux\ncategories: Nginx\nabbrlink: 64d53267\ndate: 2021-09-10 20:29:22\n---\n```shell\n$ sudo yum install -y epel-release\n$ sudo yum install -y nginx\n```\n\n安装成功后，默认的网站目录为： /usr/share/nginx/html\n\n默认的配置文件为：/etc/nginx/nginx.conf\n\n自定义配置文件目录为: /etc/nginx/conf.d/\n\n# 开启端口\n```shell\n$ sudo firewall-cmd --permanent --zone=public --add-service=http\n$ sudo firewall-cmd --permanent --zone=public --add-service=https\n$ sudo firewall-cmd --reload\n```\n> 开启80和443端口\n# 常用操作\n\n 启动Nginx\n ```shell\n $ systemctl start nginx\n ```\n 停止Nginx\n\n ```shell\n $ systemctl stop nginx\n ```\n 重启Nginx\n ```shell\n$ systemctl restart nginx\n ```\n\n 查看Nginx状态\n\n ```shell\n systemctl status nginx\n ```\n\n 设置开机启动\n ```shell\n $ systemctl enable nginx\n ```\n\n禁止开机启动\n```shell\n$ systemctl disable nginx\n```","slug":"nginx/linux安装Nginx","published":1,"updated":"2021-09-16T08:48:58.123Z","_id":"cktmoybki001ckotrgqae5dxm","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo yum install -y epel-release</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo yum install -y nginx</span></span><br></pre></td></tr></table></figure>\n\n<p>安装成功后，默认的网站目录为： /usr/share/nginx/html</p>\n<p>默认的配置文件为：/etc/nginx/nginx.conf</p>\n<p>自定义配置文件目录为: /etc/nginx/conf.d/</p>\n<h1 id=\"开启端口\"><a href=\"#开启端口\" class=\"headerlink\" title=\"开启端口\"></a>开启端口</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo firewall-cmd --permanent --zone=public --add-service=http</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo firewall-cmd --permanent --zone=public --add-service=https</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo firewall-cmd --reload</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>开启80和443端口</p>\n</blockquote>\n<h1 id=\"常用操作\"><a href=\"#常用操作\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h1><p> 启动Nginx<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl start nginx</span></span><br></pre></td></tr></table></figure><br> 停止Nginx</p>\n <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl stop nginx</span></span><br></pre></td></tr></table></figure>\n<p> 重启Nginx<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl restart nginx</span></span><br></pre></td></tr></table></figure></p>\n<p> 查看Nginx状态</p>\n <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status nginx</span><br></pre></td></tr></table></figure>\n\n<p> 设置开机启动<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl <span class=\"built_in\">enable</span> nginx</span></span><br></pre></td></tr></table></figure></p>\n<p>禁止开机启动</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl <span class=\"built_in\">disable</span> nginx</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo yum install -y epel-release</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo yum install -y nginx</span></span><br></pre></td></tr></table></figure>\n\n<p>安装成功后，默认的网站目录为： /usr/share/nginx/html</p>\n<p>默认的配置文件为：/etc/nginx/nginx.conf</p>\n<p>自定义配置文件目录为: /etc/nginx/conf.d/</p>\n<h1 id=\"开启端口\"><a href=\"#开启端口\" class=\"headerlink\" title=\"开启端口\"></a>开启端口</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo firewall-cmd --permanent --zone=public --add-service=http</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo firewall-cmd --permanent --zone=public --add-service=https</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo firewall-cmd --reload</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>开启80和443端口</p>\n</blockquote>\n<h1 id=\"常用操作\"><a href=\"#常用操作\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h1><p> 启动Nginx<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl start nginx</span></span><br></pre></td></tr></table></figure><br> 停止Nginx</p>\n <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl stop nginx</span></span><br></pre></td></tr></table></figure>\n<p> 重启Nginx<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl restart nginx</span></span><br></pre></td></tr></table></figure></p>\n<p> 查看Nginx状态</p>\n <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status nginx</span><br></pre></td></tr></table></figure>\n\n<p> 设置开机启动<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl <span class=\"built_in\">enable</span> nginx</span></span><br></pre></td></tr></table></figure></p>\n<p>禁止开机启动</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> systemctl <span class=\"built_in\">disable</span> nginx</span></span><br></pre></td></tr></table></figure>"},{"title":"ssl证书结合Nginx搭建https站点(免费证书)","abbrlink":"915db80e","date":"2021-09-10T12:30:49.000Z","_content":"#   创建ssl证书\n\n \n\n``` shell\n $ mkdir -p /etc/nginx/ssl\n $ cd /etc/nginx/ssl\n $ openssl genrsa -idea -out server.key 1024\n $ openssl req -new -key server.key -out server.csr\n $ openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt\n ```\n\n  > 注意要加过期时间，默认的有效期很短\n\n# Nginx 配置\n\n \n\n``` shell\n  $ cd /etc/nginx/conf.d\n  $ vim https.conf\n ```\n\n  输入以下内容\n``` nginx\n     server {\n        listen       443 ssl http2 default_server;\n        listen       [::]:443 ssl http2 default_server;\n        server_name  _;\n        root         /usr/share/nginx/html;\n        ssl_certificate \"/etc/nginx/ssl/server.crt\";\n        ssl_certificate_key \"/etc/nginx/ssl/server.key\";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers PROFILE=SYSTEM;\n        ssl_prefer_server_ciphers on;\n        location / {\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n        }\n   ```\n  保存退出并重启`nginx`\n\n  ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d265c343d89042e4bca60e58e6021324~tplv-k3u1fbpfcp-watermark.image)\n\n   因为我们的证书没有给相关机构认证，所以还是提示不安全，但是不影响我们测试使用\n \n\n 如果想部署个人服务器的话可以在各大服务器厂商申请免费的ssl证书，也是很方便的，前提是要有自己的域名。\n\n 我是在[腾讯云](https://console.cloud.tencent.com/ssl)申请的免费`ssl`证书。按照官网的提示操作很简单的。\n\n  ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84c40fa580a4a1fbc14bcca2c5433a4~tplv-k3u1fbpfcp-watermark.image)\n","source":"_posts/nginx/ssl证书结合Nginx搭建https站点(免费证书).md","raw":"---\ntitle: ssl证书结合Nginx搭建https站点(免费证书)\ntags:\n  - https\n  - nginx\n  - linux\ncategories: Nginx\nabbrlink: 915db80e\ndate: 2021-09-10 20:30:49\n---\n#   创建ssl证书\n\n \n\n``` shell\n $ mkdir -p /etc/nginx/ssl\n $ cd /etc/nginx/ssl\n $ openssl genrsa -idea -out server.key 1024\n $ openssl req -new -key server.key -out server.csr\n $ openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt\n ```\n\n  > 注意要加过期时间，默认的有效期很短\n\n# Nginx 配置\n\n \n\n``` shell\n  $ cd /etc/nginx/conf.d\n  $ vim https.conf\n ```\n\n  输入以下内容\n``` nginx\n     server {\n        listen       443 ssl http2 default_server;\n        listen       [::]:443 ssl http2 default_server;\n        server_name  _;\n        root         /usr/share/nginx/html;\n        ssl_certificate \"/etc/nginx/ssl/server.crt\";\n        ssl_certificate_key \"/etc/nginx/ssl/server.key\";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers PROFILE=SYSTEM;\n        ssl_prefer_server_ciphers on;\n        location / {\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n        }\n   ```\n  保存退出并重启`nginx`\n\n  ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d265c343d89042e4bca60e58e6021324~tplv-k3u1fbpfcp-watermark.image)\n\n   因为我们的证书没有给相关机构认证，所以还是提示不安全，但是不影响我们测试使用\n \n\n 如果想部署个人服务器的话可以在各大服务器厂商申请免费的ssl证书，也是很方便的，前提是要有自己的域名。\n\n 我是在[腾讯云](https://console.cloud.tencent.com/ssl)申请的免费`ssl`证书。按照官网的提示操作很简单的。\n\n  ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84c40fa580a4a1fbc14bcca2c5433a4~tplv-k3u1fbpfcp-watermark.image)\n","slug":"nginx/ssl证书结合Nginx搭建https站点(免费证书)","published":1,"updated":"2021-09-16T08:48:58.126Z","_id":"cktmoybkj001gkotrbo7mcpns","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"创建ssl证书\"><a href=\"#创建ssl证书\" class=\"headerlink\" title=\"创建ssl证书\"></a>创建ssl证书</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir -p /etc/nginx/ssl</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/nginx/ssl</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> openssl genrsa -idea -out server.key 1024</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> openssl req -new -key server.key -out server.csr</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> openssl x509 -req -days 3650 -<span class=\"keyword\">in</span> server.csr -signkey server.key -out server.crt</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意要加过期时间，默认的有效期很短</p>\n</blockquote>\n<h1 id=\"Nginx-配置\"><a href=\"#Nginx-配置\" class=\"headerlink\" title=\"Nginx 配置\"></a>Nginx 配置</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/nginx/conf.d</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim https.conf</span></span><br></pre></td></tr></table></figure>\n\n<p>  输入以下内容</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">   <span class=\"attribute\">listen</span>       <span class=\"number\">443</span> ssl http2 default_server;</span><br><span class=\"line\">   <span class=\"attribute\">listen</span>       [::]:<span class=\"number\">443</span> ssl http2 default_server;</span><br><span class=\"line\">   <span class=\"attribute\">server_name</span>  _;</span><br><span class=\"line\">   <span class=\"attribute\">root</span>         /usr/share/nginx/html;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_certificate</span> <span class=\"string\">&quot;/etc/nginx/ssl/server.crt&quot;</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_certificate_key</span> <span class=\"string\">&quot;/etc/nginx/ssl/server.key&quot;</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_session_cache</span> shared:SSL:<span class=\"number\">1m</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_session_timeout</span>  <span class=\"number\">10m</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_ciphers</span> PROFILE=SYSTEM;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_prefer_server_ciphers</span> <span class=\"literal\">on</span>;</span><br><span class=\"line\">   <span class=\"attribute\">location</span> / &#123;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"attribute\">error_page</span> <span class=\"number\">404</span> /<span class=\"number\">404</span>.html;</span><br><span class=\"line\">       <span class=\"attribute\">location</span> = /40x.html &#123;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"attribute\">error_page</span> <span class=\"number\">500</span> <span class=\"number\">502</span> <span class=\"number\">503</span> <span class=\"number\">504</span> /50x.html;</span><br><span class=\"line\">       <span class=\"attribute\">location</span> = /50x.html &#123;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>  保存退出并重启<code>nginx</code></p>\n<p>  <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d265c343d89042e4bca60e58e6021324~tplv-k3u1fbpfcp-watermark.image\"></p>\n<p>   因为我们的证书没有给相关机构认证，所以还是提示不安全，但是不影响我们测试使用</p>\n<p> 如果想部署个人服务器的话可以在各大服务器厂商申请免费的ssl证书，也是很方便的，前提是要有自己的域名。</p>\n<p> 我是在<a href=\"https://console.cloud.tencent.com/ssl\">腾讯云</a>申请的免费<code>ssl</code>证书。按照官网的提示操作很简单的。</p>\n<p>  <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84c40fa580a4a1fbc14bcca2c5433a4~tplv-k3u1fbpfcp-watermark.image\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"创建ssl证书\"><a href=\"#创建ssl证书\" class=\"headerlink\" title=\"创建ssl证书\"></a>创建ssl证书</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir -p /etc/nginx/ssl</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/nginx/ssl</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> openssl genrsa -idea -out server.key 1024</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> openssl req -new -key server.key -out server.csr</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> openssl x509 -req -days 3650 -<span class=\"keyword\">in</span> server.csr -signkey server.key -out server.crt</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意要加过期时间，默认的有效期很短</p>\n</blockquote>\n<h1 id=\"Nginx-配置\"><a href=\"#Nginx-配置\" class=\"headerlink\" title=\"Nginx 配置\"></a>Nginx 配置</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/nginx/conf.d</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim https.conf</span></span><br></pre></td></tr></table></figure>\n\n<p>  输入以下内容</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">   <span class=\"attribute\">listen</span>       <span class=\"number\">443</span> ssl http2 default_server;</span><br><span class=\"line\">   <span class=\"attribute\">listen</span>       [::]:<span class=\"number\">443</span> ssl http2 default_server;</span><br><span class=\"line\">   <span class=\"attribute\">server_name</span>  _;</span><br><span class=\"line\">   <span class=\"attribute\">root</span>         /usr/share/nginx/html;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_certificate</span> <span class=\"string\">&quot;/etc/nginx/ssl/server.crt&quot;</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_certificate_key</span> <span class=\"string\">&quot;/etc/nginx/ssl/server.key&quot;</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_session_cache</span> shared:SSL:<span class=\"number\">1m</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_session_timeout</span>  <span class=\"number\">10m</span>;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_ciphers</span> PROFILE=SYSTEM;</span><br><span class=\"line\">   <span class=\"attribute\">ssl_prefer_server_ciphers</span> <span class=\"literal\">on</span>;</span><br><span class=\"line\">   <span class=\"attribute\">location</span> / &#123;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"attribute\">error_page</span> <span class=\"number\">404</span> /<span class=\"number\">404</span>.html;</span><br><span class=\"line\">       <span class=\"attribute\">location</span> = /40x.html &#123;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"attribute\">error_page</span> <span class=\"number\">500</span> <span class=\"number\">502</span> <span class=\"number\">503</span> <span class=\"number\">504</span> /50x.html;</span><br><span class=\"line\">       <span class=\"attribute\">location</span> = /50x.html &#123;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>  保存退出并重启<code>nginx</code></p>\n<p>  <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d265c343d89042e4bca60e58e6021324~tplv-k3u1fbpfcp-watermark.image\"></p>\n<p>   因为我们的证书没有给相关机构认证，所以还是提示不安全，但是不影响我们测试使用</p>\n<p> 如果想部署个人服务器的话可以在各大服务器厂商申请免费的ssl证书，也是很方便的，前提是要有自己的域名。</p>\n<p> 我是在<a href=\"https://console.cloud.tencent.com/ssl\">腾讯云</a>申请的免费<code>ssl</code>证书。按照官网的提示操作很简单的。</p>\n<p>  <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84c40fa580a4a1fbc14bcca2c5433a4~tplv-k3u1fbpfcp-watermark.image\"></p>\n"},{"title":"nvm安装node","abbrlink":"6875ed76","date":"2021-09-10T12:32:36.000Z","_content":"\n## 安装\n ### 使用`nvm`安装\n\n  ```shell\n  $ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash\n  ```\n  >提示内容：\n=> Downloading nvm as script to '/home/dhbm/.nvm'\n=> Appending nvm source string to /home/dhbm/.bashrc\n=> Appending bash_completion source string to /home/dhbm/.bashrc\n=> Close and reopen your terminal to start using nvm or run the following to use it now:\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && . \"$NVM_DIR/nvm.sh\" # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] && . \"$NVM_DIR/bash_completion\" # This loads nvm bash_completion\n\n按照提示，直接 copy 粘贴以上内容\n```shell\nexport NVM_DIR=\"$HOME/.nvm\"\n\t\t[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n\t\t[ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n```\n\n```shell\n$ nvm install node # 安装nodejs\n$ npm config set registry http://registry.npm.taobao.org/ # 设置淘宝镜像\n```","source":"_posts/node/nvm安装node.md","raw":"---\ntitle: nvm安装node\ntags:\n  - nvm\n  - node\ncategories: 工具\nabbrlink: 6875ed76\ndate: 2021-09-10 20:32:36\n---\n\n## 安装\n ### 使用`nvm`安装\n\n  ```shell\n  $ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash\n  ```\n  >提示内容：\n=> Downloading nvm as script to '/home/dhbm/.nvm'\n=> Appending nvm source string to /home/dhbm/.bashrc\n=> Appending bash_completion source string to /home/dhbm/.bashrc\n=> Close and reopen your terminal to start using nvm or run the following to use it now:\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && . \"$NVM_DIR/nvm.sh\" # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] && . \"$NVM_DIR/bash_completion\" # This loads nvm bash_completion\n\n按照提示，直接 copy 粘贴以上内容\n```shell\nexport NVM_DIR=\"$HOME/.nvm\"\n\t\t[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n\t\t[ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n```\n\n```shell\n$ nvm install node # 安装nodejs\n$ npm config set registry http://registry.npm.taobao.org/ # 设置淘宝镜像\n```","slug":"node/nvm安装node","published":1,"updated":"2021-09-16T08:48:58.129Z","_id":"cktmoybkj001hkotr7jb5fdqg","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"使用nvm安装\"><a href=\"#使用nvm安装\" class=\"headerlink\" title=\"使用nvm安装\"></a>使用<code>nvm</code>安装</h3>  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>提示内容：<br>=&gt; Downloading nvm as script to ‘/home/dhbm/.nvm’<br>=&gt; Appending nvm source string to /home/dhbm/.bashrc<br>=&gt; Appending bash_completion source string to /home/dhbm/.bashrc<br>=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:<br>export NVM_DIR=”$HOME/.nvm”<br>[ -s “$NVM_DIR/nvm.sh” ] &amp;&amp; . “$NVM_DIR/nvm.sh” # This loads nvm<br>[ -s “$NVM_DIR/bash_completion” ] &amp;&amp; . “$NVM_DIR/bash_completion” # This loads nvm bash_completion</p>\n</blockquote>\n<p>按照提示，直接 copy 粘贴以上内容</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NVM_DIR=&quot;$HOME/.nvm&quot;</span><br><span class=\"line\">\t\t[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm</span><br><span class=\"line\">\t\t[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> nvm install node <span class=\"comment\"># 安装nodejs</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm config <span class=\"built_in\">set</span> registry http://registry.npm.taobao.org/ <span class=\"comment\"># 设置淘宝镜像</span></span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"使用nvm安装\"><a href=\"#使用nvm安装\" class=\"headerlink\" title=\"使用nvm安装\"></a>使用<code>nvm</code>安装</h3>  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>提示内容：<br>=&gt; Downloading nvm as script to ‘/home/dhbm/.nvm’<br>=&gt; Appending nvm source string to /home/dhbm/.bashrc<br>=&gt; Appending bash_completion source string to /home/dhbm/.bashrc<br>=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:<br>export NVM_DIR=”$HOME/.nvm”<br>[ -s “$NVM_DIR/nvm.sh” ] &amp;&amp; . “$NVM_DIR/nvm.sh” # This loads nvm<br>[ -s “$NVM_DIR/bash_completion” ] &amp;&amp; . “$NVM_DIR/bash_completion” # This loads nvm bash_completion</p>\n</blockquote>\n<p>按照提示，直接 copy 粘贴以上内容</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NVM_DIR=&quot;$HOME/.nvm&quot;</span><br><span class=\"line\">\t\t[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm</span><br><span class=\"line\">\t\t[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> nvm install node <span class=\"comment\"># 安装nodejs</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm config <span class=\"built_in\">set</span> registry http://registry.npm.taobao.org/ <span class=\"comment\"># 设置淘宝镜像</span></span></span><br></pre></td></tr></table></figure>"},{"title":"使用PhantomJS在服务端生成图片","abbrlink":"32db227c","date":"2021-09-12T05:23:22.000Z","_content":"\n# 概述\n  有一个这样的需求，就是把页面上的`Echart`图表转换成图片保存到`word`中。\n  \n# 环境准备\n  安装PhantomJS\n  ```\n  npm install phantomjs -g\n  ```\n  使用下面的命令，查看是否安装成功\n  ```\n  phantomjs --version\n  ```\n  # 实现\n  ## webpage\n   webpage模块是PhantomJS的核心模块，用于网页操作。\n   ```javascript\n  var webPage = require('webpage');\n  var page = webPage.create();\n   ```\n \n# open()\nopen方法用于打开具体的网页。\n```\nvar page = require('webpage').create();\npage.open('http://127.0.0.1:8080/index.html', function (status) {\n page.render('google_home.png', { format: 'png' });\n  phantom.exit();\n});\n```\n\n# 测试\n 执行\n```\nphantomjs  index.js\n```\n\n![](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44d7ef2bf3192~tplv-t2oaga2asx-image.image)\n\n# 参数\n\n```\nvar webPage = require('webpage');\nvar page = webPage.create();\nvar system = require('system');\nvar list = (system.args + \"\").split(',');\n```\n\n\n![](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44da62d269ca4~tplv-t2oaga2asx-image.image)\n\n[Demo](https://github.com/lizeze/phantomjs-demo)\n","source":"_posts/node/使用PhantomJS在服务端生成图片.md","raw":"---\ntitle: 使用PhantomJS在服务端生成图片\ntags: node\nabbrlink: 32db227c\ndate: 2021-09-12 13:23:22\n---\n\n# 概述\n  有一个这样的需求，就是把页面上的`Echart`图表转换成图片保存到`word`中。\n  \n# 环境准备\n  安装PhantomJS\n  ```\n  npm install phantomjs -g\n  ```\n  使用下面的命令，查看是否安装成功\n  ```\n  phantomjs --version\n  ```\n  # 实现\n  ## webpage\n   webpage模块是PhantomJS的核心模块，用于网页操作。\n   ```javascript\n  var webPage = require('webpage');\n  var page = webPage.create();\n   ```\n \n# open()\nopen方法用于打开具体的网页。\n```\nvar page = require('webpage').create();\npage.open('http://127.0.0.1:8080/index.html', function (status) {\n page.render('google_home.png', { format: 'png' });\n  phantom.exit();\n});\n```\n\n# 测试\n 执行\n```\nphantomjs  index.js\n```\n\n![](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44d7ef2bf3192~tplv-t2oaga2asx-image.image)\n\n# 参数\n\n```\nvar webPage = require('webpage');\nvar page = webPage.create();\nvar system = require('system');\nvar list = (system.args + \"\").split(',');\n```\n\n\n![](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44da62d269ca4~tplv-t2oaga2asx-image.image)\n\n[Demo](https://github.com/lizeze/phantomjs-demo)\n","slug":"node/使用PhantomJS在服务端生成图片","published":1,"updated":"2021-09-16T08:48:58.130Z","_id":"cktmoybkk001lkotrflvq3nhi","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h1><p>  有一个这样的需求，就是把页面上的<code>Echart</code>图表转换成图片保存到<code>word</code>中。</p>\n<h1 id=\"环境准备\"><a href=\"#环境准备\" class=\"headerlink\" title=\"环境准备\"></a>环境准备</h1><p>  安装PhantomJS<br>  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install phantomjs -g</span><br></pre></td></tr></table></figure><br>  使用下面的命令，查看是否安装成功<br>  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phantomjs --version</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h1><h2 id=\"webpage\"><a href=\"#webpage\" class=\"headerlink\" title=\"webpage\"></a>webpage</h2><p>   webpage模块是PhantomJS的核心模块，用于网页操作。<br>   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> webPage = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpage&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> page = webPage.create();</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"open\"><a href=\"#open\" class=\"headerlink\" title=\"open()\"></a>open()</h1><p>open方法用于打开具体的网页。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var page = require(&#x27;webpage&#x27;).create();</span><br><span class=\"line\">page.open(&#x27;http://127.0.0.1:8080/index.html&#x27;, function (status) &#123;</span><br><span class=\"line\"> page.render(&#x27;google_home.png&#x27;, &#123; format: &#x27;png&#x27; &#125;);</span><br><span class=\"line\">  phantom.exit();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h1><p> 执行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phantomjs  index.js</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44d7ef2bf3192~tplv-t2oaga2asx-image.image\"></p>\n<h1 id=\"参数\"><a href=\"#参数\" class=\"headerlink\" title=\"参数\"></a>参数</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var webPage = require(&#x27;webpage&#x27;);</span><br><span class=\"line\">var page = webPage.create();</span><br><span class=\"line\">var system = require(&#x27;system&#x27;);</span><br><span class=\"line\">var list = (system.args + &quot;&quot;).split(&#x27;,&#x27;);</span><br></pre></td></tr></table></figure>\n\n\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44da62d269ca4~tplv-t2oaga2asx-image.image\"></p>\n<p><a href=\"https://github.com/lizeze/phantomjs-demo\">Demo</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h1><p>  有一个这样的需求，就是把页面上的<code>Echart</code>图表转换成图片保存到<code>word</code>中。</p>\n<h1 id=\"环境准备\"><a href=\"#环境准备\" class=\"headerlink\" title=\"环境准备\"></a>环境准备</h1><p>  安装PhantomJS<br>  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install phantomjs -g</span><br></pre></td></tr></table></figure><br>  使用下面的命令，查看是否安装成功<br>  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phantomjs --version</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h1><h2 id=\"webpage\"><a href=\"#webpage\" class=\"headerlink\" title=\"webpage\"></a>webpage</h2><p>   webpage模块是PhantomJS的核心模块，用于网页操作。<br>   <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> webPage = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpage&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> page = webPage.create();</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"open\"><a href=\"#open\" class=\"headerlink\" title=\"open()\"></a>open()</h1><p>open方法用于打开具体的网页。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var page = require(&#x27;webpage&#x27;).create();</span><br><span class=\"line\">page.open(&#x27;http://127.0.0.1:8080/index.html&#x27;, function (status) &#123;</span><br><span class=\"line\"> page.render(&#x27;google_home.png&#x27;, &#123; format: &#x27;png&#x27; &#125;);</span><br><span class=\"line\">  phantom.exit();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h1><p> 执行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phantomjs  index.js</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44d7ef2bf3192~tplv-t2oaga2asx-image.image\"></p>\n<h1 id=\"参数\"><a href=\"#参数\" class=\"headerlink\" title=\"参数\"></a>参数</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var webPage = require(&#x27;webpage&#x27;);</span><br><span class=\"line\">var page = webPage.create();</span><br><span class=\"line\">var system = require(&#x27;system&#x27;);</span><br><span class=\"line\">var list = (system.args + &quot;&quot;).split(&#x27;,&#x27;);</span><br></pre></td></tr></table></figure>\n\n\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/18/16d44da62d269ca4~tplv-t2oaga2asx-image.image\"></p>\n<p><a href=\"https://github.com/lizeze/phantomjs-demo\">Demo</a></p>\n"},{"title":"跨域解决方案","abbrlink":"3a48177d","date":"2021-09-12T04:48:17.000Z","_content":"\n# 跨域\n\n## 什么是跨域\n\n`协议` + `域名` + `端口` 有一处不相同时，就认为是跨域\n\n## 为什么会有跨域\n\n同源策略是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到攻击。\n\n# 解决方案\n\n  ## 使用Nginx做反向代理\n\n  + 情景1 \n\n    假设网站部署在80接口，在80接口下设置反向代理，可直接解决跨域问题\n\n    \n\n``` nginx\n      location ^~/v1{\n          rewrite ^/v1/(.*)$ /$1 break;\n          proxy_pass  http://localhost:8080;\n      }\n\n```\n\n * 情景2\n\n    假设网站部署在8081端口，api端口为8080，反向代理服务端口为80\n  \n\n``` nginx\n  location ^~/v1{\n        rewrite ^/v1/(.*)$ /$1 break;\n        proxy_pass  http://localhost:8080;\n        add_header Access-Control-Allow-Methods *;\n        add_header Access-Control-Max-Age 3600;\n        add_header Access-Control-Allow-Credentials true;\n        add_header Access-Control-Allow-Origin $http_origin;\n        add_header Access-Control-Allow-Headers \n        $http_access_control_request_headers;\n        if ($request_method = OPTIONS){\n            return 200;\n        }       \n  }\n  ```\n","source":"_posts/nginx/跨域解决方案.md","raw":"---\ntitle: 跨域解决方案\ntags: nginx\ncategories: Nginx\nabbrlink: 3a48177d\ndate: 2021-09-12 12:48:17\n---\n\n# 跨域\n\n## 什么是跨域\n\n`协议` + `域名` + `端口` 有一处不相同时，就认为是跨域\n\n## 为什么会有跨域\n\n同源策略是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到攻击。\n\n# 解决方案\n\n  ## 使用Nginx做反向代理\n\n  + 情景1 \n\n    假设网站部署在80接口，在80接口下设置反向代理，可直接解决跨域问题\n\n    \n\n``` nginx\n      location ^~/v1{\n          rewrite ^/v1/(.*)$ /$1 break;\n          proxy_pass  http://localhost:8080;\n      }\n\n```\n\n * 情景2\n\n    假设网站部署在8081端口，api端口为8080，反向代理服务端口为80\n  \n\n``` nginx\n  location ^~/v1{\n        rewrite ^/v1/(.*)$ /$1 break;\n        proxy_pass  http://localhost:8080;\n        add_header Access-Control-Allow-Methods *;\n        add_header Access-Control-Max-Age 3600;\n        add_header Access-Control-Allow-Credentials true;\n        add_header Access-Control-Allow-Origin $http_origin;\n        add_header Access-Control-Allow-Headers \n        $http_access_control_request_headers;\n        if ($request_method = OPTIONS){\n            return 200;\n        }       \n  }\n  ```\n","slug":"nginx/跨域解决方案","published":1,"updated":"2021-09-16T08:48:58.133Z","_id":"cktmoybkl001okotr3exd3cth","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"跨域\"><a href=\"#跨域\" class=\"headerlink\" title=\"跨域\"></a>跨域</h1><h2 id=\"什么是跨域\"><a href=\"#什么是跨域\" class=\"headerlink\" title=\"什么是跨域\"></a>什么是跨域</h2><p><code>协议</code> + <code>域名</code> + <code>端口</code> 有一处不相同时，就认为是跨域</p>\n<h2 id=\"为什么会有跨域\"><a href=\"#为什么会有跨域\" class=\"headerlink\" title=\"为什么会有跨域\"></a>为什么会有跨域</h2><p>同源策略是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到攻击。</p>\n<h1 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h1><h2 id=\"使用Nginx做反向代理\"><a href=\"#使用Nginx做反向代理\" class=\"headerlink\" title=\"使用Nginx做反向代理\"></a>使用Nginx做反向代理</h2><ul>\n<li><p>情景1 </p>\n<p>假设网站部署在80接口，在80接口下设置反向代理，可直接解决跨域问题</p>\n</li>\n</ul>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">location</span><span class=\"regexp\"> ^~/v1</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/v1/(.*)$</span> /<span class=\"variable\">$1</span> <span class=\"literal\">break</span>;</span><br><span class=\"line\">    <span class=\"attribute\">proxy_pass</span>  http://localhost:8080;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>情景2</p>\n<p> 假设网站部署在8081端口，api端口为8080，反向代理服务端口为80</p>\n</li>\n</ul>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">location</span><span class=\"regexp\"> ^~/v1</span>&#123;</span><br><span class=\"line\">      <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/v1/(.*)$</span> /<span class=\"variable\">$1</span> <span class=\"literal\">break</span>;</span><br><span class=\"line\">      <span class=\"attribute\">proxy_pass</span>  http://localhost:8080;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Methods *;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Max-Age <span class=\"number\">3600</span>;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Credentials <span class=\"literal\">true</span>;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Origin $http_origin;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Headers </span><br><span class=\"line\">      $http_access_control_request_headers;</span><br><span class=\"line\">      <span class=\"attribute\">if</span> ($request_method = OPTIONS)&#123;</span><br><span class=\"line\">          <span class=\"attribute\">return</span> <span class=\"number\">200</span>;</span><br><span class=\"line\">      &#125;       </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"跨域\"><a href=\"#跨域\" class=\"headerlink\" title=\"跨域\"></a>跨域</h1><h2 id=\"什么是跨域\"><a href=\"#什么是跨域\" class=\"headerlink\" title=\"什么是跨域\"></a>什么是跨域</h2><p><code>协议</code> + <code>域名</code> + <code>端口</code> 有一处不相同时，就认为是跨域</p>\n<h2 id=\"为什么会有跨域\"><a href=\"#为什么会有跨域\" class=\"headerlink\" title=\"为什么会有跨域\"></a>为什么会有跨域</h2><p>同源策略是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到攻击。</p>\n<h1 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h1><h2 id=\"使用Nginx做反向代理\"><a href=\"#使用Nginx做反向代理\" class=\"headerlink\" title=\"使用Nginx做反向代理\"></a>使用Nginx做反向代理</h2><ul>\n<li><p>情景1 </p>\n<p>假设网站部署在80接口，在80接口下设置反向代理，可直接解决跨域问题</p>\n</li>\n</ul>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">location</span><span class=\"regexp\"> ^~/v1</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/v1/(.*)$</span> /<span class=\"variable\">$1</span> <span class=\"literal\">break</span>;</span><br><span class=\"line\">    <span class=\"attribute\">proxy_pass</span>  http://localhost:8080;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>情景2</p>\n<p> 假设网站部署在8081端口，api端口为8080，反向代理服务端口为80</p>\n</li>\n</ul>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">location</span><span class=\"regexp\"> ^~/v1</span>&#123;</span><br><span class=\"line\">      <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/v1/(.*)$</span> /<span class=\"variable\">$1</span> <span class=\"literal\">break</span>;</span><br><span class=\"line\">      <span class=\"attribute\">proxy_pass</span>  http://localhost:8080;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Methods *;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Max-Age <span class=\"number\">3600</span>;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Credentials <span class=\"literal\">true</span>;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Origin $http_origin;</span><br><span class=\"line\">      <span class=\"attribute\">add_header</span> Access-Control-Allow-Headers </span><br><span class=\"line\">      $http_access_control_request_headers;</span><br><span class=\"line\">      <span class=\"attribute\">if</span> ($request_method = OPTIONS)&#123;</span><br><span class=\"line\">          <span class=\"attribute\">return</span> <span class=\"number\">200</span>;</span><br><span class=\"line\">      &#125;       </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Ubuntu用户管理","abbrlink":"c5a6ae78","date":"2021-09-10T12:04:44.000Z","_content":"\n## 新增用户\n   `adduser`命令，添加新的用户\n    \n > 这个命令很容易理解，顾名思义：add是添加的意思，user是用户的意思，合在一起就是adduser 添加用户，用法也很简单，命令后面直接写上要添加的用户名\n\n```shell\n$ adduser frank\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95cd310d121a4799b15471f1888ea85a~tplv-k3u1fbpfcp-zoom-1.image)\n\n> 只需输入密码，然后一路回车，最后输入y完成新增用户\n\n**如果使用个人用户是没有权限操作的，只能使用root用户**\n\n现在可以查看`home`目录下，会发现多出一个`frank`的文件夹\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image)\n## 修改密码\n拿到管理员给创建的用户之后，一般情况下我们都要修改一下默认密码，修改密码的命令是`passwd `，用法和`adduser`类似，后面加上用户名即可。\n\n下面修改一下`frank`的默认密码\n```shell\n$ passwd frank\n```\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baa2c183952e49ac923c87d98460327d~tplv-k3u1fbpfcp-zoom-1.image)\n\n> 命令后面也可以不加用户名，默认是当前用户\n\n## 删除用户\n能添加用户，那就肯定可以删除用户的，下面就使用`deluser`命令来删除用户\n\n`deluser` 是 `delete` 和 `user` 的缩写，delete 是`删除`的意思，user 是`用户`的意思。合在一起就是`删除用户`\n\n用法和`adduser`是一样的，如下\n\n```shell\n$ deluser frank\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92d479e3746541139109ca67ec9fc40c~tplv-k3u1fbpfcp-zoom-1.image)\n\n一行命令成功删除\n\n**可以看到删除用户是没有确认过程的，所以要慎用**\n\n这个时候在查看一下`home`目录查看一下用户文件夹还有几个\n \n ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image)\n\n只使用`deluser`是不会删除用户目录的，如果想把目录文件一块删除，需要增加一个参数\n\n```shell\ndeluser --remove-home frank\n```","source":"_posts/os/Ubuntu用户管理.md","raw":"---\ntitle: Ubuntu用户管理\ntags: ubuntu\ncategories: 操作系统\nabbrlink: c5a6ae78\ndate: 2021-09-10 20:04:44\n---\n\n## 新增用户\n   `adduser`命令，添加新的用户\n    \n > 这个命令很容易理解，顾名思义：add是添加的意思，user是用户的意思，合在一起就是adduser 添加用户，用法也很简单，命令后面直接写上要添加的用户名\n\n```shell\n$ adduser frank\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95cd310d121a4799b15471f1888ea85a~tplv-k3u1fbpfcp-zoom-1.image)\n\n> 只需输入密码，然后一路回车，最后输入y完成新增用户\n\n**如果使用个人用户是没有权限操作的，只能使用root用户**\n\n现在可以查看`home`目录下，会发现多出一个`frank`的文件夹\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image)\n## 修改密码\n拿到管理员给创建的用户之后，一般情况下我们都要修改一下默认密码，修改密码的命令是`passwd `，用法和`adduser`类似，后面加上用户名即可。\n\n下面修改一下`frank`的默认密码\n```shell\n$ passwd frank\n```\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baa2c183952e49ac923c87d98460327d~tplv-k3u1fbpfcp-zoom-1.image)\n\n> 命令后面也可以不加用户名，默认是当前用户\n\n## 删除用户\n能添加用户，那就肯定可以删除用户的，下面就使用`deluser`命令来删除用户\n\n`deluser` 是 `delete` 和 `user` 的缩写，delete 是`删除`的意思，user 是`用户`的意思。合在一起就是`删除用户`\n\n用法和`adduser`是一样的，如下\n\n```shell\n$ deluser frank\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92d479e3746541139109ca67ec9fc40c~tplv-k3u1fbpfcp-zoom-1.image)\n\n一行命令成功删除\n\n**可以看到删除用户是没有确认过程的，所以要慎用**\n\n这个时候在查看一下`home`目录查看一下用户文件夹还有几个\n \n ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image)\n\n只使用`deluser`是不会删除用户目录的，如果想把目录文件一块删除，需要增加一个参数\n\n```shell\ndeluser --remove-home frank\n```","slug":"os/Ubuntu用户管理","published":1,"updated":"2021-09-16T08:48:58.135Z","_id":"cktmoybkm001tkotrgx6hb48l","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"新增用户\"><a href=\"#新增用户\" class=\"headerlink\" title=\"新增用户\"></a>新增用户</h2><p>   <code>adduser</code>命令，添加新的用户</p>\n<blockquote>\n<p>这个命令很容易理解，顾名思义：add是添加的意思，user是用户的意思，合在一起就是adduser 添加用户，用法也很简单，命令后面直接写上要添加的用户名</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> adduser frank</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95cd310d121a4799b15471f1888ea85a~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>只需输入密码，然后一路回车，最后输入y完成新增用户</p>\n</blockquote>\n<p><strong>如果使用个人用户是没有权限操作的，只能使用root用户</strong></p>\n<p>现在可以查看<code>home</code>目录下，会发现多出一个<code>frank</code>的文件夹</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<h2 id=\"修改密码\"><a href=\"#修改密码\" class=\"headerlink\" title=\"修改密码\"></a>修改密码</h2><p>拿到管理员给创建的用户之后，一般情况下我们都要修改一下默认密码，修改密码的命令是<code>passwd </code>，用法和<code>adduser</code>类似，后面加上用户名即可。</p>\n<p>下面修改一下<code>frank</code>的默认密码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> passwd frank</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baa2c183952e49ac923c87d98460327d~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>命令后面也可以不加用户名，默认是当前用户</p>\n</blockquote>\n<h2 id=\"删除用户\"><a href=\"#删除用户\" class=\"headerlink\" title=\"删除用户\"></a>删除用户</h2><p>能添加用户，那就肯定可以删除用户的，下面就使用<code>deluser</code>命令来删除用户</p>\n<p><code>deluser</code> 是 <code>delete</code> 和 <code>user</code> 的缩写，delete 是<code>删除</code>的意思，user 是<code>用户</code>的意思。合在一起就是<code>删除用户</code></p>\n<p>用法和<code>adduser</code>是一样的，如下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> deluser frank</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92d479e3746541139109ca67ec9fc40c~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>一行命令成功删除</p>\n<p><strong>可以看到删除用户是没有确认过程的，所以要慎用</strong></p>\n<p>这个时候在查看一下<code>home</code>目录查看一下用户文件夹还有几个</p>\n<p> <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>只使用<code>deluser</code>是不会删除用户目录的，如果想把目录文件一块删除，需要增加一个参数</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deluser --remove-home frank</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"新增用户\"><a href=\"#新增用户\" class=\"headerlink\" title=\"新增用户\"></a>新增用户</h2><p>   <code>adduser</code>命令，添加新的用户</p>\n<blockquote>\n<p>这个命令很容易理解，顾名思义：add是添加的意思，user是用户的意思，合在一起就是adduser 添加用户，用法也很简单，命令后面直接写上要添加的用户名</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> adduser frank</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95cd310d121a4799b15471f1888ea85a~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>只需输入密码，然后一路回车，最后输入y完成新增用户</p>\n</blockquote>\n<p><strong>如果使用个人用户是没有权限操作的，只能使用root用户</strong></p>\n<p>现在可以查看<code>home</code>目录下，会发现多出一个<code>frank</code>的文件夹</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<h2 id=\"修改密码\"><a href=\"#修改密码\" class=\"headerlink\" title=\"修改密码\"></a>修改密码</h2><p>拿到管理员给创建的用户之后，一般情况下我们都要修改一下默认密码，修改密码的命令是<code>passwd </code>，用法和<code>adduser</code>类似，后面加上用户名即可。</p>\n<p>下面修改一下<code>frank</code>的默认密码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> passwd frank</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baa2c183952e49ac923c87d98460327d~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>命令后面也可以不加用户名，默认是当前用户</p>\n</blockquote>\n<h2 id=\"删除用户\"><a href=\"#删除用户\" class=\"headerlink\" title=\"删除用户\"></a>删除用户</h2><p>能添加用户，那就肯定可以删除用户的，下面就使用<code>deluser</code>命令来删除用户</p>\n<p><code>deluser</code> 是 <code>delete</code> 和 <code>user</code> 的缩写，delete 是<code>删除</code>的意思，user 是<code>用户</code>的意思。合在一起就是<code>删除用户</code></p>\n<p>用法和<code>adduser</code>是一样的，如下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> deluser frank</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92d479e3746541139109ca67ec9fc40c~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>一行命令成功删除</p>\n<p><strong>可以看到删除用户是没有确认过程的，所以要慎用</strong></p>\n<p>这个时候在查看一下<code>home</code>目录查看一下用户文件夹还有几个</p>\n<p> <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec4f04cbd1924116a77c00ca6e3ae0fa~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>只使用<code>deluser</code>是不会删除用户目录的，如果想把目录文件一块删除，需要增加一个参数</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deluser --remove-home frank</span><br></pre></td></tr></table></figure>"},{"title":"Ubuntu群组管理","abbrlink":"3e1b66b7","date":"2021-09-10T12:06:29.000Z","_content":"# 群组管理\n在`Linux`中，每个用户都有一个群组。\n\n那么新建用户的时候并没有指定群组啊，群组是怎么来的呢。\n\n其实我们不需要设置群组，创建用户的时候会默认创建一个和用户名一样的群组，并且把用户添加到这个群组中。\n\n下面来看一下用户的群组\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8b016ba237a4917be44590b5657d9d8~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看到第三列和第四列是相同的。`第三列`是用户名，`第四列`是群组名。\n\n了解这些之后下面来操作一下群组\n\n## 新增群组\n\n当用户少的时候默认的群组就足以使用了，但是当用户多的时候还是每个用户都在自己的群组中，这种情况就不方便管理了。\n\n下面演示一下新增群组，使用`addgroup `命令，用法很简单，在后面直接加上要创建的群组就可以了。记得要用`root`身份\n\n```shell\n$ addgroup admin\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60fb204cbb4f4e7d84016c634818da1e~tplv-k3u1fbpfcp-zoom-1.image)\n\n看到这个消息，就表示新增成功。\n\n这个时候群组里面还是空的，没有添加用户。\n## 修改用户账户\n假如我要将 `dev` 这个用户放到我刚创建的 `admin` 这个群组里，可以这样写\n\n```shell\n$ usermod -g admin dev\n```\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85d32fae8a974d66a209312aaca6d71c~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看到用户dev的群组已经改成了admin\n\n除了使用`ll`命令之外还可以这样查看用户所在群组\n```shell\n$ groups dev\n```\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae1f123767d54f15a5bf7c045d3403f7~tplv-k3u1fbpfcp-zoom-1.image)\n\n> 也可以不添加用户名，直接使用groups命令，则显示当前用户所在群组\n\n我们也一次把用户添加到多个群组里面，就用`-G`参数\n\n首先我们先来多创建两个群组，分别是`g1`和`g2`\n\n```shell\n$ addgroup g1\n$ addgroup g2\n```\n接着运行以下命令\n\n```shell\n$ usermod -G admin,dev,g1,g2 dev\n$ gropus dev\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591947837e6947a2b065a854b78de643~tplv-k3u1fbpfcp-zoom-1.image)\n>配合 -g 或 -G 参数时，它会把用户从原先的群组里剔除，加入到新的群组。如果不想离开原先的群组，又想加入新的群组，可以在 -G 参数的基础上加上 -a 参数，表示“追加”。\n\n* 不添加`-a`的情况\n\n```shell\n $ groups dev # 先查看一下用户所在群组\n $ usermod -G admin dev # 修改用户所在群组\n $ groups dev # 在一次查询用户所在群组\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7021f29ab3e444859879678c12d84de9~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看出，用户的群组只有`dev`了，之前的群组已经不存在了\n\n* 添加`-a`的情况\n```shell\n$ groups dev # 先查看一下用户所在群组\n$ usermod -aG dev dev # 修改用户所在群组\n$ groups dev # 在一次查询用户所在群组\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56207c151a4d4d759b1e6be4f55b980d~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看出原来的群组还在\n\n## 删除群组\n\n用法很简单，在命令后接想要删除的群组名。\n\n```shell\n$ delgroup dev\n```\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/048865560eb442e585e60253b6807371~tplv-k3u1fbpfcp-zoom-1.image)\n\n`dev`已经不再`dev`群组，因为它已经被删除","source":"_posts/os/Ubuntu群组管理.md","raw":"---\ntitle: Ubuntu群组管理\ntags: ubuntu\ncategories: 操作系统\nabbrlink: 3e1b66b7\ndate: 2021-09-10 20:06:29\n---\n# 群组管理\n在`Linux`中，每个用户都有一个群组。\n\n那么新建用户的时候并没有指定群组啊，群组是怎么来的呢。\n\n其实我们不需要设置群组，创建用户的时候会默认创建一个和用户名一样的群组，并且把用户添加到这个群组中。\n\n下面来看一下用户的群组\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8b016ba237a4917be44590b5657d9d8~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看到第三列和第四列是相同的。`第三列`是用户名，`第四列`是群组名。\n\n了解这些之后下面来操作一下群组\n\n## 新增群组\n\n当用户少的时候默认的群组就足以使用了，但是当用户多的时候还是每个用户都在自己的群组中，这种情况就不方便管理了。\n\n下面演示一下新增群组，使用`addgroup `命令，用法很简单，在后面直接加上要创建的群组就可以了。记得要用`root`身份\n\n```shell\n$ addgroup admin\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60fb204cbb4f4e7d84016c634818da1e~tplv-k3u1fbpfcp-zoom-1.image)\n\n看到这个消息，就表示新增成功。\n\n这个时候群组里面还是空的，没有添加用户。\n## 修改用户账户\n假如我要将 `dev` 这个用户放到我刚创建的 `admin` 这个群组里，可以这样写\n\n```shell\n$ usermod -g admin dev\n```\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85d32fae8a974d66a209312aaca6d71c~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看到用户dev的群组已经改成了admin\n\n除了使用`ll`命令之外还可以这样查看用户所在群组\n```shell\n$ groups dev\n```\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae1f123767d54f15a5bf7c045d3403f7~tplv-k3u1fbpfcp-zoom-1.image)\n\n> 也可以不添加用户名，直接使用groups命令，则显示当前用户所在群组\n\n我们也一次把用户添加到多个群组里面，就用`-G`参数\n\n首先我们先来多创建两个群组，分别是`g1`和`g2`\n\n```shell\n$ addgroup g1\n$ addgroup g2\n```\n接着运行以下命令\n\n```shell\n$ usermod -G admin,dev,g1,g2 dev\n$ gropus dev\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591947837e6947a2b065a854b78de643~tplv-k3u1fbpfcp-zoom-1.image)\n>配合 -g 或 -G 参数时，它会把用户从原先的群组里剔除，加入到新的群组。如果不想离开原先的群组，又想加入新的群组，可以在 -G 参数的基础上加上 -a 参数，表示“追加”。\n\n* 不添加`-a`的情况\n\n```shell\n $ groups dev # 先查看一下用户所在群组\n $ usermod -G admin dev # 修改用户所在群组\n $ groups dev # 在一次查询用户所在群组\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7021f29ab3e444859879678c12d84de9~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看出，用户的群组只有`dev`了，之前的群组已经不存在了\n\n* 添加`-a`的情况\n```shell\n$ groups dev # 先查看一下用户所在群组\n$ usermod -aG dev dev # 修改用户所在群组\n$ groups dev # 在一次查询用户所在群组\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56207c151a4d4d759b1e6be4f55b980d~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以看出原来的群组还在\n\n## 删除群组\n\n用法很简单，在命令后接想要删除的群组名。\n\n```shell\n$ delgroup dev\n```\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/048865560eb442e585e60253b6807371~tplv-k3u1fbpfcp-zoom-1.image)\n\n`dev`已经不再`dev`群组，因为它已经被删除","slug":"os/Ubuntu群组管理","published":1,"updated":"2021-09-16T08:48:58.137Z","_id":"cktmoybkn001wkotr0o5l9s2c","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"群组管理\"><a href=\"#群组管理\" class=\"headerlink\" title=\"群组管理\"></a>群组管理</h1><p>在<code>Linux</code>中，每个用户都有一个群组。</p>\n<p>那么新建用户的时候并没有指定群组啊，群组是怎么来的呢。</p>\n<p>其实我们不需要设置群组，创建用户的时候会默认创建一个和用户名一样的群组，并且把用户添加到这个群组中。</p>\n<p>下面来看一下用户的群组</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8b016ba237a4917be44590b5657d9d8~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>可以看到第三列和第四列是相同的。<code>第三列</code>是用户名，<code>第四列</code>是群组名。</p>\n<p>了解这些之后下面来操作一下群组</p>\n<h2 id=\"新增群组\"><a href=\"#新增群组\" class=\"headerlink\" title=\"新增群组\"></a>新增群组</h2><p>当用户少的时候默认的群组就足以使用了，但是当用户多的时候还是每个用户都在自己的群组中，这种情况就不方便管理了。</p>\n<p>下面演示一下新增群组，使用<code>addgroup </code>命令，用法很简单，在后面直接加上要创建的群组就可以了。记得要用<code>root</code>身份</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> addgroup admin</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60fb204cbb4f4e7d84016c634818da1e~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>看到这个消息，就表示新增成功。</p>\n<p>这个时候群组里面还是空的，没有添加用户。</p>\n<h2 id=\"修改用户账户\"><a href=\"#修改用户账户\" class=\"headerlink\" title=\"修改用户账户\"></a>修改用户账户</h2><p>假如我要将 <code>dev</code> 这个用户放到我刚创建的 <code>admin</code> 这个群组里，可以这样写</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -g admin dev</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85d32fae8a974d66a209312aaca6d71c~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>可以看到用户dev的群组已经改成了admin</p>\n<p>除了使用<code>ll</code>命令之外还可以这样查看用户所在群组</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae1f123767d54f15a5bf7c045d3403f7~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>也可以不添加用户名，直接使用groups命令，则显示当前用户所在群组</p>\n</blockquote>\n<p>我们也一次把用户添加到多个群组里面，就用<code>-G</code>参数</p>\n<p>首先我们先来多创建两个群组，分别是<code>g1</code>和<code>g2</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> addgroup g1</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> addgroup g2</span></span><br></pre></td></tr></table></figure>\n<p>接着运行以下命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -G admin,dev,g1,g2 dev</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> gropus dev</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591947837e6947a2b065a854b78de643~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>配合 -g 或 -G 参数时，它会把用户从原先的群组里剔除，加入到新的群组。如果不想离开原先的群组，又想加入新的群组，可以在 -G 参数的基础上加上 -a 参数，表示“追加”。</p>\n</blockquote>\n<ul>\n<li>不添加<code>-a</code>的情况</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 先查看一下用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -G admin dev <span class=\"comment\"># 修改用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 在一次查询用户所在群组</span></span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7021f29ab3e444859879678c12d84de9~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>可以看出，用户的群组只有<code>dev</code>了，之前的群组已经不存在了</p>\n<ul>\n<li>添加<code>-a</code>的情况<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 先查看一下用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -aG dev dev <span class=\"comment\"># 修改用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 在一次查询用户所在群组</span></span></span><br></pre></td></tr></table></figure>\n<img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56207c151a4d4d759b1e6be4f55b980d~tplv-k3u1fbpfcp-zoom-1.image\"></li>\n</ul>\n<p>可以看出原来的群组还在</p>\n<h2 id=\"删除群组\"><a href=\"#删除群组\" class=\"headerlink\" title=\"删除群组\"></a>删除群组</h2><p>用法很简单，在命令后接想要删除的群组名。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> delgroup dev</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/048865560eb442e585e60253b6807371~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p><code>dev</code>已经不再<code>dev</code>群组，因为它已经被删除</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"群组管理\"><a href=\"#群组管理\" class=\"headerlink\" title=\"群组管理\"></a>群组管理</h1><p>在<code>Linux</code>中，每个用户都有一个群组。</p>\n<p>那么新建用户的时候并没有指定群组啊，群组是怎么来的呢。</p>\n<p>其实我们不需要设置群组，创建用户的时候会默认创建一个和用户名一样的群组，并且把用户添加到这个群组中。</p>\n<p>下面来看一下用户的群组</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8b016ba237a4917be44590b5657d9d8~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>可以看到第三列和第四列是相同的。<code>第三列</code>是用户名，<code>第四列</code>是群组名。</p>\n<p>了解这些之后下面来操作一下群组</p>\n<h2 id=\"新增群组\"><a href=\"#新增群组\" class=\"headerlink\" title=\"新增群组\"></a>新增群组</h2><p>当用户少的时候默认的群组就足以使用了，但是当用户多的时候还是每个用户都在自己的群组中，这种情况就不方便管理了。</p>\n<p>下面演示一下新增群组，使用<code>addgroup </code>命令，用法很简单，在后面直接加上要创建的群组就可以了。记得要用<code>root</code>身份</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> addgroup admin</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60fb204cbb4f4e7d84016c634818da1e~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>看到这个消息，就表示新增成功。</p>\n<p>这个时候群组里面还是空的，没有添加用户。</p>\n<h2 id=\"修改用户账户\"><a href=\"#修改用户账户\" class=\"headerlink\" title=\"修改用户账户\"></a>修改用户账户</h2><p>假如我要将 <code>dev</code> 这个用户放到我刚创建的 <code>admin</code> 这个群组里，可以这样写</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -g admin dev</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85d32fae8a974d66a209312aaca6d71c~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>可以看到用户dev的群组已经改成了admin</p>\n<p>除了使用<code>ll</code>命令之外还可以这样查看用户所在群组</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae1f123767d54f15a5bf7c045d3403f7~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>也可以不添加用户名，直接使用groups命令，则显示当前用户所在群组</p>\n</blockquote>\n<p>我们也一次把用户添加到多个群组里面，就用<code>-G</code>参数</p>\n<p>首先我们先来多创建两个群组，分别是<code>g1</code>和<code>g2</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> addgroup g1</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> addgroup g2</span></span><br></pre></td></tr></table></figure>\n<p>接着运行以下命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -G admin,dev,g1,g2 dev</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> gropus dev</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591947837e6947a2b065a854b78de643~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<blockquote>\n<p>配合 -g 或 -G 参数时，它会把用户从原先的群组里剔除，加入到新的群组。如果不想离开原先的群组，又想加入新的群组，可以在 -G 参数的基础上加上 -a 参数，表示“追加”。</p>\n</blockquote>\n<ul>\n<li>不添加<code>-a</code>的情况</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 先查看一下用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -G admin dev <span class=\"comment\"># 修改用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 在一次查询用户所在群组</span></span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7021f29ab3e444859879678c12d84de9~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p>可以看出，用户的群组只有<code>dev</code>了，之前的群组已经不存在了</p>\n<ul>\n<li>添加<code>-a</code>的情况<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 先查看一下用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> usermod -aG dev dev <span class=\"comment\"># 修改用户所在群组</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> groups dev <span class=\"comment\"># 在一次查询用户所在群组</span></span></span><br></pre></td></tr></table></figure>\n<img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56207c151a4d4d759b1e6be4f55b980d~tplv-k3u1fbpfcp-zoom-1.image\"></li>\n</ul>\n<p>可以看出原来的群组还在</p>\n<h2 id=\"删除群组\"><a href=\"#删除群组\" class=\"headerlink\" title=\"删除群组\"></a>删除群组</h2><p>用法很简单，在命令后接想要删除的群组名。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> delgroup dev</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/048865560eb442e585e60253b6807371~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n<p><code>dev</code>已经不再<code>dev</code>群组，因为它已经被删除</p>\n"},{"title":"linux挂载windows共享文件夹","abbrlink":"e04653fd","date":"2021-09-10T12:20:00.000Z","_content":"  创建文件夹\n  ```shell\n  $ mkdir -p /mnt/share\n  ```\n 安装依赖\n ```shell\n $ yum install  cifs-utils\n ```\n修改/etc/fstab文件，文件最后加入：\n``` \n//192.168.16.32/serverapp /mnt/share cifs  defaults  0 0\n```\n执行命令\n```\nmount -t cifs -o username='administrator',password='**'  //192.168.16.32/serverapp /mnt/share\n```\n","source":"_posts/os/linux挂载windows共享文件夹.md","raw":"---\ntitle: linux挂载windows共享文件夹\ntags: centos\ncategories: 操作系统\nabbrlink: e04653fd\ndate: 2021-09-10 20:20:00\n---\n  创建文件夹\n  ```shell\n  $ mkdir -p /mnt/share\n  ```\n 安装依赖\n ```shell\n $ yum install  cifs-utils\n ```\n修改/etc/fstab文件，文件最后加入：\n``` \n//192.168.16.32/serverapp /mnt/share cifs  defaults  0 0\n```\n执行命令\n```\nmount -t cifs -o username='administrator',password='**'  //192.168.16.32/serverapp /mnt/share\n```\n","slug":"os/linux挂载windows共享文件夹","published":1,"updated":"2021-09-16T08:48:58.138Z","_id":"cktmoybkp0020kotr0ucvgpkq","comments":1,"layout":"post","photos":[],"link":"","content":"<p>  创建文件夹<br>  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir -p /mnt/share</span></span><br></pre></td></tr></table></figure><br> 安装依赖<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yum install  cifs-utils</span></span><br></pre></td></tr></table></figure><br>修改/etc/fstab文件，文件最后加入：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//192.168.16.32/serverapp /mnt/share cifs  defaults  0 0</span><br></pre></td></tr></table></figure>\n<p>执行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mount -t cifs -o username=&#x27;administrator&#x27;,password=&#x27;**&#x27;  //192.168.16.32/serverapp /mnt/share</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>  创建文件夹<br>  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkdir -p /mnt/share</span></span><br></pre></td></tr></table></figure><br> 安装依赖<br> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yum install  cifs-utils</span></span><br></pre></td></tr></table></figure><br>修改/etc/fstab文件，文件最后加入：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//192.168.16.32/serverapp /mnt/share cifs  defaults  0 0</span><br></pre></td></tr></table></figure>\n<p>执行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mount -t cifs -o username=&#x27;administrator&#x27;,password=&#x27;**&#x27;  //192.168.16.32/serverapp /mnt/share</span><br></pre></td></tr></table></figure>\n"},{"title":"linux设置开机启动","abbrlink":"b9f29ac6","date":"2021-09-12T04:54:48.000Z","_content":"\n\n# 创建一个脚本\n```shell\n$ vim auto_run_script.sh\n\n#!/bin/bash\ndate >> /tmp/output.txt\nhostname >> /tmp/output.txt\n```\n# 保存退出后，再给它赋予可执行权限\n```shell\n$ chmod 777  auto_run_script.sh\n```\n\n# 创建启动服务\n\n ```shell\n$ cd /etc/systemd/system\n\n$ vim auto_run_script.service\n\n[Unit]\nDescription=Run a Custom Script at Startup\nAfter=default.target\n\n[Service]\nExecStart=/auto_run_script.sh\n\n[Install]\nWantedBy=default.target\n\n```\n保存退出\n\n# 启动服务\n```\n$ systemctl daemon-reload\n$ systemctl enable auto_run_script.service\n```","source":"_posts/os/linux设置开机启动.md","raw":"---\ntitle: linux设置开机启动\ntags: linux\nabbrlink: b9f29ac6\ndate: 2021-09-12 12:54:48\n---\n\n\n# 创建一个脚本\n```shell\n$ vim auto_run_script.sh\n\n#!/bin/bash\ndate >> /tmp/output.txt\nhostname >> /tmp/output.txt\n```\n# 保存退出后，再给它赋予可执行权限\n```shell\n$ chmod 777  auto_run_script.sh\n```\n\n# 创建启动服务\n\n ```shell\n$ cd /etc/systemd/system\n\n$ vim auto_run_script.service\n\n[Unit]\nDescription=Run a Custom Script at Startup\nAfter=default.target\n\n[Service]\nExecStart=/auto_run_script.sh\n\n[Install]\nWantedBy=default.target\n\n```\n保存退出\n\n# 启动服务\n```\n$ systemctl daemon-reload\n$ systemctl enable auto_run_script.service\n```","slug":"os/linux设置开机启动","published":1,"updated":"2021-09-16T08:48:58.140Z","_id":"cktmoybkq0023kotr8gzb46fl","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"创建一个脚本\"><a href=\"#创建一个脚本\" class=\"headerlink\" title=\"创建一个脚本\"></a>创建一个脚本</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim auto_run_script.sh</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">date &gt;&gt; /tmp/output.txt</span><br><span class=\"line\">hostname &gt;&gt; /tmp/output.txt</span><br></pre></td></tr></table></figure>\n<h1 id=\"保存退出后，再给它赋予可执行权限\"><a href=\"#保存退出后，再给它赋予可执行权限\" class=\"headerlink\" title=\"保存退出后，再给它赋予可执行权限\"></a>保存退出后，再给它赋予可执行权限</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> chmod 777  auto_run_script.sh</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"创建启动服务\"><a href=\"#创建启动服务\" class=\"headerlink\" title=\"创建启动服务\"></a>创建启动服务</h1> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/systemd/system</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim auto_run_script.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Run a Custom Script at Startup</span><br><span class=\"line\">After=default.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">ExecStart=/auto_run_script.sh</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=default.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>保存退出</p>\n<h1 id=\"启动服务\"><a href=\"#启动服务\" class=\"headerlink\" title=\"启动服务\"></a>启动服务</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ systemctl daemon-reload</span><br><span class=\"line\">$ systemctl enable auto_run_script.service</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"创建一个脚本\"><a href=\"#创建一个脚本\" class=\"headerlink\" title=\"创建一个脚本\"></a>创建一个脚本</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim auto_run_script.sh</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">date &gt;&gt; /tmp/output.txt</span><br><span class=\"line\">hostname &gt;&gt; /tmp/output.txt</span><br></pre></td></tr></table></figure>\n<h1 id=\"保存退出后，再给它赋予可执行权限\"><a href=\"#保存退出后，再给它赋予可执行权限\" class=\"headerlink\" title=\"保存退出后，再给它赋予可执行权限\"></a>保存退出后，再给它赋予可执行权限</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> chmod 777  auto_run_script.sh</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"创建启动服务\"><a href=\"#创建启动服务\" class=\"headerlink\" title=\"创建启动服务\"></a>创建启动服务</h1> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/systemd/system</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim auto_run_script.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Run a Custom Script at Startup</span><br><span class=\"line\">After=default.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">ExecStart=/auto_run_script.sh</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=default.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>保存退出</p>\n<h1 id=\"启动服务\"><a href=\"#启动服务\" class=\"headerlink\" title=\"启动服务\"></a>启动服务</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ systemctl daemon-reload</span><br><span class=\"line\">$ systemctl enable auto_run_script.service</span><br></pre></td></tr></table></figure>"},{"title":"linux防火墙基本操作","abbrlink":"307bc4b4","date":"2021-09-12T04:33:55.000Z","_content":"\n# 启动防火墙\n```\nsystemctl start firewalld\n```\n# 禁用防火墙\n```\nsystemctl stop firewalld\n```\n# 设置开机启动\n\n```\nsystemctl enable firewalld\n```\n# 停止并禁用开机启动\n\n```\nsytemctl disable firewalld\n```\n# 重启防火墙\n\n ```\nfirewall-cmd --reload\n```\n# 查看状态\n```\nsystemctl status firewalld或者 firewall-cmd --state\n```\n# 查看版本\n```\nfirewall-cmd --version\n```\n\n#  查看开放的端口\n```\nfirewall-cmd --list-port\n\n```\n\n # 开放端口\n\n```shell\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n#不加 --permanent重启之后就会失效，加了是永久生效\n# 增加规则之后要重启防火墙\nfirewall-cmd --reload\n```\n","source":"_posts/os/linux防火墙基本操作.md","raw":"---\ntitle: linux防火墙基本操作\ntags: linux\ncategories: 操作系统\nabbrlink: 307bc4b4\ndate: 2021-09-12 12:33:55\n---\n\n# 启动防火墙\n```\nsystemctl start firewalld\n```\n# 禁用防火墙\n```\nsystemctl stop firewalld\n```\n# 设置开机启动\n\n```\nsystemctl enable firewalld\n```\n# 停止并禁用开机启动\n\n```\nsytemctl disable firewalld\n```\n# 重启防火墙\n\n ```\nfirewall-cmd --reload\n```\n# 查看状态\n```\nsystemctl status firewalld或者 firewall-cmd --state\n```\n# 查看版本\n```\nfirewall-cmd --version\n```\n\n#  查看开放的端口\n```\nfirewall-cmd --list-port\n\n```\n\n # 开放端口\n\n```shell\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n#不加 --permanent重启之后就会失效，加了是永久生效\n# 增加规则之后要重启防火墙\nfirewall-cmd --reload\n```\n","slug":"os/linux防火墙基本操作","published":1,"updated":"2021-09-16T08:48:58.143Z","_id":"cktmoybkr0025kotr6tp7fm1n","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"启动防火墙\"><a href=\"#启动防火墙\" class=\"headerlink\" title=\"启动防火墙\"></a>启动防火墙</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"禁用防火墙\"><a href=\"#禁用防火墙\" class=\"headerlink\" title=\"禁用防火墙\"></a>禁用防火墙</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"设置开机启动\"><a href=\"#设置开机启动\" class=\"headerlink\" title=\"设置开机启动\"></a>设置开机启动</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"停止并禁用开机启动\"><a href=\"#停止并禁用开机启动\" class=\"headerlink\" title=\"停止并禁用开机启动\"></a>停止并禁用开机启动</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sytemctl disable firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"重启防火墙\"><a href=\"#重启防火墙\" class=\"headerlink\" title=\"重启防火墙\"></a>重启防火墙</h1> <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n<h1 id=\"查看状态\"><a href=\"#查看状态\" class=\"headerlink\" title=\"查看状态\"></a>查看状态</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status firewalld或者 firewall-cmd --state</span><br></pre></td></tr></table></figure>\n<h1 id=\"查看版本\"><a href=\"#查看版本\" class=\"headerlink\" title=\"查看版本\"></a>查看版本</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --version</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"查看开放的端口\"><a href=\"#查看开放的端口\" class=\"headerlink\" title=\"查看开放的端口\"></a>查看开放的端口</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-port</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"开放端口\"><a href=\"#开放端口\" class=\"headerlink\" title=\"开放端口\"></a>开放端口</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">不加 --permanent重启之后就会失效，加了是永久生效</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 增加规则之后要重启防火墙</span></span><br><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"启动防火墙\"><a href=\"#启动防火墙\" class=\"headerlink\" title=\"启动防火墙\"></a>启动防火墙</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"禁用防火墙\"><a href=\"#禁用防火墙\" class=\"headerlink\" title=\"禁用防火墙\"></a>禁用防火墙</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"设置开机启动\"><a href=\"#设置开机启动\" class=\"headerlink\" title=\"设置开机启动\"></a>设置开机启动</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"停止并禁用开机启动\"><a href=\"#停止并禁用开机启动\" class=\"headerlink\" title=\"停止并禁用开机启动\"></a>停止并禁用开机启动</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sytemctl disable firewalld</span><br></pre></td></tr></table></figure>\n<h1 id=\"重启防火墙\"><a href=\"#重启防火墙\" class=\"headerlink\" title=\"重启防火墙\"></a>重启防火墙</h1> <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n<h1 id=\"查看状态\"><a href=\"#查看状态\" class=\"headerlink\" title=\"查看状态\"></a>查看状态</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status firewalld或者 firewall-cmd --state</span><br></pre></td></tr></table></figure>\n<h1 id=\"查看版本\"><a href=\"#查看版本\" class=\"headerlink\" title=\"查看版本\"></a>查看版本</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --version</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"查看开放的端口\"><a href=\"#查看开放的端口\" class=\"headerlink\" title=\"查看开放的端口\"></a>查看开放的端口</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-port</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"开放端口\"><a href=\"#开放端口\" class=\"headerlink\" title=\"开放端口\"></a>开放端口</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">不加 --permanent重启之后就会失效，加了是永久生效</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 增加规则之后要重启防火墙</span></span><br><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n"},{"title":"jenkins启动jar","abbrlink":"8c429c4","date":"2021-09-12T04:59:53.000Z","_content":"\n```bash\n#!/bin/bash\ncd ${WORKSPACE}\necho \"Stopping sso\"\nport=8990\npid=$(netstat -nlp | grep :$port | awk '{print $7}' | awk -F\"/\" '{ print $1 }');\nif [ -n \"$pid\" ]\nthen\n   echo \"kill -9 pid:\" $pid\n   kill -9 $pid\nfi\necho \"Execute shell Finish\"\nBUILD_ID=dontKillMe java  -jar target/demo-0.0.1.jar    &\n```","source":"_posts/tool/jenkins启动jar.md","raw":"---\ntitle: jenkins启动jar\ntags: jenkins\nabbrlink: 8c429c4\ndate: 2021-09-12 12:59:53\n---\n\n```bash\n#!/bin/bash\ncd ${WORKSPACE}\necho \"Stopping sso\"\nport=8990\npid=$(netstat -nlp | grep :$port | awk '{print $7}' | awk -F\"/\" '{ print $1 }');\nif [ -n \"$pid\" ]\nthen\n   echo \"kill -9 pid:\" $pid\n   kill -9 $pid\nfi\necho \"Execute shell Finish\"\nBUILD_ID=dontKillMe java  -jar target/demo-0.0.1.jar    &\n```","slug":"tool/jenkins启动jar","published":1,"updated":"2021-09-16T08:48:58.145Z","_id":"cktmoybks0028kotr37fp7tc6","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$&#123;WORKSPACE&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Stopping sso&quot;</span></span><br><span class=\"line\">port=8990</span><br><span class=\"line\">pid=$(netstat -nlp | grep :<span class=\"variable\">$port</span> | awk <span class=\"string\">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class=\"string\">&quot;/&quot;</span> <span class=\"string\">&#x27;&#123; print $1 &#125;&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">&quot;<span class=\"variable\">$pid</span>&quot;</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">   <span class=\"built_in\">echo</span> <span class=\"string\">&quot;kill -9 pid:&quot;</span> <span class=\"variable\">$pid</span></span><br><span class=\"line\">   <span class=\"built_in\">kill</span> -9 <span class=\"variable\">$pid</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Execute shell Finish&quot;</span></span><br><span class=\"line\">BUILD_ID=dontKillMe java  -jar target/demo-0.0.1.jar    &amp;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$&#123;WORKSPACE&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Stopping sso&quot;</span></span><br><span class=\"line\">port=8990</span><br><span class=\"line\">pid=$(netstat -nlp | grep :<span class=\"variable\">$port</span> | awk <span class=\"string\">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class=\"string\">&quot;/&quot;</span> <span class=\"string\">&#x27;&#123; print $1 &#125;&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">&quot;<span class=\"variable\">$pid</span>&quot;</span> ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">   <span class=\"built_in\">echo</span> <span class=\"string\">&quot;kill -9 pid:&quot;</span> <span class=\"variable\">$pid</span></span><br><span class=\"line\">   <span class=\"built_in\">kill</span> -9 <span class=\"variable\">$pid</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;Execute shell Finish&quot;</span></span><br><span class=\"line\">BUILD_ID=dontKillMe java  -jar target/demo-0.0.1.jar    &amp;</span><br></pre></td></tr></table></figure>"},{"title":"ubuntu下WebStorm无法输入中文","abbrlink":"4f6f6be0","date":"2021-09-10T12:22:23.000Z","_content":"\n你现在使用的输入法具体是什么？另外你是用 ibus 的吗？\n在启动文件中输入\n```shell\nexport XMODIFIERS=\"@im=ibus\"\nexport GTK_IM_MODULE=\"ibus\"\nexport QT_IM_MODULE=\"ibus\"\n```\n然后启动 WebStorm 试试。\n如果不行的话，你再换成下面的试试。\n```shell\nexport GTK_IM_MODULE=fcitx\nexport QT_IM_MODULE=fcitx\nexport XMODIFIERS=@im=fcitx\n```\n如果还不能解决，参考下面的链接操作一下\n\nhttps://youtrack.jetbrains.com/issue/IDEA-246833\n\nhttps://www.jetbrains.com/help/idea/switching-boot-jdk.html\n\nhttps://confluence.jetbrains.com/pages/viewpage.action?pageId=173178989\n\n以上方案由官方提供，亲测好用\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8383dba1bd194bc0b1dab30d1c757675~tplv-k3u1fbpfcp-zoom-1.image)\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dba08db916174ab4b2507b0676e81ac7~tplv-k3u1fbpfcp-zoom-1.image)","source":"_posts/os/ubuntu下WebStorm无法输入中文.md","raw":"---\ntitle: ubuntu下WebStorm无法输入中文\ntags:\n  - ubuntu\n  - webstorm\ncategories: 操作系统\nabbrlink: 4f6f6be0\ndate: 2021-09-10 20:22:23\n---\n\n你现在使用的输入法具体是什么？另外你是用 ibus 的吗？\n在启动文件中输入\n```shell\nexport XMODIFIERS=\"@im=ibus\"\nexport GTK_IM_MODULE=\"ibus\"\nexport QT_IM_MODULE=\"ibus\"\n```\n然后启动 WebStorm 试试。\n如果不行的话，你再换成下面的试试。\n```shell\nexport GTK_IM_MODULE=fcitx\nexport QT_IM_MODULE=fcitx\nexport XMODIFIERS=@im=fcitx\n```\n如果还不能解决，参考下面的链接操作一下\n\nhttps://youtrack.jetbrains.com/issue/IDEA-246833\n\nhttps://www.jetbrains.com/help/idea/switching-boot-jdk.html\n\nhttps://confluence.jetbrains.com/pages/viewpage.action?pageId=173178989\n\n以上方案由官方提供，亲测好用\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8383dba1bd194bc0b1dab30d1c757675~tplv-k3u1fbpfcp-zoom-1.image)\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dba08db916174ab4b2507b0676e81ac7~tplv-k3u1fbpfcp-zoom-1.image)","slug":"os/ubuntu下WebStorm无法输入中文","published":1,"updated":"2021-09-16T08:48:58.150Z","_id":"cktmoybks0029kotrbphrb9o3","comments":1,"layout":"post","photos":[],"link":"","content":"<p>你现在使用的输入法具体是什么？另外你是用 ibus 的吗？<br>在启动文件中输入</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export XMODIFIERS=&quot;@im=ibus&quot;</span><br><span class=\"line\">export GTK_IM_MODULE=&quot;ibus&quot;</span><br><span class=\"line\">export QT_IM_MODULE=&quot;ibus&quot;</span><br></pre></td></tr></table></figure>\n<p>然后启动 WebStorm 试试。<br>如果不行的话，你再换成下面的试试。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export GTK_IM_MODULE=fcitx</span><br><span class=\"line\">export QT_IM_MODULE=fcitx</span><br><span class=\"line\">export XMODIFIERS=@im=fcitx</span><br></pre></td></tr></table></figure>\n<p>如果还不能解决，参考下面的链接操作一下</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-246833\">https://youtrack.jetbrains.com/issue/IDEA-246833</a></p>\n<p><a href=\"https://www.jetbrains.com/help/idea/switching-boot-jdk.html\">https://www.jetbrains.com/help/idea/switching-boot-jdk.html</a></p>\n<p><a href=\"https://confluence.jetbrains.com/pages/viewpage.action?pageId=173178989\">https://confluence.jetbrains.com/pages/viewpage.action?pageId=173178989</a></p>\n<p>以上方案由官方提供，亲测好用<br><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8383dba1bd194bc0b1dab30d1c757675~tplv-k3u1fbpfcp-zoom-1.image\"><br><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dba08db916174ab4b2507b0676e81ac7~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>你现在使用的输入法具体是什么？另外你是用 ibus 的吗？<br>在启动文件中输入</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export XMODIFIERS=&quot;@im=ibus&quot;</span><br><span class=\"line\">export GTK_IM_MODULE=&quot;ibus&quot;</span><br><span class=\"line\">export QT_IM_MODULE=&quot;ibus&quot;</span><br></pre></td></tr></table></figure>\n<p>然后启动 WebStorm 试试。<br>如果不行的话，你再换成下面的试试。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export GTK_IM_MODULE=fcitx</span><br><span class=\"line\">export QT_IM_MODULE=fcitx</span><br><span class=\"line\">export XMODIFIERS=@im=fcitx</span><br></pre></td></tr></table></figure>\n<p>如果还不能解决，参考下面的链接操作一下</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-246833\">https://youtrack.jetbrains.com/issue/IDEA-246833</a></p>\n<p><a href=\"https://www.jetbrains.com/help/idea/switching-boot-jdk.html\">https://www.jetbrains.com/help/idea/switching-boot-jdk.html</a></p>\n<p><a href=\"https://confluence.jetbrains.com/pages/viewpage.action?pageId=173178989\">https://confluence.jetbrains.com/pages/viewpage.action?pageId=173178989</a></p>\n<p>以上方案由官方提供，亲测好用<br><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8383dba1bd194bc0b1dab30d1c757675~tplv-k3u1fbpfcp-zoom-1.image\"><br><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dba08db916174ab4b2507b0676e81ac7~tplv-k3u1fbpfcp-zoom-1.image\"></p>\n"},{"title":"中国行政区域数据","abbrlink":"6a1814b","date":"2021-09-12T05:03:28.000Z","_content":"\n# 简介\n\n行政区域json文件， 包括省，市，区，县，镇，街道\n\n数据持续更新中。。。\n\n# 保存目录\n\n```\ndata\n│  ├─1  \n│  ├─2\n│  ├─3\n│  └─4\n│  └─5\n```\n\n* 1 省\n* 2 市\n* 3 区/县\n* 4 镇/街道\n* 5 邮政编码/电话区号\n\n根据层级结构保存在不同的文件夹中，文件的命名都是上级区域的id。\n\n 比如北京的`id`是110000,那么海淀区所在的文件名称就是`110000.json` 以此类推\n\n # 启动项目\n\n  下载代码到本机(二选一即可)\n  ```shell\n  $ git clone https://github.com/lizeze/china_region.git\n\n  $ git clone https://gitee.com/zeze.li/china_region.git\n  ```\n  安装依赖\n\n  ```shell\n   $ cd china_region\n   $ npm i \n   $ npm start\n  ```\n  Get `http://localhost:9600/v1/api/xzhf/fid=100000&level=1`\n\n  |     |   |\n|  ----  | ----  |\n| level  | 请求的数据类型，和保存目录一致 |\n| fid  | 请求数据的父节点 |\n# 生成sql文件\n\n``` \n $ npm run sql     #全部数据生成sql\n\n $ npm run sql 1   #生成省级sql\n\n $ npm run sql 2   #生成市级sql\n\n $ npm run sql 3   #生成县级sql\n\n $ npm run sql 4   #生成街道sql\n \n $ npm run postcode # 生成邮政编码数据sql\n\n```\n\n修改`sql`字段名称\n\n`./src/tool.js`\n ``` javascript\n let sqlObj = {\n    tableName: 'table1',\n    id: 'id',\n    name: 'name',\n    level: 'level',\n    parent: 'parent',\n};\n ```\n\n修改`postCode`表名称\n`./src/tool.js`\n ``` javascript\n let postCodeSqlObj = {\n     tableName: 'postCode'\n };\n\n ```\n# 其他语言\n * [java](https://github.com/lizeze/china_region_java_api)\n \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n  \n\n  \n  \n  \n\n  \n  \n  \n  \n  \n  \n  \n\n  \n  \n","source":"_posts/tool/中国行政区域数据.md","raw":"---\ntitle: 中国行政区域数据\nabbrlink: 6a1814b\ndate: 2021-09-12 13:03:28\ntags:\n---\n\n# 简介\n\n行政区域json文件， 包括省，市，区，县，镇，街道\n\n数据持续更新中。。。\n\n# 保存目录\n\n```\ndata\n│  ├─1  \n│  ├─2\n│  ├─3\n│  └─4\n│  └─5\n```\n\n* 1 省\n* 2 市\n* 3 区/县\n* 4 镇/街道\n* 5 邮政编码/电话区号\n\n根据层级结构保存在不同的文件夹中，文件的命名都是上级区域的id。\n\n 比如北京的`id`是110000,那么海淀区所在的文件名称就是`110000.json` 以此类推\n\n # 启动项目\n\n  下载代码到本机(二选一即可)\n  ```shell\n  $ git clone https://github.com/lizeze/china_region.git\n\n  $ git clone https://gitee.com/zeze.li/china_region.git\n  ```\n  安装依赖\n\n  ```shell\n   $ cd china_region\n   $ npm i \n   $ npm start\n  ```\n  Get `http://localhost:9600/v1/api/xzhf/fid=100000&level=1`\n\n  |     |   |\n|  ----  | ----  |\n| level  | 请求的数据类型，和保存目录一致 |\n| fid  | 请求数据的父节点 |\n# 生成sql文件\n\n``` \n $ npm run sql     #全部数据生成sql\n\n $ npm run sql 1   #生成省级sql\n\n $ npm run sql 2   #生成市级sql\n\n $ npm run sql 3   #生成县级sql\n\n $ npm run sql 4   #生成街道sql\n \n $ npm run postcode # 生成邮政编码数据sql\n\n```\n\n修改`sql`字段名称\n\n`./src/tool.js`\n ``` javascript\n let sqlObj = {\n    tableName: 'table1',\n    id: 'id',\n    name: 'name',\n    level: 'level',\n    parent: 'parent',\n};\n ```\n\n修改`postCode`表名称\n`./src/tool.js`\n ``` javascript\n let postCodeSqlObj = {\n     tableName: 'postCode'\n };\n\n ```\n# 其他语言\n * [java](https://github.com/lizeze/china_region_java_api)\n \n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n  \n\n  \n  \n  \n\n  \n  \n  \n  \n  \n  \n  \n\n  \n  \n","slug":"tool/中国行政区域数据","published":1,"updated":"2021-09-16T08:48:58.151Z","_id":"cktmoybkt002dkotr5uou1x6p","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>行政区域json文件， 包括省，市，区，县，镇，街道</p>\n<p>数据持续更新中。。。</p>\n<h1 id=\"保存目录\"><a href=\"#保存目录\" class=\"headerlink\" title=\"保存目录\"></a>保存目录</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data</span><br><span class=\"line\">│  ├─1  </span><br><span class=\"line\">│  ├─2</span><br><span class=\"line\">│  ├─3</span><br><span class=\"line\">│  └─4</span><br><span class=\"line\">│  └─5</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>1 省</li>\n<li>2 市</li>\n<li>3 区/县</li>\n<li>4 镇/街道</li>\n<li>5 邮政编码/电话区号</li>\n</ul>\n<p>根据层级结构保存在不同的文件夹中，文件的命名都是上级区域的id。</p>\n<p> 比如北京的<code>id</code>是110000,那么海淀区所在的文件名称就是<code>110000.json</code> 以此类推</p>\n<h1 id=\"启动项目\"><a href=\"#启动项目\" class=\"headerlink\" title=\"启动项目\"></a>启动项目</h1><p>  下载代码到本机(二选一即可)<br>  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/lizeze/china_region.git</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://gitee.com/zeze.li/china_region.git</span></span><br></pre></td></tr></table></figure><br>  安装依赖</p>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> china_region</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm i</span> </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm start</span></span><br></pre></td></tr></table></figure>\n<p>  Get <code>http://localhost:9600/v1/api/xzhf/fid=100000&amp;level=1</code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>level</td>\n<td>请求的数据类型，和保存目录一致</td>\n</tr>\n<tr>\n<td>fid</td>\n<td>请求数据的父节点</td>\n</tr>\n</tbody></table>\n<h1 id=\"生成sql文件\"><a href=\"#生成sql文件\" class=\"headerlink\" title=\"生成sql文件\"></a>生成sql文件</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm run sql     #全部数据生成sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 1   #生成省级sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 2   #生成市级sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 3   #生成县级sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 4   #生成街道sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run postcode # 生成邮政编码数据sql</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>修改<code>sql</code>字段名称</p>\n<p><code>./src/tool.js</code><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">let</span> sqlObj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">tableName</span>: <span class=\"string\">&#x27;table1&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">id</span>: <span class=\"string\">&#x27;id&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&#x27;name&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">level</span>: <span class=\"string\">&#x27;level&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">parent</span>: <span class=\"string\">&#x27;parent&#x27;</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>修改<code>postCode</code>表名称<br><code>./src/tool.js</code><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> postCodeSqlObj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">tableName</span>: <span class=\"string\">&#x27;postCode&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"其他语言\"><a href=\"#其他语言\" class=\"headerlink\" title=\"其他语言\"></a>其他语言</h1><ul>\n<li><a href=\"https://github.com/lizeze/china_region_java_api\">java</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>行政区域json文件， 包括省，市，区，县，镇，街道</p>\n<p>数据持续更新中。。。</p>\n<h1 id=\"保存目录\"><a href=\"#保存目录\" class=\"headerlink\" title=\"保存目录\"></a>保存目录</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data</span><br><span class=\"line\">│  ├─1  </span><br><span class=\"line\">│  ├─2</span><br><span class=\"line\">│  ├─3</span><br><span class=\"line\">│  └─4</span><br><span class=\"line\">│  └─5</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>1 省</li>\n<li>2 市</li>\n<li>3 区/县</li>\n<li>4 镇/街道</li>\n<li>5 邮政编码/电话区号</li>\n</ul>\n<p>根据层级结构保存在不同的文件夹中，文件的命名都是上级区域的id。</p>\n<p> 比如北京的<code>id</code>是110000,那么海淀区所在的文件名称就是<code>110000.json</code> 以此类推</p>\n<h1 id=\"启动项目\"><a href=\"#启动项目\" class=\"headerlink\" title=\"启动项目\"></a>启动项目</h1><p>  下载代码到本机(二选一即可)<br>  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/lizeze/china_region.git</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://gitee.com/zeze.li/china_region.git</span></span><br></pre></td></tr></table></figure><br>  安装依赖</p>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> china_region</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm i</span> </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm start</span></span><br></pre></td></tr></table></figure>\n<p>  Get <code>http://localhost:9600/v1/api/xzhf/fid=100000&amp;level=1</code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>level</td>\n<td>请求的数据类型，和保存目录一致</td>\n</tr>\n<tr>\n<td>fid</td>\n<td>请求数据的父节点</td>\n</tr>\n</tbody></table>\n<h1 id=\"生成sql文件\"><a href=\"#生成sql文件\" class=\"headerlink\" title=\"生成sql文件\"></a>生成sql文件</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm run sql     #全部数据生成sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 1   #生成省级sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 2   #生成市级sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 3   #生成县级sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run sql 4   #生成街道sql</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm run postcode # 生成邮政编码数据sql</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>修改<code>sql</code>字段名称</p>\n<p><code>./src/tool.js</code><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">let</span> sqlObj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">tableName</span>: <span class=\"string\">&#x27;table1&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">id</span>: <span class=\"string\">&#x27;id&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&#x27;name&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">level</span>: <span class=\"string\">&#x27;level&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">parent</span>: <span class=\"string\">&#x27;parent&#x27;</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>修改<code>postCode</code>表名称<br><code>./src/tool.js</code><br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> postCodeSqlObj = &#123;</span><br><span class=\"line\">    <span class=\"attr\">tableName</span>: <span class=\"string\">&#x27;postCode&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"其他语言\"><a href=\"#其他语言\" class=\"headerlink\" title=\"其他语言\"></a>其他语言</h1><ul>\n<li><a href=\"https://github.com/lizeze/china_region_java_api\">java</a></li>\n</ul>\n"},{"title":"使用第三方授权登录自己的网站","abbrlink":"e44222ec","date":"2021-09-10T13:12:57.000Z","_content":"![在这里插入图片描述](https://img-blog.csdnimg.cn/4739bc34bb234f67bb546870ebcdf6be.png)\n\n# Github\n## 注册应用\n如果想要使用`Github`为应用授权的话，要先去自己的账户上注册一个应用，[点击](https://github.com/settings/developers)注册。\n\n![\\[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xl0CN1FD-1629897178733)(https://imgblog.csdnimg.cn/99253549a82d43258425957b20d75b21.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_54,color_FFFFFF,t_70,g_se,x_16)\\]](https://img-blog.csdnimg.cn/37197da007f540dfb6a3bf153261ec8e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_49,color_FFFFFF,t_70,g_se,x_16)\n\n名称随便输入，写上自己网站的主页，最后一个是授权成功之后回调的页面。\n\n创建成功之后会看到这个 \n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/b2daf14dc5bc4132a0f7d18e865a30f0.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_60,color_FFFFFF,t_70,g_se,x_16)\n## 跳转到Github授权页面\n 点一下`Generate a new client secret`会生成一个秘钥，只会出现一次，要保存好它，不要泄露出去。后面会用到的。\n\n下面开始写代码了，只是做一个简单的示例，没有特别复杂的。就是文档顶部的四种类型。图片是在[iconfont](https://www.iconfont.cn/)找到，这个不做过多描述了。\n\n```javascript\n\n function github() {\n      location.href = `https://github.com/login/oauth/authorize?client_id=39b050937104c9618fee&redirect_uri=http://localhost/me.html`;\n    }\n```\n\n当点击`Github`图标之后会调用这个方法，跳转到授权页面，上面那个用到两个参数\n\n*  client_id\n  就是上面应用的`client_id`，千万不要把`secret`放在前端，不能暴露出来的\n  \n  * redirect_uri\n     授权成功返回的页面，上面也提到过的。\n \n 调用方法之后会跳转到这个页面，输入账号密码登录就可以了。\n![在这里插入图片描述](https://img-blog.csdnimg.cn/743fa3f0d04c4673ab0b3268fe77634d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_52,color_FFFFFF,t_70,g_se,x_16)\n密码验证成功之后会跳转到`http://localhost/me.html?code=ffwgregregregre`,记住这个`code`，后面会用到的。\n\n## 获取到授权码\n\n在授权页面授权成功之后，会得到一个授权码，就是上面的`code`，拿到这个去后台服务获取用户信息。\n\n 要获取到用户信息首页要使用`授权码`得到一个令牌，使用这个令牌向`Github`请求用户信息。\n## 后台实现\n\n```java\n     @GetMapping(\"github/{code}\")\n    public ResponseEntity getUserInfo(@PathVariable String code) {\n\n        String clientId = \"\";\n        String secret = \"\";\n        Proxy proxy = new Proxy(Proxy.Type.SOCKS, new InetSocketAddress(\"127.0.0.1\", 1090));\n        //获取访问令牌\n        String body = HttpRequest.post(\n               String.format(\"https://github.com/login/oauth/access_token?client_id=%s&client_secret=%s&code=%s\", clientId, secret, code)\n        ).header(\"accept\", \"application/json\").\n                setProxy(proxy).\n                execute().\n                body();\n\n        GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);\n\n        //使用令牌获取用户信息\n        String userInfo = HttpRequest.get(\"https://api.github.com/user\").\n                setProxy(proxy).\n                header(\"accept\", \"application/json\").\n                header(\"Authorization\", \"token \" + githubTokenResponse.getAccess_token())\n                .execute().body();\n\n\n        return ResponseEntity.ok(userInfo);\n\n    }\n\n\n```\nGithubTokenResponse\n```java\npublic class GithubTokenResponse {\n\n    private  String access_token;\n\n    private  String scope;\n\n    private  String token_type;\n    }\n```\n\n ## 前端页面\n ```html\n<body>\n    <img id=\"avatar\"  style=\"display: none\" />\n    <h1 id=\"name\"></h1>\n  </body>\n ```\n```javascript\n\n  let code = getQueryVariable(\"code\");\n      ajaxGet(\"github/\" + code, function (data) {\n        let user = data;\n        avatar.style.display = \"block\";\n        avatar.src = user.avatar_url;\n        document.getElementById(\"name\").innerHTML = user.name;\n      });\n```\n\n# Gitee\n`Gitee`和`Github`基本是一样的，也是要先注册一个应用，地址在[这里](https://gitee.com/oauth/applications/new)，不过多描述了，直接上代码。\n\n## 后端实现\n\n```java\n\n    @GetMapping(\"gitee/{code}\")\n    public ResponseEntity getGiteeUser(@PathVariable String code) {\n        String clientId = \"\";\n        String secret = \"\";\n        String redirect_uri =  \"http://localhost/gitee.html\";\n        String url = String.format(\" https://gitee.com/oauth/token?grant_type=authorization_code&code=%s&client_id=%s&redirect_uri=%s&client_secret=%s\", code, clientId, redirect_uri, secret);\n        String body = HttpRequest.post(url).execute().body();\n        GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);\n        String userInfo = HttpRequest.get(\"https://gitee.com/api/v5/user?access_token=\" + githubTokenResponse.getAccess_token()).execute().body();\n        return ResponseEntity.ok(userInfo);\n    }\n\n```\n## 前端实现\n 与`Github`一致\n# Email\n\n`Email`实现的思路大致就是，输入邮箱之后，后台会向邮箱发送一个链接，通过这个链接激活账户。\n\n## 发送邮件\n\n```html\n  <body>\n    <input id=\"email\" type=\"text\" placeholder=\"邮箱地址\" />\n\n    <button onclick=\"register()\">注册</button>\n  </body>\n```\n\n```javascript\n <script>\n    function register() {\n      let value = email.value;\n      if (value) {\n        ajaxPost(\"email/create\", { email: value }, function (data) {\n          console.log(data);\n        });\n      }\n    }\n  </script>\n```\n\n```java\n\n    @PostMapping(\"/email/create\")\n    public ResponseEntity createEmailUrl(@RequestBody Map<String, String> map) throws UnsupportedEncodingException, MessagingException {\n        String token = JwtToken.makeToken(map.get(\"email\"), \"abc\", 60 * 30);\n         //注意，QQ邮箱或者163邮箱使用的不是登录密码，要去账户里生成授权码\n        SendEmail sendEmail = new SendEmail(\"123@qq.com\", \"password\", \"smtp.qq.com\");\n        sendEmail.setSubject(\"邮箱注册\");\n        String emailContent = String.format(\"<a href='%sauthemail.html?code=%s'>点击注册</a>,30分钟内有效\", pageUrl, token);\n        sendEmail.addContent(emailContent);\n        sendEmail.addReceive(new ReceiveAccount(map.get(\"email\"), \"xx996用户\", Message.RecipientType.TO));\n        sendEmail.setPersonal(\"xx996管理员\");\n        sendEmail.saveChange();\n        sendEmail.sendEmail();\n        return ResponseEntity.ok(token);\n    }\n```\n\n ## 验证邮件\n ### 后端\n ```java\n  @GetMapping(\"/email/{code}\")\n    public ResponseEntity emailInfo(@PathVariable String code) {\n\n        Map<String, String> map = new HashMap<>();\n        if (!JwtToken.verifyToken(code, \"abc\")) {\n\n            ResponseEntity.ok().body((map.put(\"mess\", \"身份认证失败\")));\n        }\n\n        String emial = JwtToken.getClaims(code, \"abc\").get().get(\"uid\").asString();\n        map.put(\"mess\", emial);\n        return ResponseEntity.ok().body(map);\n\n    }\n\n ```\n\n### 前端\n```html\n  <body>\n    <h1>\n      <span id=\"h1\"></span>\n    </h1>\n  </body>\n```\n\n```javascript\n  let code = getQueryVariable(\"code\");\n      ajaxGet(\"email/\" + code, function (data) {\n        $(\"#h1\").text(data.mess);\n      });\n```\n\n# 微信登录\n\n这里微信登录是使用小程序实现的，个人是无法申请微信登录的。\n\n[微信扫一扫登录(使用小程序实现)](https://blog.csdn.net/li5672/article/details/111170634)\n\n# 最后 \n项目中使用到的工具\n\n```xml\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>fastjson</artifactId>\n            <version>1.2.78</version>\n        </dependency>\n        <dependency>\n            <groupId>cn.hutool</groupId>\n            <artifactId>hutool-http</artifactId>\n            <version>5.7.9</version>\n        </dependency>\n        <dependency>\n            <groupId>cn.xx996</groupId>\n            <artifactId>springboot-tool</artifactId>\n            <version>1.0.0</version>\n        </dependency>\n        <dependency>\n            <groupId>cn.xx996</groupId>\n            <artifactId>email</artifactId>\n            <version>1.0.0</version>\n        </dependency>\n```","source":"_posts/tool/使用第三方授权登录自己的网站.md","raw":"---\ntitle: 使用第三方授权登录自己的网站\ntags:\n  - gitee\n  - github\n  - email\n  - wechat\ncategories: 工具\nabbrlink: e44222ec\ndate: 2021-09-10 21:12:57\n---\n![在这里插入图片描述](https://img-blog.csdnimg.cn/4739bc34bb234f67bb546870ebcdf6be.png)\n\n# Github\n## 注册应用\n如果想要使用`Github`为应用授权的话，要先去自己的账户上注册一个应用，[点击](https://github.com/settings/developers)注册。\n\n![\\[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xl0CN1FD-1629897178733)(https://imgblog.csdnimg.cn/99253549a82d43258425957b20d75b21.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_54,color_FFFFFF,t_70,g_se,x_16)\\]](https://img-blog.csdnimg.cn/37197da007f540dfb6a3bf153261ec8e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_49,color_FFFFFF,t_70,g_se,x_16)\n\n名称随便输入，写上自己网站的主页，最后一个是授权成功之后回调的页面。\n\n创建成功之后会看到这个 \n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/b2daf14dc5bc4132a0f7d18e865a30f0.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_60,color_FFFFFF,t_70,g_se,x_16)\n## 跳转到Github授权页面\n 点一下`Generate a new client secret`会生成一个秘钥，只会出现一次，要保存好它，不要泄露出去。后面会用到的。\n\n下面开始写代码了，只是做一个简单的示例，没有特别复杂的。就是文档顶部的四种类型。图片是在[iconfont](https://www.iconfont.cn/)找到，这个不做过多描述了。\n\n```javascript\n\n function github() {\n      location.href = `https://github.com/login/oauth/authorize?client_id=39b050937104c9618fee&redirect_uri=http://localhost/me.html`;\n    }\n```\n\n当点击`Github`图标之后会调用这个方法，跳转到授权页面，上面那个用到两个参数\n\n*  client_id\n  就是上面应用的`client_id`，千万不要把`secret`放在前端，不能暴露出来的\n  \n  * redirect_uri\n     授权成功返回的页面，上面也提到过的。\n \n 调用方法之后会跳转到这个页面，输入账号密码登录就可以了。\n![在这里插入图片描述](https://img-blog.csdnimg.cn/743fa3f0d04c4673ab0b3268fe77634d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_52,color_FFFFFF,t_70,g_se,x_16)\n密码验证成功之后会跳转到`http://localhost/me.html?code=ffwgregregregre`,记住这个`code`，后面会用到的。\n\n## 获取到授权码\n\n在授权页面授权成功之后，会得到一个授权码，就是上面的`code`，拿到这个去后台服务获取用户信息。\n\n 要获取到用户信息首页要使用`授权码`得到一个令牌，使用这个令牌向`Github`请求用户信息。\n## 后台实现\n\n```java\n     @GetMapping(\"github/{code}\")\n    public ResponseEntity getUserInfo(@PathVariable String code) {\n\n        String clientId = \"\";\n        String secret = \"\";\n        Proxy proxy = new Proxy(Proxy.Type.SOCKS, new InetSocketAddress(\"127.0.0.1\", 1090));\n        //获取访问令牌\n        String body = HttpRequest.post(\n               String.format(\"https://github.com/login/oauth/access_token?client_id=%s&client_secret=%s&code=%s\", clientId, secret, code)\n        ).header(\"accept\", \"application/json\").\n                setProxy(proxy).\n                execute().\n                body();\n\n        GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);\n\n        //使用令牌获取用户信息\n        String userInfo = HttpRequest.get(\"https://api.github.com/user\").\n                setProxy(proxy).\n                header(\"accept\", \"application/json\").\n                header(\"Authorization\", \"token \" + githubTokenResponse.getAccess_token())\n                .execute().body();\n\n\n        return ResponseEntity.ok(userInfo);\n\n    }\n\n\n```\nGithubTokenResponse\n```java\npublic class GithubTokenResponse {\n\n    private  String access_token;\n\n    private  String scope;\n\n    private  String token_type;\n    }\n```\n\n ## 前端页面\n ```html\n<body>\n    <img id=\"avatar\"  style=\"display: none\" />\n    <h1 id=\"name\"></h1>\n  </body>\n ```\n```javascript\n\n  let code = getQueryVariable(\"code\");\n      ajaxGet(\"github/\" + code, function (data) {\n        let user = data;\n        avatar.style.display = \"block\";\n        avatar.src = user.avatar_url;\n        document.getElementById(\"name\").innerHTML = user.name;\n      });\n```\n\n# Gitee\n`Gitee`和`Github`基本是一样的，也是要先注册一个应用，地址在[这里](https://gitee.com/oauth/applications/new)，不过多描述了，直接上代码。\n\n## 后端实现\n\n```java\n\n    @GetMapping(\"gitee/{code}\")\n    public ResponseEntity getGiteeUser(@PathVariable String code) {\n        String clientId = \"\";\n        String secret = \"\";\n        String redirect_uri =  \"http://localhost/gitee.html\";\n        String url = String.format(\" https://gitee.com/oauth/token?grant_type=authorization_code&code=%s&client_id=%s&redirect_uri=%s&client_secret=%s\", code, clientId, redirect_uri, secret);\n        String body = HttpRequest.post(url).execute().body();\n        GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);\n        String userInfo = HttpRequest.get(\"https://gitee.com/api/v5/user?access_token=\" + githubTokenResponse.getAccess_token()).execute().body();\n        return ResponseEntity.ok(userInfo);\n    }\n\n```\n## 前端实现\n 与`Github`一致\n# Email\n\n`Email`实现的思路大致就是，输入邮箱之后，后台会向邮箱发送一个链接，通过这个链接激活账户。\n\n## 发送邮件\n\n```html\n  <body>\n    <input id=\"email\" type=\"text\" placeholder=\"邮箱地址\" />\n\n    <button onclick=\"register()\">注册</button>\n  </body>\n```\n\n```javascript\n <script>\n    function register() {\n      let value = email.value;\n      if (value) {\n        ajaxPost(\"email/create\", { email: value }, function (data) {\n          console.log(data);\n        });\n      }\n    }\n  </script>\n```\n\n```java\n\n    @PostMapping(\"/email/create\")\n    public ResponseEntity createEmailUrl(@RequestBody Map<String, String> map) throws UnsupportedEncodingException, MessagingException {\n        String token = JwtToken.makeToken(map.get(\"email\"), \"abc\", 60 * 30);\n         //注意，QQ邮箱或者163邮箱使用的不是登录密码，要去账户里生成授权码\n        SendEmail sendEmail = new SendEmail(\"123@qq.com\", \"password\", \"smtp.qq.com\");\n        sendEmail.setSubject(\"邮箱注册\");\n        String emailContent = String.format(\"<a href='%sauthemail.html?code=%s'>点击注册</a>,30分钟内有效\", pageUrl, token);\n        sendEmail.addContent(emailContent);\n        sendEmail.addReceive(new ReceiveAccount(map.get(\"email\"), \"xx996用户\", Message.RecipientType.TO));\n        sendEmail.setPersonal(\"xx996管理员\");\n        sendEmail.saveChange();\n        sendEmail.sendEmail();\n        return ResponseEntity.ok(token);\n    }\n```\n\n ## 验证邮件\n ### 后端\n ```java\n  @GetMapping(\"/email/{code}\")\n    public ResponseEntity emailInfo(@PathVariable String code) {\n\n        Map<String, String> map = new HashMap<>();\n        if (!JwtToken.verifyToken(code, \"abc\")) {\n\n            ResponseEntity.ok().body((map.put(\"mess\", \"身份认证失败\")));\n        }\n\n        String emial = JwtToken.getClaims(code, \"abc\").get().get(\"uid\").asString();\n        map.put(\"mess\", emial);\n        return ResponseEntity.ok().body(map);\n\n    }\n\n ```\n\n### 前端\n```html\n  <body>\n    <h1>\n      <span id=\"h1\"></span>\n    </h1>\n  </body>\n```\n\n```javascript\n  let code = getQueryVariable(\"code\");\n      ajaxGet(\"email/\" + code, function (data) {\n        $(\"#h1\").text(data.mess);\n      });\n```\n\n# 微信登录\n\n这里微信登录是使用小程序实现的，个人是无法申请微信登录的。\n\n[微信扫一扫登录(使用小程序实现)](https://blog.csdn.net/li5672/article/details/111170634)\n\n# 最后 \n项目中使用到的工具\n\n```xml\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>fastjson</artifactId>\n            <version>1.2.78</version>\n        </dependency>\n        <dependency>\n            <groupId>cn.hutool</groupId>\n            <artifactId>hutool-http</artifactId>\n            <version>5.7.9</version>\n        </dependency>\n        <dependency>\n            <groupId>cn.xx996</groupId>\n            <artifactId>springboot-tool</artifactId>\n            <version>1.0.0</version>\n        </dependency>\n        <dependency>\n            <groupId>cn.xx996</groupId>\n            <artifactId>email</artifactId>\n            <version>1.0.0</version>\n        </dependency>\n```","slug":"tool/使用第三方授权登录自己的网站","published":1,"updated":"2021-09-16T08:48:58.153Z","_id":"cktmoybku002fkotraskrem0q","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"https://img-blog.csdnimg.cn/4739bc34bb234f67bb546870ebcdf6be.png\" alt=\"在这里插入图片描述\"></p>\n<h1 id=\"Github\"><a href=\"#Github\" class=\"headerlink\" title=\"Github\"></a>Github</h1><h2 id=\"注册应用\"><a href=\"#注册应用\" class=\"headerlink\" title=\"注册应用\"></a>注册应用</h2><p>如果想要使用<code>Github</code>为应用授权的话，要先去自己的账户上注册一个应用，<a href=\"https://github.com/settings/developers\">点击</a>注册。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/37197da007f540dfb6a3bf153261ec8e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_49,color_FFFFFF,t_70,g_se,x_16\" alt=\"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xl0CN1FD-1629897178733)(https://imgblog.csdnimg.cn/99253549a82d43258425957b20d75b21.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_54,color_FFFFFF,t_70,g_se,x_16)]\"></p>\n<p>名称随便输入，写上自己网站的主页，最后一个是授权成功之后回调的页面。</p>\n<p>创建成功之后会看到这个 </p>\n<p><img src=\"https://img-blog.csdnimg.cn/b2daf14dc5bc4132a0f7d18e865a30f0.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_60,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"></p>\n<h2 id=\"跳转到Github授权页面\"><a href=\"#跳转到Github授权页面\" class=\"headerlink\" title=\"跳转到Github授权页面\"></a>跳转到Github授权页面</h2><p> 点一下<code>Generate a new client secret</code>会生成一个秘钥，只会出现一次，要保存好它，不要泄露出去。后面会用到的。</p>\n<p>下面开始写代码了，只是做一个简单的示例，没有特别复杂的。就是文档顶部的四种类型。图片是在<a href=\"https://www.iconfont.cn/\">iconfont</a>找到，这个不做过多描述了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">github</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">     location.href = <span class=\"string\">`https://github.com/login/oauth/authorize?client_id=39b050937104c9618fee&amp;redirect_uri=http://localhost/me.html`</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>当点击<code>Github</code>图标之后会调用这个方法，跳转到授权页面，上面那个用到两个参数</p>\n<ul>\n<li>client_id<br>就是上面应用的<code>client_id</code>，千万不要把<code>secret</code>放在前端，不能暴露出来的</li>\n<li>redirect_uri<br> 授权成功返回的页面，上面也提到过的。</li>\n</ul>\n<p> 调用方法之后会跳转到这个页面，输入账号密码登录就可以了。<br><img src=\"https://img-blog.csdnimg.cn/743fa3f0d04c4673ab0b3268fe77634d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_52,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"><br>密码验证成功之后会跳转到<code>http://localhost/me.html?code=ffwgregregregre</code>,记住这个<code>code</code>，后面会用到的。</p>\n<h2 id=\"获取到授权码\"><a href=\"#获取到授权码\" class=\"headerlink\" title=\"获取到授权码\"></a>获取到授权码</h2><p>在授权页面授权成功之后，会得到一个授权码，就是上面的<code>code</code>，拿到这个去后台服务获取用户信息。</p>\n<p> 要获取到用户信息首页要使用<code>授权码</code>得到一个令牌，使用这个令牌向<code>Github</code>请求用户信息。</p>\n<h2 id=\"后台实现\"><a href=\"#后台实现\" class=\"headerlink\" title=\"后台实现\"></a>后台实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@GetMapping(&quot;github/&#123;code&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">getUserInfo</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String code)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    String clientId = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    String secret = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    Proxy proxy = <span class=\"keyword\">new</span> Proxy(Proxy.Type.SOCKS, <span class=\"keyword\">new</span> InetSocketAddress(<span class=\"string\">&quot;127.0.0.1&quot;</span>, <span class=\"number\">1090</span>));</span><br><span class=\"line\">    <span class=\"comment\">//获取访问令牌</span></span><br><span class=\"line\">    String body = HttpRequest.post(</span><br><span class=\"line\">           String.format(<span class=\"string\">&quot;https://github.com/login/oauth/access_token?client_id=%s&amp;client_secret=%s&amp;code=%s&quot;</span>, clientId, secret, code)</span><br><span class=\"line\">    ).header(<span class=\"string\">&quot;accept&quot;</span>, <span class=\"string\">&quot;application/json&quot;</span>).</span><br><span class=\"line\">            setProxy(proxy).</span><br><span class=\"line\">            execute().</span><br><span class=\"line\">            body();</span><br><span class=\"line\"></span><br><span class=\"line\">    GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//使用令牌获取用户信息</span></span><br><span class=\"line\">    String userInfo = HttpRequest.get(<span class=\"string\">&quot;https://api.github.com/user&quot;</span>).</span><br><span class=\"line\">            setProxy(proxy).</span><br><span class=\"line\">            header(<span class=\"string\">&quot;accept&quot;</span>, <span class=\"string\">&quot;application/json&quot;</span>).</span><br><span class=\"line\">            header(<span class=\"string\">&quot;Authorization&quot;</span>, <span class=\"string\">&quot;token &quot;</span> + githubTokenResponse.getAccess_token())</span><br><span class=\"line\">            .execute().body();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ResponseEntity.ok(userInfo);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>GithubTokenResponse</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GithubTokenResponse</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span>  String access_token;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span>  String scope;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span>  String token_type;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"前端页面\"><a href=\"#前端页面\" class=\"headerlink\" title=\"前端页面\"></a>前端页面</h2> <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;avatar&quot;</span>  <span class=\"attr\">style</span>=<span class=\"string\">&quot;display: none&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> code = getQueryVariable(<span class=\"string\">&quot;code&quot;</span>);</span><br><span class=\"line\">    ajaxGet(<span class=\"string\">&quot;github/&quot;</span> + code, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> user = data;</span><br><span class=\"line\">      avatar.style.display = <span class=\"string\">&quot;block&quot;</span>;</span><br><span class=\"line\">      avatar.src = user.avatar_url;</span><br><span class=\"line\">      <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;name&quot;</span>).innerHTML = user.name;</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Gitee\"><a href=\"#Gitee\" class=\"headerlink\" title=\"Gitee\"></a>Gitee</h1><p><code>Gitee</code>和<code>Github</code>基本是一样的，也是要先注册一个应用，地址在<a href=\"https://gitee.com/oauth/applications/new\">这里</a>，不过多描述了，直接上代码。</p>\n<h2 id=\"后端实现\"><a href=\"#后端实现\" class=\"headerlink\" title=\"后端实现\"></a>后端实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;gitee/&#123;code&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">getGiteeUser</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String code)</span> </span>&#123;</span><br><span class=\"line\">    String clientId = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    String secret = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    String redirect_uri =  <span class=\"string\">&quot;http://localhost/gitee.html&quot;</span>;</span><br><span class=\"line\">    String url = String.format(<span class=\"string\">&quot; https://gitee.com/oauth/token?grant_type=authorization_code&amp;code=%s&amp;client_id=%s&amp;redirect_uri=%s&amp;client_secret=%s&quot;</span>, code, clientId, redirect_uri, secret);</span><br><span class=\"line\">    String body = HttpRequest.post(url).execute().body();</span><br><span class=\"line\">    GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);</span><br><span class=\"line\">    String userInfo = HttpRequest.get(<span class=\"string\">&quot;https://gitee.com/api/v5/user?access_token=&quot;</span> + githubTokenResponse.getAccess_token()).execute().body();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ResponseEntity.ok(userInfo);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"前端实现\"><a href=\"#前端实现\" class=\"headerlink\" title=\"前端实现\"></a>前端实现</h2><p> 与<code>Github</code>一致</p>\n<h1 id=\"Email\"><a href=\"#Email\" class=\"headerlink\" title=\"Email\"></a>Email</h1><p><code>Email</code>实现的思路大致就是，输入邮箱之后，后台会向邮箱发送一个链接，通过这个链接激活账户。</p>\n<h2 id=\"发送邮件\"><a href=\"#发送邮件\" class=\"headerlink\" title=\"发送邮件\"></a>发送邮件</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;邮箱地址&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;register()&quot;</span>&gt;</span>注册<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">let</span> value = email.value;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">       ajaxPost(<span class=\"string\">&quot;email/create&quot;</span>, &#123; <span class=\"attr\">email</span>: value &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">       &#125;);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@PostMapping(&quot;/email/create&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">createEmailUrl</span><span class=\"params\">(<span class=\"meta\">@RequestBody</span> Map&lt;String, String&gt; map)</span> <span class=\"keyword\">throws</span> UnsupportedEncodingException, MessagingException </span>&#123;</span><br><span class=\"line\">    String token = JwtToken.makeToken(map.get(<span class=\"string\">&quot;email&quot;</span>), <span class=\"string\">&quot;abc&quot;</span>, <span class=\"number\">60</span> * <span class=\"number\">30</span>);</span><br><span class=\"line\">     <span class=\"comment\">//注意，QQ邮箱或者163邮箱使用的不是登录密码，要去账户里生成授权码</span></span><br><span class=\"line\">    SendEmail sendEmail = <span class=\"keyword\">new</span> SendEmail(<span class=\"string\">&quot;123@qq.com&quot;</span>, <span class=\"string\">&quot;password&quot;</span>, <span class=\"string\">&quot;smtp.qq.com&quot;</span>);</span><br><span class=\"line\">    sendEmail.setSubject(<span class=\"string\">&quot;邮箱注册&quot;</span>);</span><br><span class=\"line\">    String emailContent = String.format(<span class=\"string\">&quot;&lt;a href=&#x27;%sauthemail.html?code=%s&#x27;&gt;点击注册&lt;/a&gt;,30分钟内有效&quot;</span>, pageUrl, token);</span><br><span class=\"line\">    sendEmail.addContent(emailContent);</span><br><span class=\"line\">    sendEmail.addReceive(<span class=\"keyword\">new</span> ReceiveAccount(map.get(<span class=\"string\">&quot;email&quot;</span>), <span class=\"string\">&quot;xx996用户&quot;</span>, Message.RecipientType.TO));</span><br><span class=\"line\">    sendEmail.setPersonal(<span class=\"string\">&quot;xx996管理员&quot;</span>);</span><br><span class=\"line\">    sendEmail.saveChange();</span><br><span class=\"line\">    sendEmail.sendEmail();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ResponseEntity.ok(token);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"验证邮件\"><a href=\"#验证邮件\" class=\"headerlink\" title=\"验证邮件\"></a>验证邮件</h2><h3 id=\"后端\"><a href=\"#后端\" class=\"headerlink\" title=\"后端\"></a>后端</h3> <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;/email/&#123;code&#125;&quot;)</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">emailInfo</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String code)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      Map&lt;String, String&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!JwtToken.verifyToken(code, <span class=\"string\">&quot;abc&quot;</span>)) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">          ResponseEntity.ok().body((map.put(<span class=\"string\">&quot;mess&quot;</span>, <span class=\"string\">&quot;身份认证失败&quot;</span>)));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      String emial = JwtToken.getClaims(code, <span class=\"string\">&quot;abc&quot;</span>).get().get(<span class=\"string\">&quot;uid&quot;</span>).asString();</span><br><span class=\"line\">      map.put(<span class=\"string\">&quot;mess&quot;</span>, emial);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> ResponseEntity.ok().body(map);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;h1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> code = getQueryVariable(<span class=\"string\">&quot;code&quot;</span>);</span><br><span class=\"line\">    ajaxGet(<span class=\"string\">&quot;email/&quot;</span> + code, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">      $(<span class=\"string\">&quot;#h1&quot;</span>).text(data.mess);</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"微信登录\"><a href=\"#微信登录\" class=\"headerlink\" title=\"微信登录\"></a>微信登录</h1><p>这里微信登录是使用小程序实现的，个人是无法申请微信登录的。</p>\n<p><a href=\"https://blog.csdn.net/li5672/article/details/111170634\">微信扫一扫登录(使用小程序实现)</a></p>\n<h1 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h1><p>项目中使用到的工具</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>fastjson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.78<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.hutool<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>hutool-http<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>5.7.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.xx996<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>springboot-tool<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.xx996<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>email<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://img-blog.csdnimg.cn/4739bc34bb234f67bb546870ebcdf6be.png\" alt=\"在这里插入图片描述\"></p>\n<h1 id=\"Github\"><a href=\"#Github\" class=\"headerlink\" title=\"Github\"></a>Github</h1><h2 id=\"注册应用\"><a href=\"#注册应用\" class=\"headerlink\" title=\"注册应用\"></a>注册应用</h2><p>如果想要使用<code>Github</code>为应用授权的话，要先去自己的账户上注册一个应用，<a href=\"https://github.com/settings/developers\">点击</a>注册。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/37197da007f540dfb6a3bf153261ec8e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_49,color_FFFFFF,t_70,g_se,x_16\" alt=\"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xl0CN1FD-1629897178733)(https://imgblog.csdnimg.cn/99253549a82d43258425957b20d75b21.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_54,color_FFFFFF,t_70,g_se,x_16)]\"></p>\n<p>名称随便输入，写上自己网站的主页，最后一个是授权成功之后回调的页面。</p>\n<p>创建成功之后会看到这个 </p>\n<p><img src=\"https://img-blog.csdnimg.cn/b2daf14dc5bc4132a0f7d18e865a30f0.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_60,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"></p>\n<h2 id=\"跳转到Github授权页面\"><a href=\"#跳转到Github授权页面\" class=\"headerlink\" title=\"跳转到Github授权页面\"></a>跳转到Github授权页面</h2><p> 点一下<code>Generate a new client secret</code>会生成一个秘钥，只会出现一次，要保存好它，不要泄露出去。后面会用到的。</p>\n<p>下面开始写代码了，只是做一个简单的示例，没有特别复杂的。就是文档顶部的四种类型。图片是在<a href=\"https://www.iconfont.cn/\">iconfont</a>找到，这个不做过多描述了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">github</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">     location.href = <span class=\"string\">`https://github.com/login/oauth/authorize?client_id=39b050937104c9618fee&amp;redirect_uri=http://localhost/me.html`</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>当点击<code>Github</code>图标之后会调用这个方法，跳转到授权页面，上面那个用到两个参数</p>\n<ul>\n<li>client_id<br>就是上面应用的<code>client_id</code>，千万不要把<code>secret</code>放在前端，不能暴露出来的</li>\n<li>redirect_uri<br> 授权成功返回的页面，上面也提到过的。</li>\n</ul>\n<p> 调用方法之后会跳转到这个页面，输入账号密码登录就可以了。<br><img src=\"https://img-blog.csdnimg.cn/743fa3f0d04c4673ab0b3268fe77634d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAeHjlsI_lj7Dnga8=,size_52,color_FFFFFF,t_70,g_se,x_16\" alt=\"在这里插入图片描述\"><br>密码验证成功之后会跳转到<code>http://localhost/me.html?code=ffwgregregregre</code>,记住这个<code>code</code>，后面会用到的。</p>\n<h2 id=\"获取到授权码\"><a href=\"#获取到授权码\" class=\"headerlink\" title=\"获取到授权码\"></a>获取到授权码</h2><p>在授权页面授权成功之后，会得到一个授权码，就是上面的<code>code</code>，拿到这个去后台服务获取用户信息。</p>\n<p> 要获取到用户信息首页要使用<code>授权码</code>得到一个令牌，使用这个令牌向<code>Github</code>请求用户信息。</p>\n<h2 id=\"后台实现\"><a href=\"#后台实现\" class=\"headerlink\" title=\"后台实现\"></a>后台实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@GetMapping(&quot;github/&#123;code&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">getUserInfo</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String code)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    String clientId = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    String secret = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    Proxy proxy = <span class=\"keyword\">new</span> Proxy(Proxy.Type.SOCKS, <span class=\"keyword\">new</span> InetSocketAddress(<span class=\"string\">&quot;127.0.0.1&quot;</span>, <span class=\"number\">1090</span>));</span><br><span class=\"line\">    <span class=\"comment\">//获取访问令牌</span></span><br><span class=\"line\">    String body = HttpRequest.post(</span><br><span class=\"line\">           String.format(<span class=\"string\">&quot;https://github.com/login/oauth/access_token?client_id=%s&amp;client_secret=%s&amp;code=%s&quot;</span>, clientId, secret, code)</span><br><span class=\"line\">    ).header(<span class=\"string\">&quot;accept&quot;</span>, <span class=\"string\">&quot;application/json&quot;</span>).</span><br><span class=\"line\">            setProxy(proxy).</span><br><span class=\"line\">            execute().</span><br><span class=\"line\">            body();</span><br><span class=\"line\"></span><br><span class=\"line\">    GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//使用令牌获取用户信息</span></span><br><span class=\"line\">    String userInfo = HttpRequest.get(<span class=\"string\">&quot;https://api.github.com/user&quot;</span>).</span><br><span class=\"line\">            setProxy(proxy).</span><br><span class=\"line\">            header(<span class=\"string\">&quot;accept&quot;</span>, <span class=\"string\">&quot;application/json&quot;</span>).</span><br><span class=\"line\">            header(<span class=\"string\">&quot;Authorization&quot;</span>, <span class=\"string\">&quot;token &quot;</span> + githubTokenResponse.getAccess_token())</span><br><span class=\"line\">            .execute().body();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ResponseEntity.ok(userInfo);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>GithubTokenResponse</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GithubTokenResponse</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span>  String access_token;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span>  String scope;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span>  String token_type;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"前端页面\"><a href=\"#前端页面\" class=\"headerlink\" title=\"前端页面\"></a>前端页面</h2> <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;avatar&quot;</span>  <span class=\"attr\">style</span>=<span class=\"string\">&quot;display: none&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> code = getQueryVariable(<span class=\"string\">&quot;code&quot;</span>);</span><br><span class=\"line\">    ajaxGet(<span class=\"string\">&quot;github/&quot;</span> + code, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> user = data;</span><br><span class=\"line\">      avatar.style.display = <span class=\"string\">&quot;block&quot;</span>;</span><br><span class=\"line\">      avatar.src = user.avatar_url;</span><br><span class=\"line\">      <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;name&quot;</span>).innerHTML = user.name;</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Gitee\"><a href=\"#Gitee\" class=\"headerlink\" title=\"Gitee\"></a>Gitee</h1><p><code>Gitee</code>和<code>Github</code>基本是一样的，也是要先注册一个应用，地址在<a href=\"https://gitee.com/oauth/applications/new\">这里</a>，不过多描述了，直接上代码。</p>\n<h2 id=\"后端实现\"><a href=\"#后端实现\" class=\"headerlink\" title=\"后端实现\"></a>后端实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;gitee/&#123;code&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">getGiteeUser</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String code)</span> </span>&#123;</span><br><span class=\"line\">    String clientId = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    String secret = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    String redirect_uri =  <span class=\"string\">&quot;http://localhost/gitee.html&quot;</span>;</span><br><span class=\"line\">    String url = String.format(<span class=\"string\">&quot; https://gitee.com/oauth/token?grant_type=authorization_code&amp;code=%s&amp;client_id=%s&amp;redirect_uri=%s&amp;client_secret=%s&quot;</span>, code, clientId, redirect_uri, secret);</span><br><span class=\"line\">    String body = HttpRequest.post(url).execute().body();</span><br><span class=\"line\">    GithubTokenResponse githubTokenResponse = JSON.parseObject(body, GithubTokenResponse.class);</span><br><span class=\"line\">    String userInfo = HttpRequest.get(<span class=\"string\">&quot;https://gitee.com/api/v5/user?access_token=&quot;</span> + githubTokenResponse.getAccess_token()).execute().body();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ResponseEntity.ok(userInfo);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"前端实现\"><a href=\"#前端实现\" class=\"headerlink\" title=\"前端实现\"></a>前端实现</h2><p> 与<code>Github</code>一致</p>\n<h1 id=\"Email\"><a href=\"#Email\" class=\"headerlink\" title=\"Email\"></a>Email</h1><p><code>Email</code>实现的思路大致就是，输入邮箱之后，后台会向邮箱发送一个链接，通过这个链接激活账户。</p>\n<h2 id=\"发送邮件\"><a href=\"#发送邮件\" class=\"headerlink\" title=\"发送邮件\"></a>发送邮件</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;邮箱地址&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;register()&quot;</span>&gt;</span>注册<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">let</span> value = email.value;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">       ajaxPost(<span class=\"string\">&quot;email/create&quot;</span>, &#123; <span class=\"attr\">email</span>: value &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">       &#125;);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@PostMapping(&quot;/email/create&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">createEmailUrl</span><span class=\"params\">(<span class=\"meta\">@RequestBody</span> Map&lt;String, String&gt; map)</span> <span class=\"keyword\">throws</span> UnsupportedEncodingException, MessagingException </span>&#123;</span><br><span class=\"line\">    String token = JwtToken.makeToken(map.get(<span class=\"string\">&quot;email&quot;</span>), <span class=\"string\">&quot;abc&quot;</span>, <span class=\"number\">60</span> * <span class=\"number\">30</span>);</span><br><span class=\"line\">     <span class=\"comment\">//注意，QQ邮箱或者163邮箱使用的不是登录密码，要去账户里生成授权码</span></span><br><span class=\"line\">    SendEmail sendEmail = <span class=\"keyword\">new</span> SendEmail(<span class=\"string\">&quot;123@qq.com&quot;</span>, <span class=\"string\">&quot;password&quot;</span>, <span class=\"string\">&quot;smtp.qq.com&quot;</span>);</span><br><span class=\"line\">    sendEmail.setSubject(<span class=\"string\">&quot;邮箱注册&quot;</span>);</span><br><span class=\"line\">    String emailContent = String.format(<span class=\"string\">&quot;&lt;a href=&#x27;%sauthemail.html?code=%s&#x27;&gt;点击注册&lt;/a&gt;,30分钟内有效&quot;</span>, pageUrl, token);</span><br><span class=\"line\">    sendEmail.addContent(emailContent);</span><br><span class=\"line\">    sendEmail.addReceive(<span class=\"keyword\">new</span> ReceiveAccount(map.get(<span class=\"string\">&quot;email&quot;</span>), <span class=\"string\">&quot;xx996用户&quot;</span>, Message.RecipientType.TO));</span><br><span class=\"line\">    sendEmail.setPersonal(<span class=\"string\">&quot;xx996管理员&quot;</span>);</span><br><span class=\"line\">    sendEmail.saveChange();</span><br><span class=\"line\">    sendEmail.sendEmail();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ResponseEntity.ok(token);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"验证邮件\"><a href=\"#验证邮件\" class=\"headerlink\" title=\"验证邮件\"></a>验证邮件</h2><h3 id=\"后端\"><a href=\"#后端\" class=\"headerlink\" title=\"后端\"></a>后端</h3> <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;/email/&#123;code&#125;&quot;)</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> ResponseEntity <span class=\"title\">emailInfo</span><span class=\"params\">(<span class=\"meta\">@PathVariable</span> String code)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      Map&lt;String, String&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!JwtToken.verifyToken(code, <span class=\"string\">&quot;abc&quot;</span>)) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">          ResponseEntity.ok().body((map.put(<span class=\"string\">&quot;mess&quot;</span>, <span class=\"string\">&quot;身份认证失败&quot;</span>)));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      String emial = JwtToken.getClaims(code, <span class=\"string\">&quot;abc&quot;</span>).get().get(<span class=\"string\">&quot;uid&quot;</span>).asString();</span><br><span class=\"line\">      map.put(<span class=\"string\">&quot;mess&quot;</span>, emial);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> ResponseEntity.ok().body(map);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;h1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> code = getQueryVariable(<span class=\"string\">&quot;code&quot;</span>);</span><br><span class=\"line\">    ajaxGet(<span class=\"string\">&quot;email/&quot;</span> + code, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">      $(<span class=\"string\">&quot;#h1&quot;</span>).text(data.mess);</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"微信登录\"><a href=\"#微信登录\" class=\"headerlink\" title=\"微信登录\"></a>微信登录</h1><p>这里微信登录是使用小程序实现的，个人是无法申请微信登录的。</p>\n<p><a href=\"https://blog.csdn.net/li5672/article/details/111170634\">微信扫一扫登录(使用小程序实现)</a></p>\n<h1 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h1><p>项目中使用到的工具</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>fastjson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.78<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.hutool<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>hutool-http<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>5.7.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.xx996<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>springboot-tool<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.xx996<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>email<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"免费获取JetBrains一年全家桶","abbrlink":"4c17429a","date":"2021-09-10T13:09:23.000Z","_content":" \n登录[Github Education](https://education.github.com/)\n![](https://img-blog.csdnimg.cn/img_convert/4bd2e3f02f00c140b28fbfcc0cea026a.png)\n\n点击`Get benefits`\n\n![](https://img-blog.csdnimg.cn/img_convert/18ae8025125437848fc8e8812fed27ec.png)\n\n点击`Get student benefits`\n\n![](https://img-blog.csdnimg.cn/img_convert/c7b7a368e4d2b79e30a2fb57fe288af4.png)\n\n下一步以后上传自己的学生证件和个人信息等待审核完成。\n\n时间多久不太确定，我大概等了一个月，审核通过之后会收到一封邮件\n\n收到成功之后的邮件之后 到[这里](https://www.jetbrains.com/shop/eform/students)\n\n![](https://img-blog.csdnimg.cn/img_convert/0af30a89da36c9e59a7c04ba04c33fe3.png)\n\n关联上申请时候的github就可以了，关联之后登陆`JetBrains`账户就可得到授权了\n\n![](https://img-blog.csdnimg.cn/img_convert/93811702d508c41148a59570ff1a04b8.png)\n\n\n 如果没有学生身份的话，还是建议大家购买正版，拒绝盗版软件，购买正版请点击[这里](https://www.jetbrains.com/)","source":"_posts/tool/免费获取JetBrains一年全家桶.md","raw":"---\ntitle: 免费获取JetBrains一年全家桶\ntags: JetBrains\ncategories: 工具\nabbrlink: 4c17429a\ndate: 2021-09-10 21:09:23\n---\n \n登录[Github Education](https://education.github.com/)\n![](https://img-blog.csdnimg.cn/img_convert/4bd2e3f02f00c140b28fbfcc0cea026a.png)\n\n点击`Get benefits`\n\n![](https://img-blog.csdnimg.cn/img_convert/18ae8025125437848fc8e8812fed27ec.png)\n\n点击`Get student benefits`\n\n![](https://img-blog.csdnimg.cn/img_convert/c7b7a368e4d2b79e30a2fb57fe288af4.png)\n\n下一步以后上传自己的学生证件和个人信息等待审核完成。\n\n时间多久不太确定，我大概等了一个月，审核通过之后会收到一封邮件\n\n收到成功之后的邮件之后 到[这里](https://www.jetbrains.com/shop/eform/students)\n\n![](https://img-blog.csdnimg.cn/img_convert/0af30a89da36c9e59a7c04ba04c33fe3.png)\n\n关联上申请时候的github就可以了，关联之后登陆`JetBrains`账户就可得到授权了\n\n![](https://img-blog.csdnimg.cn/img_convert/93811702d508c41148a59570ff1a04b8.png)\n\n\n 如果没有学生身份的话，还是建议大家购买正版，拒绝盗版软件，购买正版请点击[这里](https://www.jetbrains.com/)","slug":"tool/免费获取JetBrains一年全家桶","published":1,"updated":"2021-09-16T08:48:58.155Z","_id":"cktmoybkv002kkotr2plyea9x","comments":1,"layout":"post","photos":[],"link":"","content":"<p>登录<a href=\"https://education.github.com/\">Github Education</a><br><img src=\"https://img-blog.csdnimg.cn/img_convert/4bd2e3f02f00c140b28fbfcc0cea026a.png\"></p>\n<p>点击<code>Get benefits</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/18ae8025125437848fc8e8812fed27ec.png\"></p>\n<p>点击<code>Get student benefits</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/c7b7a368e4d2b79e30a2fb57fe288af4.png\"></p>\n<p>下一步以后上传自己的学生证件和个人信息等待审核完成。</p>\n<p>时间多久不太确定，我大概等了一个月，审核通过之后会收到一封邮件</p>\n<p>收到成功之后的邮件之后 到<a href=\"https://www.jetbrains.com/shop/eform/students\">这里</a></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/0af30a89da36c9e59a7c04ba04c33fe3.png\"></p>\n<p>关联上申请时候的github就可以了，关联之后登陆<code>JetBrains</code>账户就可得到授权了</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/93811702d508c41148a59570ff1a04b8.png\"></p>\n<p> 如果没有学生身份的话，还是建议大家购买正版，拒绝盗版软件，购买正版请点击<a href=\"https://www.jetbrains.com/\">这里</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>登录<a href=\"https://education.github.com/\">Github Education</a><br><img src=\"https://img-blog.csdnimg.cn/img_convert/4bd2e3f02f00c140b28fbfcc0cea026a.png\"></p>\n<p>点击<code>Get benefits</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/18ae8025125437848fc8e8812fed27ec.png\"></p>\n<p>点击<code>Get student benefits</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/c7b7a368e4d2b79e30a2fb57fe288af4.png\"></p>\n<p>下一步以后上传自己的学生证件和个人信息等待审核完成。</p>\n<p>时间多久不太确定，我大概等了一个月，审核通过之后会收到一封邮件</p>\n<p>收到成功之后的邮件之后 到<a href=\"https://www.jetbrains.com/shop/eform/students\">这里</a></p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/0af30a89da36c9e59a7c04ba04c33fe3.png\"></p>\n<p>关联上申请时候的github就可以了，关联之后登陆<code>JetBrains</code>账户就可得到授权了</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/93811702d508c41148a59570ff1a04b8.png\"></p>\n<p> 如果没有学生身份的话，还是建议大家购买正版，拒绝盗版软件，购买正版请点击<a href=\"https://www.jetbrains.com/\">这里</a></p>\n"},{"title":"使用typescript与webpack搭建开发环境(一)","abbrlink":"4a713fe0","date":"2021-09-10T13:16:29.000Z","_content":"使用typescript与webpack搭建开发环境\n# 项目初始化\n\n```shell\n$ yarn init -y\n```\n>本文全部使用yarn命令，没有安装的可以执行下面使用npm安装\n```shell\n$ npm i -g yarn\n```\n\n# 安装依赖\n\n ![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115029359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n将上面内容拷贝到项目中的`package.json`文件中，执行安装命令\n```shell\n$ yarn install \n```\n\n# 项目配置\n## 初始化tsconfig.json\n```shell\n$ tsc --init\n```\n> 如果出现tsc不是正常的命令错误提示 可在命令前面添加`npx` 然后在执行\n执行成功之后修改tsconfig,写入以下内容\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115618672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n\n\n\n\n> 更多配置选项可参考[官方文档](https://www.typescriptlang.org/tsconfig)\n## webpack.config.js\n在项目根目录下增加`webpack.config.js`,内容如下\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115108907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n> 更多配置选项可参考[官方文档](https://webpack.js.org/guides/)\n到这里项目的配置项基本已经全部完成了，下面开始写代码\n# 增加第一个ts文件\n\n在项目目录增加`src`文件夹，并创建第一个文件`index.ts`,内容如下\n![](https://img-blog.csdnimg.cn/20210307115200520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n完成之后运行一下项目，验证一下\n\n# 项目启动\n项目启动有两种方式，一种是直接在终端中输入`webpack serve`来启动或者使用`yarn`命令启动，我们使用第二种方式。\n首先配置`yarn`的启动脚本\n\n在`package.json`中增加以下代码\n\n```json\n  \"scripts\": {\n    \"start\": \"webpack serve\"\n  }\n```\n下面我们就可以在终端中直接输入`yarn start`来启动项目了，执行之后会看到以下提示\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115211886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n项目顺利启动，并在本地启动了一个端口为`8080`的服务,我们可以直接在浏览器中那个访问\n\n`http://localhost:8080/`\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115228200.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n 获取源码点击[这里](https://github.com/lizeze/webpack-ts-demo)","source":"_posts/ts/使用typescript与webpack搭建开发环境(一).md","raw":"---\ntitle: 使用typescript与webpack搭建开发环境(一)\ntags:\n  - typescript\n  - webpack\ncategories: TypeScript\nabbrlink: 4a713fe0\ndate: 2021-09-10 21:16:29\n---\n使用typescript与webpack搭建开发环境\n# 项目初始化\n\n```shell\n$ yarn init -y\n```\n>本文全部使用yarn命令，没有安装的可以执行下面使用npm安装\n```shell\n$ npm i -g yarn\n```\n\n# 安装依赖\n\n ![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115029359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n将上面内容拷贝到项目中的`package.json`文件中，执行安装命令\n```shell\n$ yarn install \n```\n\n# 项目配置\n## 初始化tsconfig.json\n```shell\n$ tsc --init\n```\n> 如果出现tsc不是正常的命令错误提示 可在命令前面添加`npx` 然后在执行\n执行成功之后修改tsconfig,写入以下内容\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115618672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n\n\n\n\n> 更多配置选项可参考[官方文档](https://www.typescriptlang.org/tsconfig)\n## webpack.config.js\n在项目根目录下增加`webpack.config.js`,内容如下\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115108907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n> 更多配置选项可参考[官方文档](https://webpack.js.org/guides/)\n到这里项目的配置项基本已经全部完成了，下面开始写代码\n# 增加第一个ts文件\n\n在项目目录增加`src`文件夹，并创建第一个文件`index.ts`,内容如下\n![](https://img-blog.csdnimg.cn/20210307115200520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n完成之后运行一下项目，验证一下\n\n# 项目启动\n项目启动有两种方式，一种是直接在终端中输入`webpack serve`来启动或者使用`yarn`命令启动，我们使用第二种方式。\n首先配置`yarn`的启动脚本\n\n在`package.json`中增加以下代码\n\n```json\n  \"scripts\": {\n    \"start\": \"webpack serve\"\n  }\n```\n下面我们就可以在终端中直接输入`yarn start`来启动项目了，执行之后会看到以下提示\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115211886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n\n项目顺利启动，并在本地启动了一个端口为`8080`的服务,我们可以直接在浏览器中那个访问\n\n`http://localhost:8080/`\n\n![在这里插入图片描述](https://img-blog.csdnimg.cn/20210307115228200.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70)\n 获取源码点击[这里](https://github.com/lizeze/webpack-ts-demo)","slug":"ts/使用typescript与webpack搭建开发环境(一)","published":1,"updated":"2021-09-16T08:48:58.157Z","_id":"cktmoybkw002mkotra5co83va","comments":1,"layout":"post","photos":[],"link":"","content":"<p>使用typescript与webpack搭建开发环境</p>\n<h1 id=\"项目初始化\"><a href=\"#项目初始化\" class=\"headerlink\" title=\"项目初始化\"></a>项目初始化</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn init -y</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>本文全部使用yarn命令，没有安装的可以执行下面使用npm安装</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm i -g yarn</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><p> <img src=\"https://img-blog.csdnimg.cn/20210307115029359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>将上面内容拷贝到项目中的<code>package.json</code>文件中，执行安装命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn install</span> </span><br></pre></td></tr></table></figure>\n\n<h1 id=\"项目配置\"><a href=\"#项目配置\" class=\"headerlink\" title=\"项目配置\"></a>项目配置</h1><h2 id=\"初始化tsconfig-json\"><a href=\"#初始化tsconfig-json\" class=\"headerlink\" title=\"初始化tsconfig.json\"></a>初始化tsconfig.json</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> tsc --init</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>如果出现tsc不是正常的命令错误提示 可在命令前面添加<code>npx</code> 然后在执行<br>执行成功之后修改tsconfig,写入以下内容</p>\n</blockquote>\n<p><img src=\"https://img-blog.csdnimg.cn/20210307115618672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<blockquote>\n<p>更多配置选项可参考<a href=\"https://www.typescriptlang.org/tsconfig\">官方文档</a></p>\n</blockquote>\n<h2 id=\"webpack-config-js\"><a href=\"#webpack-config-js\" class=\"headerlink\" title=\"webpack.config.js\"></a>webpack.config.js</h2><p>在项目根目录下增加<code>webpack.config.js</code>,内容如下</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20210307115108907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<blockquote>\n<p>更多配置选项可参考<a href=\"https://webpack.js.org/guides/\">官方文档</a><br>到这里项目的配置项基本已经全部完成了，下面开始写代码</p>\n</blockquote>\n<h1 id=\"增加第一个ts文件\"><a href=\"#增加第一个ts文件\" class=\"headerlink\" title=\"增加第一个ts文件\"></a>增加第一个ts文件</h1><p>在项目目录增加<code>src</code>文件夹，并创建第一个文件<code>index.ts</code>,内容如下<br><img src=\"https://img-blog.csdnimg.cn/20210307115200520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\"></p>\n<p>完成之后运行一下项目，验证一下</p>\n<h1 id=\"项目启动\"><a href=\"#项目启动\" class=\"headerlink\" title=\"项目启动\"></a>项目启动</h1><p>项目启动有两种方式，一种是直接在终端中输入<code>webpack serve</code>来启动或者使用<code>yarn</code>命令启动，我们使用第二种方式。<br>首先配置<code>yarn</code>的启动脚本</p>\n<p>在<code>package.json</code>中增加以下代码</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;start&quot;</span>: <span class=\"string\">&quot;webpack serve&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>下面我们就可以在终端中直接输入<code>yarn start</code>来启动项目了，执行之后会看到以下提示<br><img src=\"https://img-blog.csdnimg.cn/20210307115211886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>项目顺利启动，并在本地启动了一个端口为<code>8080</code>的服务,我们可以直接在浏览器中那个访问</p>\n<p><code>http://localhost:8080/</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/20210307115228200.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"><br> 获取源码点击<a href=\"https://github.com/lizeze/webpack-ts-demo\">这里</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>使用typescript与webpack搭建开发环境</p>\n<h1 id=\"项目初始化\"><a href=\"#项目初始化\" class=\"headerlink\" title=\"项目初始化\"></a>项目初始化</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn init -y</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>本文全部使用yarn命令，没有安装的可以执行下面使用npm安装</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm i -g yarn</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><p> <img src=\"https://img-blog.csdnimg.cn/20210307115029359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>将上面内容拷贝到项目中的<code>package.json</code>文件中，执行安装命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn install</span> </span><br></pre></td></tr></table></figure>\n\n<h1 id=\"项目配置\"><a href=\"#项目配置\" class=\"headerlink\" title=\"项目配置\"></a>项目配置</h1><h2 id=\"初始化tsconfig-json\"><a href=\"#初始化tsconfig-json\" class=\"headerlink\" title=\"初始化tsconfig.json\"></a>初始化tsconfig.json</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> tsc --init</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>如果出现tsc不是正常的命令错误提示 可在命令前面添加<code>npx</code> 然后在执行<br>执行成功之后修改tsconfig,写入以下内容</p>\n</blockquote>\n<p><img src=\"https://img-blog.csdnimg.cn/20210307115618672.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<blockquote>\n<p>更多配置选项可参考<a href=\"https://www.typescriptlang.org/tsconfig\">官方文档</a></p>\n</blockquote>\n<h2 id=\"webpack-config-js\"><a href=\"#webpack-config-js\" class=\"headerlink\" title=\"webpack.config.js\"></a>webpack.config.js</h2><p>在项目根目录下增加<code>webpack.config.js</code>,内容如下</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20210307115108907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<blockquote>\n<p>更多配置选项可参考<a href=\"https://webpack.js.org/guides/\">官方文档</a><br>到这里项目的配置项基本已经全部完成了，下面开始写代码</p>\n</blockquote>\n<h1 id=\"增加第一个ts文件\"><a href=\"#增加第一个ts文件\" class=\"headerlink\" title=\"增加第一个ts文件\"></a>增加第一个ts文件</h1><p>在项目目录增加<code>src</code>文件夹，并创建第一个文件<code>index.ts</code>,内容如下<br><img src=\"https://img-blog.csdnimg.cn/20210307115200520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\"></p>\n<p>完成之后运行一下项目，验证一下</p>\n<h1 id=\"项目启动\"><a href=\"#项目启动\" class=\"headerlink\" title=\"项目启动\"></a>项目启动</h1><p>项目启动有两种方式，一种是直接在终端中输入<code>webpack serve</code>来启动或者使用<code>yarn</code>命令启动，我们使用第二种方式。<br>首先配置<code>yarn</code>的启动脚本</p>\n<p>在<code>package.json</code>中增加以下代码</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;start&quot;</span>: <span class=\"string\">&quot;webpack serve&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>下面我们就可以在终端中直接输入<code>yarn start</code>来启动项目了，执行之后会看到以下提示<br><img src=\"https://img-blog.csdnimg.cn/20210307115211886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<p>项目顺利启动，并在本地启动了一个端口为<code>8080</code>的服务,我们可以直接在浏览器中那个访问</p>\n<p><code>http://localhost:8080/</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/20210307115228200.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNTY3Mg==,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"><br> 获取源码点击<a href=\"https://github.com/lizeze/webpack-ts-demo\">这里</a></p>\n"},{"title":"使用typescript与webpack搭建开发环境(三)","abbrlink":"9bb384a9","date":"2021-09-10T12:31:17.000Z","_content":"\n**开发环境设置**\n\n {% post_link ts/使用typescript与webpack搭建开发环境(二) 上一章 %}\n在日常开发的过程中，debug是避免不了的，我们都知道`webpack`是把文件打包了的，对于`debug`来说是非常不方便的，本章主要说一下怎么`debug`\n# 准备环境\n## 修改 webpack.config.js\n```javascript\nmodule.exports = {\n    // mode: \"development\"\n   }\n```\n把这行代码注释掉\n\n## 新增一个ts文件\n在`src`目录下新增一个名为`Person.ts`的文件，内容如下\n![](https://img-blog.csdnimg.cn/img_convert/b922ae65ede35dd2b38ca147b3d50d98.png)\n## 修改index.ts文件\n之前的代码全部注释或删除，新增以下内容\n![](https://img-blog.csdnimg.cn/img_convert/db9d0c53dd9f31f963331604d20430f1.png)\n\n内容准备完成，现在来启动项目实践debug\n# 启动调试\n\n执行`yarn start` 现在开始调试项目\n![](https://img-blog.csdnimg.cn/img_convert/6969296b6bc08265cb665320458de936.png)\n\n启动之后我们会发现在终端中会出现这样一个提示，出现这个提示的原因是因为我们在第一步修改的`webpack.config.js`文件，`webpack`不知道该以什么模式启动项目了。\n`mode`的类型有两个，分别是`development`和`production`,分别代表开会环境和正式环境。稍后在进行配置。\n\n接下来打开浏览器会看到控制台\n\n![](https://img-blog.csdnimg.cn/img_convert/e0c1755a8f3431461ec4b92db3d3cdea.png)\n\n我们在调用方法的时候传入的参数是`undefined`,所以报这个错了，我们也知道怎么去改，可是在开发项目的过程中不可能每一个地方都记得特别清楚，我们是需要控制台去精准的提示给我们是哪里报凑了，从上图中我们可以看到是`main.js`文件的第2行报的错，我们点击它定位到错误位置。\n![](https://img-blog.csdnimg.cn/img_convert/ce1dbd50a9adab2a2ee076cc8e41ea25.png)\n出现在眼前的是这一行压缩的代码，它是打包过的代码，是不利于调试的。我们要使用`devtool`来解决这个问题\n# devtool\n>选择一种 source map 格式来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。\n\n`devtool`其实就是选择对应的`source map`，它有很多种，现在来看一下每种都有什么区别。\n## source-map\n\n这种是比较常见的，设置方法就是在`webpack.config.js`中修改这个属性，代码如下\n```javascript\nmodule.exports = {\n    mode: \"development\", //恢复设置\n    devtool: 'source-map',\n   }\n```\n设置完成之后启动项目看一下效果\n\n![](https://img-blog.csdnimg.cn/img_convert/88f50e2b3809c24b7b5d3b3746e5cf73.png)\n\n精确的提示除了出错的文件和行数，方便我们准确的定位，那webpack究竟是做了什么呢。\n\n* source-map会给打包后的模块生成soucemap文件\n\n![debug-sourcemapurl.png](https://img-blog.csdnimg.cn/img_convert/9950d06b66251cb0753805ebf6d2a0f2.png)\n\n打包后的模块在最下面引用一个map文件，map文件就是打包后的文件和源文件之间的一个关联文件，里面记录着编译后的代码对应着源码中的位置\n* inline-source-map\n\n 使用`inline`，`webpack`不会生成独立的`map`文件，而是将`map`文件内容以`dataURL`的形式插入到打包的文件中\n\n![debug-inline.png](https://img-blog.csdnimg.cn/img_convert/f860fc745a8cb302f7d00111a37a12fb.png)\n* cheap-source-map\n它与`source-map`一样也是会生成独立的`map`文件，不同的是它不包含源代码中的列信息\n\n* module-source-map\n\n生成的`map`文件中还包含引用的一些第三方库\n* eval-source-map\n每个模块都被`eval`执行，并且使用`@sourceURL`的方式引入`map`文件\n# 不同的环境该使用哪种source-map\n\n不同环境的配置使用，建议参考官方[文档](https://webpack.js.org/configuration/devtool/#devtool),只有官方文档才是**最新最准确**的\n\n[获取代码](https://github.com/lizeze/webpack-ts-demo)","source":"_posts/ts/使用typescript与webpack搭建开发环境(三).md","raw":"---\ntitle: 使用typescript与webpack搭建开发环境(三)\ntags:\n  - typescript\n  - webpack\ncategories: TypeScript\nabbrlink: 9bb384a9\ndate: 2021-09-10 20:31:17\n---\n\n**开发环境设置**\n\n {% post_link ts/使用typescript与webpack搭建开发环境(二) 上一章 %}\n在日常开发的过程中，debug是避免不了的，我们都知道`webpack`是把文件打包了的，对于`debug`来说是非常不方便的，本章主要说一下怎么`debug`\n# 准备环境\n## 修改 webpack.config.js\n```javascript\nmodule.exports = {\n    // mode: \"development\"\n   }\n```\n把这行代码注释掉\n\n## 新增一个ts文件\n在`src`目录下新增一个名为`Person.ts`的文件，内容如下\n![](https://img-blog.csdnimg.cn/img_convert/b922ae65ede35dd2b38ca147b3d50d98.png)\n## 修改index.ts文件\n之前的代码全部注释或删除，新增以下内容\n![](https://img-blog.csdnimg.cn/img_convert/db9d0c53dd9f31f963331604d20430f1.png)\n\n内容准备完成，现在来启动项目实践debug\n# 启动调试\n\n执行`yarn start` 现在开始调试项目\n![](https://img-blog.csdnimg.cn/img_convert/6969296b6bc08265cb665320458de936.png)\n\n启动之后我们会发现在终端中会出现这样一个提示，出现这个提示的原因是因为我们在第一步修改的`webpack.config.js`文件，`webpack`不知道该以什么模式启动项目了。\n`mode`的类型有两个，分别是`development`和`production`,分别代表开会环境和正式环境。稍后在进行配置。\n\n接下来打开浏览器会看到控制台\n\n![](https://img-blog.csdnimg.cn/img_convert/e0c1755a8f3431461ec4b92db3d3cdea.png)\n\n我们在调用方法的时候传入的参数是`undefined`,所以报这个错了，我们也知道怎么去改，可是在开发项目的过程中不可能每一个地方都记得特别清楚，我们是需要控制台去精准的提示给我们是哪里报凑了，从上图中我们可以看到是`main.js`文件的第2行报的错，我们点击它定位到错误位置。\n![](https://img-blog.csdnimg.cn/img_convert/ce1dbd50a9adab2a2ee076cc8e41ea25.png)\n出现在眼前的是这一行压缩的代码，它是打包过的代码，是不利于调试的。我们要使用`devtool`来解决这个问题\n# devtool\n>选择一种 source map 格式来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。\n\n`devtool`其实就是选择对应的`source map`，它有很多种，现在来看一下每种都有什么区别。\n## source-map\n\n这种是比较常见的，设置方法就是在`webpack.config.js`中修改这个属性，代码如下\n```javascript\nmodule.exports = {\n    mode: \"development\", //恢复设置\n    devtool: 'source-map',\n   }\n```\n设置完成之后启动项目看一下效果\n\n![](https://img-blog.csdnimg.cn/img_convert/88f50e2b3809c24b7b5d3b3746e5cf73.png)\n\n精确的提示除了出错的文件和行数，方便我们准确的定位，那webpack究竟是做了什么呢。\n\n* source-map会给打包后的模块生成soucemap文件\n\n![debug-sourcemapurl.png](https://img-blog.csdnimg.cn/img_convert/9950d06b66251cb0753805ebf6d2a0f2.png)\n\n打包后的模块在最下面引用一个map文件，map文件就是打包后的文件和源文件之间的一个关联文件，里面记录着编译后的代码对应着源码中的位置\n* inline-source-map\n\n 使用`inline`，`webpack`不会生成独立的`map`文件，而是将`map`文件内容以`dataURL`的形式插入到打包的文件中\n\n![debug-inline.png](https://img-blog.csdnimg.cn/img_convert/f860fc745a8cb302f7d00111a37a12fb.png)\n* cheap-source-map\n它与`source-map`一样也是会生成独立的`map`文件，不同的是它不包含源代码中的列信息\n\n* module-source-map\n\n生成的`map`文件中还包含引用的一些第三方库\n* eval-source-map\n每个模块都被`eval`执行，并且使用`@sourceURL`的方式引入`map`文件\n# 不同的环境该使用哪种source-map\n\n不同环境的配置使用，建议参考官方[文档](https://webpack.js.org/configuration/devtool/#devtool),只有官方文档才是**最新最准确**的\n\n[获取代码](https://github.com/lizeze/webpack-ts-demo)","slug":"ts/使用typescript与webpack搭建开发环境(三)","published":1,"updated":"2021-09-16T08:48:58.161Z","_id":"cktmoybkx002pkotr3kp4eb91","comments":1,"layout":"post","photos":[],"link":"","content":"<p><strong>开发环境设置</strong></p>\n <a href=\"/article/e540a482.html\" title=\"上一章\">上一章</a>\n<p>在日常开发的过程中，debug是避免不了的，我们都知道<code>webpack</code>是把文件打包了的，对于<code>debug</code>来说是非常不方便的，本章主要说一下怎么<code>debug</code></p>\n<h1 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h1><h2 id=\"修改-webpack-config-js\"><a href=\"#修改-webpack-config-js\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 webpack.config.js</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mode: &quot;development&quot;</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>把这行代码注释掉</p>\n<h2 id=\"新增一个ts文件\"><a href=\"#新增一个ts文件\" class=\"headerlink\" title=\"新增一个ts文件\"></a>新增一个ts文件</h2><p>在<code>src</code>目录下新增一个名为<code>Person.ts</code>的文件，内容如下<br><img src=\"https://img-blog.csdnimg.cn/img_convert/b922ae65ede35dd2b38ca147b3d50d98.png\"></p>\n<h2 id=\"修改index-ts文件\"><a href=\"#修改index-ts文件\" class=\"headerlink\" title=\"修改index.ts文件\"></a>修改index.ts文件</h2><p>之前的代码全部注释或删除，新增以下内容<br><img src=\"https://img-blog.csdnimg.cn/img_convert/db9d0c53dd9f31f963331604d20430f1.png\"></p>\n<p>内容准备完成，现在来启动项目实践debug</p>\n<h1 id=\"启动调试\"><a href=\"#启动调试\" class=\"headerlink\" title=\"启动调试\"></a>启动调试</h1><p>执行<code>yarn start</code> 现在开始调试项目<br><img src=\"https://img-blog.csdnimg.cn/img_convert/6969296b6bc08265cb665320458de936.png\"></p>\n<p>启动之后我们会发现在终端中会出现这样一个提示，出现这个提示的原因是因为我们在第一步修改的<code>webpack.config.js</code>文件，<code>webpack</code>不知道该以什么模式启动项目了。<br><code>mode</code>的类型有两个，分别是<code>development</code>和<code>production</code>,分别代表开会环境和正式环境。稍后在进行配置。</p>\n<p>接下来打开浏览器会看到控制台</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e0c1755a8f3431461ec4b92db3d3cdea.png\"></p>\n<p>我们在调用方法的时候传入的参数是<code>undefined</code>,所以报这个错了，我们也知道怎么去改，可是在开发项目的过程中不可能每一个地方都记得特别清楚，我们是需要控制台去精准的提示给我们是哪里报凑了，从上图中我们可以看到是<code>main.js</code>文件的第2行报的错，我们点击它定位到错误位置。<br><img src=\"https://img-blog.csdnimg.cn/img_convert/ce1dbd50a9adab2a2ee076cc8e41ea25.png\"><br>出现在眼前的是这一行压缩的代码，它是打包过的代码，是不利于调试的。我们要使用<code>devtool</code>来解决这个问题</p>\n<h1 id=\"devtool\"><a href=\"#devtool\" class=\"headerlink\" title=\"devtool\"></a>devtool</h1><blockquote>\n<p>选择一种 source map 格式来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。</p>\n</blockquote>\n<p><code>devtool</code>其实就是选择对应的<code>source map</code>，它有很多种，现在来看一下每种都有什么区别。</p>\n<h2 id=\"source-map\"><a href=\"#source-map\" class=\"headerlink\" title=\"source-map\"></a>source-map</h2><p>这种是比较常见的，设置方法就是在<code>webpack.config.js</code>中修改这个属性，代码如下</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>, <span class=\"comment\">//恢复设置</span></span><br><span class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">&#x27;source-map&#x27;</span>,</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>设置完成之后启动项目看一下效果</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/88f50e2b3809c24b7b5d3b3746e5cf73.png\"></p>\n<p>精确的提示除了出错的文件和行数，方便我们准确的定位，那webpack究竟是做了什么呢。</p>\n<ul>\n<li>source-map会给打包后的模块生成soucemap文件</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9950d06b66251cb0753805ebf6d2a0f2.png\" alt=\"debug-sourcemapurl.png\"></p>\n<p>打包后的模块在最下面引用一个map文件，map文件就是打包后的文件和源文件之间的一个关联文件，里面记录着编译后的代码对应着源码中的位置</p>\n<ul>\n<li>inline-source-map</li>\n</ul>\n<p> 使用<code>inline</code>，<code>webpack</code>不会生成独立的<code>map</code>文件，而是将<code>map</code>文件内容以<code>dataURL</code>的形式插入到打包的文件中</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/f860fc745a8cb302f7d00111a37a12fb.png\" alt=\"debug-inline.png\"></p>\n<ul>\n<li><p>cheap-source-map<br>它与<code>source-map</code>一样也是会生成独立的<code>map</code>文件，不同的是它不包含源代码中的列信息</p>\n</li>\n<li><p>module-source-map</p>\n</li>\n</ul>\n<p>生成的<code>map</code>文件中还包含引用的一些第三方库</p>\n<ul>\n<li>eval-source-map<br>每个模块都被<code>eval</code>执行，并且使用<code>@sourceURL</code>的方式引入<code>map</code>文件<h1 id=\"不同的环境该使用哪种source-map\"><a href=\"#不同的环境该使用哪种source-map\" class=\"headerlink\" title=\"不同的环境该使用哪种source-map\"></a>不同的环境该使用哪种source-map</h1></li>\n</ul>\n<p>不同环境的配置使用，建议参考官方<a href=\"https://webpack.js.org/configuration/devtool/#devtool\">文档</a>,只有官方文档才是<strong>最新最准确</strong>的</p>\n<p><a href=\"https://github.com/lizeze/webpack-ts-demo\">获取代码</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>开发环境设置</strong></p>\n <a href=\"/article/e540a482.html\" title=\"上一章\">上一章</a>\n<p>在日常开发的过程中，debug是避免不了的，我们都知道<code>webpack</code>是把文件打包了的，对于<code>debug</code>来说是非常不方便的，本章主要说一下怎么<code>debug</code></p>\n<h1 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h1><h2 id=\"修改-webpack-config-js\"><a href=\"#修改-webpack-config-js\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 webpack.config.js</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// mode: &quot;development&quot;</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>把这行代码注释掉</p>\n<h2 id=\"新增一个ts文件\"><a href=\"#新增一个ts文件\" class=\"headerlink\" title=\"新增一个ts文件\"></a>新增一个ts文件</h2><p>在<code>src</code>目录下新增一个名为<code>Person.ts</code>的文件，内容如下<br><img src=\"https://img-blog.csdnimg.cn/img_convert/b922ae65ede35dd2b38ca147b3d50d98.png\"></p>\n<h2 id=\"修改index-ts文件\"><a href=\"#修改index-ts文件\" class=\"headerlink\" title=\"修改index.ts文件\"></a>修改index.ts文件</h2><p>之前的代码全部注释或删除，新增以下内容<br><img src=\"https://img-blog.csdnimg.cn/img_convert/db9d0c53dd9f31f963331604d20430f1.png\"></p>\n<p>内容准备完成，现在来启动项目实践debug</p>\n<h1 id=\"启动调试\"><a href=\"#启动调试\" class=\"headerlink\" title=\"启动调试\"></a>启动调试</h1><p>执行<code>yarn start</code> 现在开始调试项目<br><img src=\"https://img-blog.csdnimg.cn/img_convert/6969296b6bc08265cb665320458de936.png\"></p>\n<p>启动之后我们会发现在终端中会出现这样一个提示，出现这个提示的原因是因为我们在第一步修改的<code>webpack.config.js</code>文件，<code>webpack</code>不知道该以什么模式启动项目了。<br><code>mode</code>的类型有两个，分别是<code>development</code>和<code>production</code>,分别代表开会环境和正式环境。稍后在进行配置。</p>\n<p>接下来打开浏览器会看到控制台</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/e0c1755a8f3431461ec4b92db3d3cdea.png\"></p>\n<p>我们在调用方法的时候传入的参数是<code>undefined</code>,所以报这个错了，我们也知道怎么去改，可是在开发项目的过程中不可能每一个地方都记得特别清楚，我们是需要控制台去精准的提示给我们是哪里报凑了，从上图中我们可以看到是<code>main.js</code>文件的第2行报的错，我们点击它定位到错误位置。<br><img src=\"https://img-blog.csdnimg.cn/img_convert/ce1dbd50a9adab2a2ee076cc8e41ea25.png\"><br>出现在眼前的是这一行压缩的代码，它是打包过的代码，是不利于调试的。我们要使用<code>devtool</code>来解决这个问题</p>\n<h1 id=\"devtool\"><a href=\"#devtool\" class=\"headerlink\" title=\"devtool\"></a>devtool</h1><blockquote>\n<p>选择一种 source map 格式来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。</p>\n</blockquote>\n<p><code>devtool</code>其实就是选择对应的<code>source map</code>，它有很多种，现在来看一下每种都有什么区别。</p>\n<h2 id=\"source-map\"><a href=\"#source-map\" class=\"headerlink\" title=\"source-map\"></a>source-map</h2><p>这种是比较常见的，设置方法就是在<code>webpack.config.js</code>中修改这个属性，代码如下</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>, <span class=\"comment\">//恢复设置</span></span><br><span class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">&#x27;source-map&#x27;</span>,</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>设置完成之后启动项目看一下效果</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/88f50e2b3809c24b7b5d3b3746e5cf73.png\"></p>\n<p>精确的提示除了出错的文件和行数，方便我们准确的定位，那webpack究竟是做了什么呢。</p>\n<ul>\n<li>source-map会给打包后的模块生成soucemap文件</li>\n</ul>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/9950d06b66251cb0753805ebf6d2a0f2.png\" alt=\"debug-sourcemapurl.png\"></p>\n<p>打包后的模块在最下面引用一个map文件，map文件就是打包后的文件和源文件之间的一个关联文件，里面记录着编译后的代码对应着源码中的位置</p>\n<ul>\n<li>inline-source-map</li>\n</ul>\n<p> 使用<code>inline</code>，<code>webpack</code>不会生成独立的<code>map</code>文件，而是将<code>map</code>文件内容以<code>dataURL</code>的形式插入到打包的文件中</p>\n<p><img src=\"https://img-blog.csdnimg.cn/img_convert/f860fc745a8cb302f7d00111a37a12fb.png\" alt=\"debug-inline.png\"></p>\n<ul>\n<li><p>cheap-source-map<br>它与<code>source-map</code>一样也是会生成独立的<code>map</code>文件，不同的是它不包含源代码中的列信息</p>\n</li>\n<li><p>module-source-map</p>\n</li>\n</ul>\n<p>生成的<code>map</code>文件中还包含引用的一些第三方库</p>\n<ul>\n<li>eval-source-map<br>每个模块都被<code>eval</code>执行，并且使用<code>@sourceURL</code>的方式引入<code>map</code>文件<h1 id=\"不同的环境该使用哪种source-map\"><a href=\"#不同的环境该使用哪种source-map\" class=\"headerlink\" title=\"不同的环境该使用哪种source-map\"></a>不同的环境该使用哪种source-map</h1></li>\n</ul>\n<p>不同环境的配置使用，建议参考官方<a href=\"https://webpack.js.org/configuration/devtool/#devtool\">文档</a>,只有官方文档才是<strong>最新最准确</strong>的</p>\n<p><a href=\"https://github.com/lizeze/webpack-ts-demo\">获取代码</a></p>\n"},{"title":"使用typescript与webpack搭建开发环境(二)","abbrlink":"e540a482","date":"2021-09-10T13:17:28.000Z","_content":"\n**静态资源的引入**\n\n{% post_link ts/使用typescript与webpack搭建开发环境(一) 上一章 %}中已经搭建好开发环境，下面开始逐渐丰富项目的内容，本章是静态资源的引入。\n\n# 安装依赖\n\n`webpack`默认是只认识`JavaScript`的，只知道该怎么处理它，如果项目中出现了其他类型的文件，并且也希望`webpack`对它进行打包的时候，就要安装对应的`loader`了。\n\n `loader`是什么，下面内容源自`webpack`[中文网站](https://www.webpackjs.com/concepts/loaders/)\n >loader 用于对模块的源代码进行转换。loader 可以使你在 import 或\"加载\"模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript，或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 import CSS文件！\n \n # css-loader\n \n ```shell\n $ yarn add css-loader style-loader -D\n ```\n 在`src`文件夹中创建第一个`css`文件，命名为`index.css`\n \n ```css\n .hello{\n    color:red;\n}\n ```\n 修改`index.ts`文件\n ![](https://img-blog.csdnimg.cn/img_convert/27d15fd81d28dc2b3526209eb0a4eee0.png)\n \n修改`webpack.config.js`\n\n```javascript\n module: {\n        rules: [\n          +  {\n          +    test: /\\.css$/,\n          +    use: ['style-loader', 'css-loader']\n          + }\n        ],\n    }\n```\n # file-loader\n  `file-loader`用于引入图片文件\n  \n  ```shell\n  $ yarn add file-loader -D\n  ```\n  修改`index.ts`文件，并在src文件夹内增加一张`png`图片\n  \n  ```TypeScript\n  import img from  \"./index.png\"\n  let image: HTMLImageElement = document.createElement(\"img\");\n  image.src = img;\n  document.body.append(image);\n  ```\n  修改`webpack.config.js`\n  ```javascript\n   module: {\n        rules: [\n            +{\n            +   test: /\\.(png|jpe?g|gif)$/i,\n            +  use:['file-loader'],\n            +},\n        ],\n    },\n  ```\n  \n# 最后\n关于`css`和`image`的配置就是这些了，现在运行启动命令就可以看到网页上的字已经是红色了，并且添加了一张图片\n\n[更多loader](https://webpack.js.org/concepts/loaders/)\n\n[获取代码](https://github.com/lizeze/webpack-ts-demo)","source":"_posts/ts/使用typescript与webpack搭建开发环境(二).md","raw":"---\ntitle: 使用typescript与webpack搭建开发环境(二)\ntags:\n  - typescript\n  - webpack\ncategories: TypeScript\nabbrlink: e540a482\ndate: 2021-09-10 21:17:28\n---\n\n**静态资源的引入**\n\n{% post_link ts/使用typescript与webpack搭建开发环境(一) 上一章 %}中已经搭建好开发环境，下面开始逐渐丰富项目的内容，本章是静态资源的引入。\n\n# 安装依赖\n\n`webpack`默认是只认识`JavaScript`的，只知道该怎么处理它，如果项目中出现了其他类型的文件，并且也希望`webpack`对它进行打包的时候，就要安装对应的`loader`了。\n\n `loader`是什么，下面内容源自`webpack`[中文网站](https://www.webpackjs.com/concepts/loaders/)\n >loader 用于对模块的源代码进行转换。loader 可以使你在 import 或\"加载\"模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript，或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 import CSS文件！\n \n # css-loader\n \n ```shell\n $ yarn add css-loader style-loader -D\n ```\n 在`src`文件夹中创建第一个`css`文件，命名为`index.css`\n \n ```css\n .hello{\n    color:red;\n}\n ```\n 修改`index.ts`文件\n ![](https://img-blog.csdnimg.cn/img_convert/27d15fd81d28dc2b3526209eb0a4eee0.png)\n \n修改`webpack.config.js`\n\n```javascript\n module: {\n        rules: [\n          +  {\n          +    test: /\\.css$/,\n          +    use: ['style-loader', 'css-loader']\n          + }\n        ],\n    }\n```\n # file-loader\n  `file-loader`用于引入图片文件\n  \n  ```shell\n  $ yarn add file-loader -D\n  ```\n  修改`index.ts`文件，并在src文件夹内增加一张`png`图片\n  \n  ```TypeScript\n  import img from  \"./index.png\"\n  let image: HTMLImageElement = document.createElement(\"img\");\n  image.src = img;\n  document.body.append(image);\n  ```\n  修改`webpack.config.js`\n  ```javascript\n   module: {\n        rules: [\n            +{\n            +   test: /\\.(png|jpe?g|gif)$/i,\n            +  use:['file-loader'],\n            +},\n        ],\n    },\n  ```\n  \n# 最后\n关于`css`和`image`的配置就是这些了，现在运行启动命令就可以看到网页上的字已经是红色了，并且添加了一张图片\n\n[更多loader](https://webpack.js.org/concepts/loaders/)\n\n[获取代码](https://github.com/lizeze/webpack-ts-demo)","slug":"ts/使用typescript与webpack搭建开发环境(二)","published":1,"updated":"2021-09-16T08:48:58.163Z","_id":"cktmoybky002skotrfr2ec69w","comments":1,"layout":"post","photos":[],"link":"","content":"<p><strong>静态资源的引入</strong></p>\n<a href=\"/article/4a713fe0.html\" title=\"上一章\">上一章</a>中已经搭建好开发环境，下面开始逐渐丰富项目的内容，本章是静态资源的引入。\n\n<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><p><code>webpack</code>默认是只认识<code>JavaScript</code>的，只知道该怎么处理它，如果项目中出现了其他类型的文件，并且也希望<code>webpack</code>对它进行打包的时候，就要安装对应的<code>loader</code>了。</p>\n<p> <code>loader</code>是什么，下面内容源自<code>webpack</code><a href=\"https://www.webpackjs.com/concepts/loaders/\">中文网站</a></p>\n<blockquote>\n<p>loader 用于对模块的源代码进行转换。loader 可以使你在 import 或”加载”模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript，或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 import CSS文件！</p>\n</blockquote>\n<h1 id=\"css-loader\"><a href=\"#css-loader\" class=\"headerlink\" title=\"css-loader\"></a>css-loader</h1> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn add css-loader style-loader -D</span></span><br></pre></td></tr></table></figure>\n<p> 在<code>src</code>文件夹中创建第一个<code>css</code>文件，命名为<code>index.css</code></p>\n <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"selector-class\">.hello</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> 修改<code>index.ts</code>文件<br> <img src=\"https://img-blog.csdnimg.cn/img_convert/27d15fd81d28dc2b3526209eb0a4eee0.png\"></p>\n<p>修改<code>webpack.config.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">       <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">         +  &#123;</span><br><span class=\"line\">         +    test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">         +    use: [<span class=\"string\">&#x27;style-loader&#x27;</span>, <span class=\"string\">&#x27;css-loader&#x27;</span>]</span><br><span class=\"line\">         + &#125;</span><br><span class=\"line\">       ],</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"file-loader\"><a href=\"#file-loader\" class=\"headerlink\" title=\"file-loader\"></a>file-loader</h1><p>  <code>file-loader</code>用于引入图片文件</p>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn add file-loader -D</span></span><br></pre></td></tr></table></figure>\n<p>  修改<code>index.ts</code>文件，并在src文件夹内增加一张<code>png</code>图片</p>\n  <figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> img <span class=\"keyword\">from</span>  <span class=\"string\">&quot;./index.png&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> image: HTMLImageElement = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;img&quot;</span>);</span><br><span class=\"line\">image.src = img;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.append(image);</span><br></pre></td></tr></table></figure>\n<p>  修改<code>webpack.config.js</code><br>  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">     <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">         +&#123;</span><br><span class=\"line\">         +   test: <span class=\"regexp\">/\\.(png|jpe?g|gif)$/i</span>,</span><br><span class=\"line\">         +  use:[<span class=\"string\">&#x27;file-loader&#x27;</span>],</span><br><span class=\"line\">         +&#125;,</span><br><span class=\"line\">     ],</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h1><p>关于<code>css</code>和<code>image</code>的配置就是这些了，现在运行启动命令就可以看到网页上的字已经是红色了，并且添加了一张图片</p>\n<p><a href=\"https://webpack.js.org/concepts/loaders/\">更多loader</a></p>\n<p><a href=\"https://github.com/lizeze/webpack-ts-demo\">获取代码</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>静态资源的引入</strong></p>\n<a href=\"/article/4a713fe0.html\" title=\"上一章\">上一章</a>中已经搭建好开发环境，下面开始逐渐丰富项目的内容，本章是静态资源的引入。\n\n<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><p><code>webpack</code>默认是只认识<code>JavaScript</code>的，只知道该怎么处理它，如果项目中出现了其他类型的文件，并且也希望<code>webpack</code>对它进行打包的时候，就要安装对应的<code>loader</code>了。</p>\n<p> <code>loader</code>是什么，下面内容源自<code>webpack</code><a href=\"https://www.webpackjs.com/concepts/loaders/\">中文网站</a></p>\n<blockquote>\n<p>loader 用于对模块的源代码进行转换。loader 可以使你在 import 或”加载”模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript，或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 import CSS文件！</p>\n</blockquote>\n<h1 id=\"css-loader\"><a href=\"#css-loader\" class=\"headerlink\" title=\"css-loader\"></a>css-loader</h1> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn add css-loader style-loader -D</span></span><br></pre></td></tr></table></figure>\n<p> 在<code>src</code>文件夹中创建第一个<code>css</code>文件，命名为<code>index.css</code></p>\n <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"selector-class\">.hello</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> 修改<code>index.ts</code>文件<br> <img src=\"https://img-blog.csdnimg.cn/img_convert/27d15fd81d28dc2b3526209eb0a4eee0.png\"></p>\n<p>修改<code>webpack.config.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">       <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">         +  &#123;</span><br><span class=\"line\">         +    test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">         +    use: [<span class=\"string\">&#x27;style-loader&#x27;</span>, <span class=\"string\">&#x27;css-loader&#x27;</span>]</span><br><span class=\"line\">         + &#125;</span><br><span class=\"line\">       ],</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"file-loader\"><a href=\"#file-loader\" class=\"headerlink\" title=\"file-loader\"></a>file-loader</h1><p>  <code>file-loader</code>用于引入图片文件</p>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn add file-loader -D</span></span><br></pre></td></tr></table></figure>\n<p>  修改<code>index.ts</code>文件，并在src文件夹内增加一张<code>png</code>图片</p>\n  <figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> img <span class=\"keyword\">from</span>  <span class=\"string\">&quot;./index.png&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> image: HTMLImageElement = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;img&quot;</span>);</span><br><span class=\"line\">image.src = img;</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.append(image);</span><br></pre></td></tr></table></figure>\n<p>  修改<code>webpack.config.js</code><br>  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">     <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">         +&#123;</span><br><span class=\"line\">         +   test: <span class=\"regexp\">/\\.(png|jpe?g|gif)$/i</span>,</span><br><span class=\"line\">         +  use:[<span class=\"string\">&#x27;file-loader&#x27;</span>],</span><br><span class=\"line\">         +&#125;,</span><br><span class=\"line\">     ],</span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h1><p>关于<code>css</code>和<code>image</code>的配置就是这些了，现在运行启动命令就可以看到网页上的字已经是红色了，并且添加了一张图片</p>\n<p><a href=\"https://webpack.js.org/concepts/loaders/\">更多loader</a></p>\n<p><a href=\"https://github.com/lizeze/webpack-ts-demo\">获取代码</a></p>\n"},{"title":"使用typescript与webpack搭建开发环境(四)","abbrlink":"61f06ba6","date":"2021-09-10T13:33:15.000Z","_content":"\n\n**如何区分开发环境与生成环境**\n\n {% post_link ts/使用typescript与webpack搭建开发环境(三) 上一章 %}讲了开发环境`devtool`的使用，但是官方推荐不同的环境使用不同的配置，那么怎么来区分当前运行的是什么环境呢，这次讲一下这个。\n\n# 安装依赖\n\n```shell\n$ yarn add -D webpack-merge\n```\n# 调整目录结构\n\n增加`config`文件夹，将`webpack.config.js`文件移动到里面，保留基础配置，删除`mode`和`devtool`属性\n\n在`config`文件夹中增加`webpack.conf.dev.js`，写入以下内容\n\n```javascript\nconst merge = require('webpack-merge');\nconst common = require('./webpack.config.js');\nlet devConfig = {\n    mode: \"development\",\n    devtool: 'source-map',\n};\nmodule.exports = merge.merge(common, devConfig);\n```\n\n修改`package.json`\n\n```javascript\n \"scripts\": {\n    \"start\": \"webpack serve --config config/webpack.conf.dev.js\"\n  },\n```\n\n执行 `yarn start`\n\n# 最后\n不同的环境创建不同的`webpack.conf.xxx.js`即可\n\n注意修改`webconfig.conf.js`中的文件引用路径，因为它的位置改变了\n\n[获取代码](https://github.com/lizeze/webpack-ts-demo/commit/feec9a282047efee507212df04c1a7706ecddcbf)","source":"_posts/ts/使用typescript与webpack搭建开发环境(四).md","raw":"---\ntitle: 使用typescript与webpack搭建开发环境(四)\ntags:\n  - typescript\n  - webpack\ncategories: TypeScript\nabbrlink: 61f06ba6\ndate: 2021-09-10 21:33:15\n---\n\n\n**如何区分开发环境与生成环境**\n\n {% post_link ts/使用typescript与webpack搭建开发环境(三) 上一章 %}讲了开发环境`devtool`的使用，但是官方推荐不同的环境使用不同的配置，那么怎么来区分当前运行的是什么环境呢，这次讲一下这个。\n\n# 安装依赖\n\n```shell\n$ yarn add -D webpack-merge\n```\n# 调整目录结构\n\n增加`config`文件夹，将`webpack.config.js`文件移动到里面，保留基础配置，删除`mode`和`devtool`属性\n\n在`config`文件夹中增加`webpack.conf.dev.js`，写入以下内容\n\n```javascript\nconst merge = require('webpack-merge');\nconst common = require('./webpack.config.js');\nlet devConfig = {\n    mode: \"development\",\n    devtool: 'source-map',\n};\nmodule.exports = merge.merge(common, devConfig);\n```\n\n修改`package.json`\n\n```javascript\n \"scripts\": {\n    \"start\": \"webpack serve --config config/webpack.conf.dev.js\"\n  },\n```\n\n执行 `yarn start`\n\n# 最后\n不同的环境创建不同的`webpack.conf.xxx.js`即可\n\n注意修改`webconfig.conf.js`中的文件引用路径，因为它的位置改变了\n\n[获取代码](https://github.com/lizeze/webpack-ts-demo/commit/feec9a282047efee507212df04c1a7706ecddcbf)","slug":"ts/使用typescript与webpack搭建开发环境(四)","published":1,"updated":"2021-09-16T08:48:58.166Z","_id":"cktmoybl0002vkotrg7wt2a22","comments":1,"layout":"post","photos":[],"link":"","content":"<p><strong>如何区分开发环境与生成环境</strong></p>\n <a href=\"/article/9bb384a9.html\" title=\"上一章\">上一章</a>讲了开发环境`devtool`的使用，但是官方推荐不同的环境使用不同的配置，那么怎么来区分当前运行的是什么环境呢，这次讲一下这个。\n\n<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn add -D webpack-merge</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"调整目录结构\"><a href=\"#调整目录结构\" class=\"headerlink\" title=\"调整目录结构\"></a>调整目录结构</h1><p>增加<code>config</code>文件夹，将<code>webpack.config.js</code>文件移动到里面，保留基础配置，删除<code>mode</code>和<code>devtool</code>属性</p>\n<p>在<code>config</code>文件夹中增加<code>webpack.conf.dev.js</code>，写入以下内容</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpack-merge&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> common = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./webpack.config.js&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> devConfig = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">&#x27;source-map&#x27;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = merge.merge(common, devConfig);</span><br></pre></td></tr></table></figure>\n\n<p>修改<code>package.json</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">   <span class=\"string\">&quot;start&quot;</span>: <span class=\"string\">&quot;webpack serve --config config/webpack.conf.dev.js&quot;</span></span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure>\n\n<p>执行 <code>yarn start</code></p>\n<h1 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h1><p>不同的环境创建不同的<code>webpack.conf.xxx.js</code>即可</p>\n<p>注意修改<code>webconfig.conf.js</code>中的文件引用路径，因为它的位置改变了</p>\n<p><a href=\"https://github.com/lizeze/webpack-ts-demo/commit/feec9a282047efee507212df04c1a7706ecddcbf\">获取代码</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>如何区分开发环境与生成环境</strong></p>\n <a href=\"/article/9bb384a9.html\" title=\"上一章\">上一章</a>讲了开发环境`devtool`的使用，但是官方推荐不同的环境使用不同的配置，那么怎么来区分当前运行的是什么环境呢，这次讲一下这个。\n\n<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> yarn add -D webpack-merge</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"调整目录结构\"><a href=\"#调整目录结构\" class=\"headerlink\" title=\"调整目录结构\"></a>调整目录结构</h1><p>增加<code>config</code>文件夹，将<code>webpack.config.js</code>文件移动到里面，保留基础配置，删除<code>mode</code>和<code>devtool</code>属性</p>\n<p>在<code>config</code>文件夹中增加<code>webpack.conf.dev.js</code>，写入以下内容</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpack-merge&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> common = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./webpack.config.js&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> devConfig = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">&#x27;source-map&#x27;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = merge.merge(common, devConfig);</span><br></pre></td></tr></table></figure>\n\n<p>修改<code>package.json</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">   <span class=\"string\">&quot;start&quot;</span>: <span class=\"string\">&quot;webpack serve --config config/webpack.conf.dev.js&quot;</span></span><br><span class=\"line\"> &#125;,</span><br></pre></td></tr></table></figure>\n\n<p>执行 <code>yarn start</code></p>\n<h1 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h1><p>不同的环境创建不同的<code>webpack.conf.xxx.js</code>即可</p>\n<p>注意修改<code>webconfig.conf.js</code>中的文件引用路径，因为它的位置改变了</p>\n<p><a href=\"https://github.com/lizeze/webpack-ts-demo/commit/feec9a282047efee507212df04c1a7706ecddcbf\">获取代码</a></p>\n"},{"title":"10+个应该知道的Github仓库","abbrlink":"5a8a6c8d","date":"2021-09-16T08:57:54.000Z","_content":"\n> 点击标题可进入\n# [Web Developer RoadMap](https://github.com/kamranahmedse/developer-roadmap)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/kamranahmedse/developer-roadmap.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/kamranahmedse/developer-roadmap.svg)\n# [30 Seconds of Code](https://github.com/30-seconds/30-seconds-of-code)\n\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/30-seconds/30-seconds-of-code.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/30-seconds/30-seconds-of-code.svg)\n\n# [Awesome Cheatsheets](https://github.com/LeCoupa/awesome-cheatsheets)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/LeCoupa/awesome-cheatsheets.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/LeCoupa/awesome-cheatsheets.svg)\n\n\n# [Web Development Resources](https://github.com/markodenic/web-development-resources)\n \n\n\n![Github stars xx小台灯](https://img.shields.io/github/stars/markodenic/web-development-resources.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/markodenic/web-development-resources.svg)\n\n\n\n\n# [CSS Protips](https://github.com/AllThingsSmitty/css-protips)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/AllThingsSmitty/css-protips.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/AllThingsSmitty/css-protips.svg)\n\n\n# [Awesome Design Pattern](https://github.com/DovAmir/awesome-design-patterns)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/DovAmir/awesome-design-patterns.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/DovAmir/awesome-design-patterns.svg)\n\n\n# [Coding Interview University](https://github.com/jwasham/coding-interview-university)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/jwasham/coding-interview-university.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/jwasham/coding-interview-university.svg)\n\n\n# [Awesome Interview Questions](https://github.com/DopplerHQ/awesome-interview-questions)\n\n![Github stars xx小台灯](https://img.shields.io/github/stars/DopplerHQ/awesome-interview-questions.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/DopplerHQ/awesome-interview-questions.svg)\n\n# [Free Programming Book](https://github.com/EbookFoundation/free-programming-books)\n \n\n\n![Github stars xx小台灯](https://img.shields.io/github/stars/EbookFoundation/free-programming-books.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/EbookFoundation/free-programming-books.svg)\n\n# [Command Line](https://github.com/jlevy/the-art-of-command-line)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/jlevy/the-art-of-command-line.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/jlevy/the-art-of-command-line.svg)\n# [Awesome](https://github.com/sindresorhus/awesome)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/sindresorhus/awesome.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/sindresorhus/awesome.svg)\n# [FreeCodeCamp](https://github.com/freeCodeCamp/freeCodeCamp)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/freeCodeCamp/freeCodeCamp.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/freeCodeCamp/freeCodeCamp.svg)\n\n# [Frontend Development](https://github.com/dypsilon/frontend-dev-bookmarks)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/dypsilon/frontend-dev-bookmarks.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/dypsilon/frontend-dev-bookmarks.svg)\n\n\n\n\n# [Tech Interview Handbook](https://github.com/yangshun/tech-interview-handbook)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/yangshun/tech-interview-handbook.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/yangshun/tech-interview-handbook.svg)\n\n","source":"_posts/share/10+个应该知道的Github仓库.md","raw":"---\ntitle: 10+个应该知道的Github仓库\nabbrlink: 5a8a6c8d\ndate: 2021-09-16 16:57:54\ntags: github\n---\n\n> 点击标题可进入\n# [Web Developer RoadMap](https://github.com/kamranahmedse/developer-roadmap)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/kamranahmedse/developer-roadmap.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/kamranahmedse/developer-roadmap.svg)\n# [30 Seconds of Code](https://github.com/30-seconds/30-seconds-of-code)\n\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/30-seconds/30-seconds-of-code.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/30-seconds/30-seconds-of-code.svg)\n\n# [Awesome Cheatsheets](https://github.com/LeCoupa/awesome-cheatsheets)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/LeCoupa/awesome-cheatsheets.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/LeCoupa/awesome-cheatsheets.svg)\n\n\n# [Web Development Resources](https://github.com/markodenic/web-development-resources)\n \n\n\n![Github stars xx小台灯](https://img.shields.io/github/stars/markodenic/web-development-resources.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/markodenic/web-development-resources.svg)\n\n\n\n\n# [CSS Protips](https://github.com/AllThingsSmitty/css-protips)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/AllThingsSmitty/css-protips.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/AllThingsSmitty/css-protips.svg)\n\n\n# [Awesome Design Pattern](https://github.com/DovAmir/awesome-design-patterns)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/DovAmir/awesome-design-patterns.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/DovAmir/awesome-design-patterns.svg)\n\n\n# [Coding Interview University](https://github.com/jwasham/coding-interview-university)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/jwasham/coding-interview-university.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/jwasham/coding-interview-university.svg)\n\n\n# [Awesome Interview Questions](https://github.com/DopplerHQ/awesome-interview-questions)\n\n![Github stars xx小台灯](https://img.shields.io/github/stars/DopplerHQ/awesome-interview-questions.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/DopplerHQ/awesome-interview-questions.svg)\n\n# [Free Programming Book](https://github.com/EbookFoundation/free-programming-books)\n \n\n\n![Github stars xx小台灯](https://img.shields.io/github/stars/EbookFoundation/free-programming-books.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/EbookFoundation/free-programming-books.svg)\n\n# [Command Line](https://github.com/jlevy/the-art-of-command-line)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/jlevy/the-art-of-command-line.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/jlevy/the-art-of-command-line.svg)\n# [Awesome](https://github.com/sindresorhus/awesome)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/sindresorhus/awesome.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/sindresorhus/awesome.svg)\n# [FreeCodeCamp](https://github.com/freeCodeCamp/freeCodeCamp)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/freeCodeCamp/freeCodeCamp.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/freeCodeCamp/freeCodeCamp.svg)\n\n# [Frontend Development](https://github.com/dypsilon/frontend-dev-bookmarks)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/dypsilon/frontend-dev-bookmarks.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/dypsilon/frontend-dev-bookmarks.svg)\n\n\n\n\n# [Tech Interview Handbook](https://github.com/yangshun/tech-interview-handbook)\n \n\n![Github stars xx小台灯](https://img.shields.io/github/stars/yangshun/tech-interview-handbook.svg)\n ![Github fork xx小台灯](https://img.shields.io/github/forks/yangshun/tech-interview-handbook.svg)\n\n","slug":"share/10+个应该知道的Github仓库","published":1,"updated":"2021-09-17T02:15:07.313Z","_id":"cktnnps03000044tr6tzrcg51","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>点击标题可进入</p>\n</blockquote>\n<h1 id=\"Web-Developer-RoadMap\"><a href=\"#Web-Developer-RoadMap\" class=\"headerlink\" title=\"Web Developer RoadMap\"></a><a href=\"https://github.com/kamranahmedse/developer-roadmap\">Web Developer RoadMap</a></h1><p><img src=\"https://img.shields.io/github/stars/kamranahmedse/developer-roadmap.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/kamranahmedse/developer-roadmap.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"30-Seconds-of-Code\"><a href=\"#30-Seconds-of-Code\" class=\"headerlink\" title=\"30 Seconds of Code\"></a><a href=\"https://github.com/30-seconds/30-seconds-of-code\">30 Seconds of Code</a></h1><p><img src=\"https://img.shields.io/github/stars/30-seconds/30-seconds-of-code.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/30-seconds/30-seconds-of-code.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome-Cheatsheets\"><a href=\"#Awesome-Cheatsheets\" class=\"headerlink\" title=\"Awesome Cheatsheets\"></a><a href=\"https://github.com/LeCoupa/awesome-cheatsheets\">Awesome Cheatsheets</a></h1><p><img src=\"https://img.shields.io/github/stars/LeCoupa/awesome-cheatsheets.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/LeCoupa/awesome-cheatsheets.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Web-Development-Resources\"><a href=\"#Web-Development-Resources\" class=\"headerlink\" title=\"Web Development Resources\"></a><a href=\"https://github.com/markodenic/web-development-resources\">Web Development Resources</a></h1><p><img src=\"https://img.shields.io/github/stars/markodenic/web-development-resources.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/markodenic/web-development-resources.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"CSS-Protips\"><a href=\"#CSS-Protips\" class=\"headerlink\" title=\"CSS Protips\"></a><a href=\"https://github.com/AllThingsSmitty/css-protips\">CSS Protips</a></h1><p><img src=\"https://img.shields.io/github/stars/AllThingsSmitty/css-protips.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/AllThingsSmitty/css-protips.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome-Design-Pattern\"><a href=\"#Awesome-Design-Pattern\" class=\"headerlink\" title=\"Awesome Design Pattern\"></a><a href=\"https://github.com/DovAmir/awesome-design-patterns\">Awesome Design Pattern</a></h1><p><img src=\"https://img.shields.io/github/stars/DovAmir/awesome-design-patterns.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/DovAmir/awesome-design-patterns.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Coding-Interview-University\"><a href=\"#Coding-Interview-University\" class=\"headerlink\" title=\"Coding Interview University\"></a><a href=\"https://github.com/jwasham/coding-interview-university\">Coding Interview University</a></h1><p><img src=\"https://img.shields.io/github/stars/jwasham/coding-interview-university.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/jwasham/coding-interview-university.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome-Interview-Questions\"><a href=\"#Awesome-Interview-Questions\" class=\"headerlink\" title=\"Awesome Interview Questions\"></a><a href=\"https://github.com/DopplerHQ/awesome-interview-questions\">Awesome Interview Questions</a></h1><p><img src=\"https://img.shields.io/github/stars/DopplerHQ/awesome-interview-questions.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/DopplerHQ/awesome-interview-questions.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Free-Programming-Book\"><a href=\"#Free-Programming-Book\" class=\"headerlink\" title=\"Free Programming Book\"></a><a href=\"https://github.com/EbookFoundation/free-programming-books\">Free Programming Book</a></h1><p><img src=\"https://img.shields.io/github/stars/EbookFoundation/free-programming-books.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/EbookFoundation/free-programming-books.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Command-Line\"><a href=\"#Command-Line\" class=\"headerlink\" title=\"Command Line\"></a><a href=\"https://github.com/jlevy/the-art-of-command-line\">Command Line</a></h1><p><img src=\"https://img.shields.io/github/stars/jlevy/the-art-of-command-line.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/jlevy/the-art-of-command-line.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome\"><a href=\"#Awesome\" class=\"headerlink\" title=\"Awesome\"></a><a href=\"https://github.com/sindresorhus/awesome\">Awesome</a></h1><p><img src=\"https://img.shields.io/github/stars/sindresorhus/awesome.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/sindresorhus/awesome.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"FreeCodeCamp\"><a href=\"#FreeCodeCamp\" class=\"headerlink\" title=\"FreeCodeCamp\"></a><a href=\"https://github.com/freeCodeCamp/freeCodeCamp\">FreeCodeCamp</a></h1><p><img src=\"https://img.shields.io/github/stars/freeCodeCamp/freeCodeCamp.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/freeCodeCamp/freeCodeCamp.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Frontend-Development\"><a href=\"#Frontend-Development\" class=\"headerlink\" title=\"Frontend Development\"></a><a href=\"https://github.com/dypsilon/frontend-dev-bookmarks\">Frontend Development</a></h1><p><img src=\"https://img.shields.io/github/stars/dypsilon/frontend-dev-bookmarks.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/dypsilon/frontend-dev-bookmarks.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Tech-Interview-Handbook\"><a href=\"#Tech-Interview-Handbook\" class=\"headerlink\" title=\"Tech Interview Handbook\"></a><a href=\"https://github.com/yangshun/tech-interview-handbook\">Tech Interview Handbook</a></h1><p><img src=\"https://img.shields.io/github/stars/yangshun/tech-interview-handbook.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/yangshun/tech-interview-handbook.svg\" alt=\"Github fork xx小台灯\"></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>点击标题可进入</p>\n</blockquote>\n<h1 id=\"Web-Developer-RoadMap\"><a href=\"#Web-Developer-RoadMap\" class=\"headerlink\" title=\"Web Developer RoadMap\"></a><a href=\"https://github.com/kamranahmedse/developer-roadmap\">Web Developer RoadMap</a></h1><p><img src=\"https://img.shields.io/github/stars/kamranahmedse/developer-roadmap.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/kamranahmedse/developer-roadmap.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"30-Seconds-of-Code\"><a href=\"#30-Seconds-of-Code\" class=\"headerlink\" title=\"30 Seconds of Code\"></a><a href=\"https://github.com/30-seconds/30-seconds-of-code\">30 Seconds of Code</a></h1><p><img src=\"https://img.shields.io/github/stars/30-seconds/30-seconds-of-code.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/30-seconds/30-seconds-of-code.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome-Cheatsheets\"><a href=\"#Awesome-Cheatsheets\" class=\"headerlink\" title=\"Awesome Cheatsheets\"></a><a href=\"https://github.com/LeCoupa/awesome-cheatsheets\">Awesome Cheatsheets</a></h1><p><img src=\"https://img.shields.io/github/stars/LeCoupa/awesome-cheatsheets.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/LeCoupa/awesome-cheatsheets.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Web-Development-Resources\"><a href=\"#Web-Development-Resources\" class=\"headerlink\" title=\"Web Development Resources\"></a><a href=\"https://github.com/markodenic/web-development-resources\">Web Development Resources</a></h1><p><img src=\"https://img.shields.io/github/stars/markodenic/web-development-resources.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/markodenic/web-development-resources.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"CSS-Protips\"><a href=\"#CSS-Protips\" class=\"headerlink\" title=\"CSS Protips\"></a><a href=\"https://github.com/AllThingsSmitty/css-protips\">CSS Protips</a></h1><p><img src=\"https://img.shields.io/github/stars/AllThingsSmitty/css-protips.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/AllThingsSmitty/css-protips.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome-Design-Pattern\"><a href=\"#Awesome-Design-Pattern\" class=\"headerlink\" title=\"Awesome Design Pattern\"></a><a href=\"https://github.com/DovAmir/awesome-design-patterns\">Awesome Design Pattern</a></h1><p><img src=\"https://img.shields.io/github/stars/DovAmir/awesome-design-patterns.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/DovAmir/awesome-design-patterns.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Coding-Interview-University\"><a href=\"#Coding-Interview-University\" class=\"headerlink\" title=\"Coding Interview University\"></a><a href=\"https://github.com/jwasham/coding-interview-university\">Coding Interview University</a></h1><p><img src=\"https://img.shields.io/github/stars/jwasham/coding-interview-university.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/jwasham/coding-interview-university.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome-Interview-Questions\"><a href=\"#Awesome-Interview-Questions\" class=\"headerlink\" title=\"Awesome Interview Questions\"></a><a href=\"https://github.com/DopplerHQ/awesome-interview-questions\">Awesome Interview Questions</a></h1><p><img src=\"https://img.shields.io/github/stars/DopplerHQ/awesome-interview-questions.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/DopplerHQ/awesome-interview-questions.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Free-Programming-Book\"><a href=\"#Free-Programming-Book\" class=\"headerlink\" title=\"Free Programming Book\"></a><a href=\"https://github.com/EbookFoundation/free-programming-books\">Free Programming Book</a></h1><p><img src=\"https://img.shields.io/github/stars/EbookFoundation/free-programming-books.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/EbookFoundation/free-programming-books.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Command-Line\"><a href=\"#Command-Line\" class=\"headerlink\" title=\"Command Line\"></a><a href=\"https://github.com/jlevy/the-art-of-command-line\">Command Line</a></h1><p><img src=\"https://img.shields.io/github/stars/jlevy/the-art-of-command-line.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/jlevy/the-art-of-command-line.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Awesome\"><a href=\"#Awesome\" class=\"headerlink\" title=\"Awesome\"></a><a href=\"https://github.com/sindresorhus/awesome\">Awesome</a></h1><p><img src=\"https://img.shields.io/github/stars/sindresorhus/awesome.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/sindresorhus/awesome.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"FreeCodeCamp\"><a href=\"#FreeCodeCamp\" class=\"headerlink\" title=\"FreeCodeCamp\"></a><a href=\"https://github.com/freeCodeCamp/freeCodeCamp\">FreeCodeCamp</a></h1><p><img src=\"https://img.shields.io/github/stars/freeCodeCamp/freeCodeCamp.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/freeCodeCamp/freeCodeCamp.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Frontend-Development\"><a href=\"#Frontend-Development\" class=\"headerlink\" title=\"Frontend Development\"></a><a href=\"https://github.com/dypsilon/frontend-dev-bookmarks\">Frontend Development</a></h1><p><img src=\"https://img.shields.io/github/stars/dypsilon/frontend-dev-bookmarks.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/dypsilon/frontend-dev-bookmarks.svg\" alt=\"Github fork xx小台灯\"></p>\n<h1 id=\"Tech-Interview-Handbook\"><a href=\"#Tech-Interview-Handbook\" class=\"headerlink\" title=\"Tech Interview Handbook\"></a><a href=\"https://github.com/yangshun/tech-interview-handbook\">Tech Interview Handbook</a></h1><p><img src=\"https://img.shields.io/github/stars/yangshun/tech-interview-handbook.svg\" alt=\"Github stars xx小台灯\"><br> <img src=\"https://img.shields.io/github/forks/yangshun/tech-interview-handbook.svg\" alt=\"Github fork xx小台灯\"></p>\n"},{"title":"Proxy基础用法","abbrlink":"365c4e09","date":"2021-09-17T08:44:13.000Z","_content":"\nProxy 意思为`代理`，即在访问对象之前建立一道`拦截`，任何访问该对象的操作之前都会通过这道`拦截`。\n\n# `Proxy`可以拦截什么\n\n* `getPrototypeOf()`\n\n* `setPrototypeOf()`\n\n* `isExtensible()`\n\n* `preventExtensions()`\n\n* `getOwnPropertyDescriptor()`\n\n* `defineProperty()`\n* `has()`\n* `get()`\n* `set()`\n* `deleteProperty()`\n* `ownKeys()`\n* `apply()`\n* `construct()`\n\n# 实例\n\n## Proxy 语法\n\n```javascript\nlet proxy = new Proxy(target, handler);\n```\n\n这就是`Proxy`的使用方法，所有的用法都是上面的方法，不同的是`handler`里面拦截的设置\n\n`new Proxy()`表示生成一个`Proxy`实例\n\n`target`表示要拦截的目标对象\n\n`handler`是一个对象，用来定制拦截方法\n\n**想要`handler`里的拦截方法生效，后续所有操作必须使用`Proxy`的实例**\n\n## get\n\n`get`方法在日常开发中应该是使用最多的方法了,先看一下在不使用`Proxy`时候的场景\n\n```javascript\nlet user = {\n  name: \"张三\",\n};\nconsole.log(user.name); //张三\nconsole.log(user.age); //undefined\n```\n\n[运行代码](https://codepen.io/lizeze/pen/wveyzmm?editors=1011)\n\n上面代码中，使用`let`定义了一个对象，并且有一个`name`属性\n\n然后分别打印出`name`和`age`属性,结果很明显，`age`属性未定义会输出`undefined`\n\n但是在实际项目中我们是不希望返回`undefined`这种值给页面的，下面我们就看一下怎么使用`Proxy`解决这个问题\n\n```javascript\nlet handler = {\n  //定义了get方法的拦截器\n  get: function (target, key) {\n    //target:要拦截的对象\n    //key: 修改的属性\n      if(target.hasOwnProperty(key)){\n          if(key=='name'){\n           return \"法外狂徒-张三\"\n         }\n      }\n       return \"18\"\n  }\n};\nlet obj = {\n  name: \"张三\"\n};\nlet user = new Proxy(obj, handler);\n\n//注意，这里的user不是上个示例的user对象了,而是Proxy的实例\nconsole.log(user.name); //法外狂徒-张三\n\nconsole.log(user.age); //18\n\n```\n\n[运行代码](https://codepen.io/lizeze/pen/OJgQRKw)\n\n使用了`Proxy`之后,发现和之前什么都不一样了，这是因为我们设置了`get`方法的拦截，当获取`name`属性的时候，我们返回一个固定的值，否则就返回年龄18。\n\n>这里是不太严谨的，实际项目中不可能只有两个字段的，这里只是为了演示\n\n**想要`handler`里的拦截方法生效，后续所有操作必须使用`Proxy`的实例**\n\n这个时候可以验证一下这句话，我们不使用`Proxy`实例,看看会怎么样\n\n[运行代码](https://codepen.io/lizeze/pen/wveyoEV?editors=1111)\n\n## set\n\n在实际项目中，我们会经常进行修改某个对象的属性，有时候在一些特殊的场景下需要对对象修改的新属性进行判断，看是否符合当前的业务场景。\n\n  ```javascript\nlet user = new Proxy(\n  {\n    age: 18\n  },\n  {\n    set: function (target, key, value) {\n      if (value > 140) {\n        throw \"你要成仙了!\";\n      }\n      target[key]=value\n    }\n  }\n);\nuser.age = 20;\nconsole.log(user.age)//20\nuser.age=200\n//Uncaught 你要成仙了! \n ```\n [运行代码](https://codepen.io/lizeze/pen/oNwEazw?editors=1011)\n\n 当我们修改一个人的年龄大于140,就会触发异常\n\n ## construct\n >`construct`方法用于拦截`new`操作符,为了使`new`操作符在生成的`Proxy`对象上生效,用于初始化代理的目标对象自身必须具有`Construct`内部方法\n\n### 示例\n ```javascript\nlet proxy = new Proxy(1, {\n  construct(target, args) {\n    console.log(target);\n    return new target(...args);\n  }\n});\n\n//Uncaught TypeError: Cannot create proxy with a non-object as target or handler \n ```\n [运行代码](https://codepen.io/lizeze/pen/WNOKKBV?editors=1112)\n\n ```javascript\n\n let proxy = new Proxy(function () {}, {\n  construct(target, args) {\n    console.log(args);\n    return 1;\n  }\n});\n\nlet obj = new proxy();\n//Uncaught TypeError: 'construct' on proxy: trap returned non-object ('1') \n ```\n [运行代码](https://codepen.io/lizeze/pen/QWgBVWW?editors=1011)\n\n 上面是两个错误的示例，下面写一个正确的写法\n \n \n ```javascript\nvar p = new Proxy(function() {}, {\n  construct: function(target, argumentsList, newTarget) {\n    console.log('called: ' + argumentsList.join(', '));\n    return { value: argumentsList[0] * 10 };\n  }\n});\nconsole.log(new p(1).value); // \"called: 1\"\n                             // 10\n ```\n\n [运行代码](https://codepen.io/lizeze/pen/dyRjqPe?editors=1111)\n\n通过以上代码得出结论\n\n* 要代理的对象必须具有`Construct`方法\n* 必须返回一个对象\n\n# 其他\n\n其他方法下一章继续","source":"_posts/js/Proxy的使用.md","raw":"---\ntitle: Proxy基础用法\ntags: JavaScript\nabbrlink: 365c4e09\ndate: 2021-09-17 16:44:13\n---\n\nProxy 意思为`代理`，即在访问对象之前建立一道`拦截`，任何访问该对象的操作之前都会通过这道`拦截`。\n\n# `Proxy`可以拦截什么\n\n* `getPrototypeOf()`\n\n* `setPrototypeOf()`\n\n* `isExtensible()`\n\n* `preventExtensions()`\n\n* `getOwnPropertyDescriptor()`\n\n* `defineProperty()`\n* `has()`\n* `get()`\n* `set()`\n* `deleteProperty()`\n* `ownKeys()`\n* `apply()`\n* `construct()`\n\n# 实例\n\n## Proxy 语法\n\n```javascript\nlet proxy = new Proxy(target, handler);\n```\n\n这就是`Proxy`的使用方法，所有的用法都是上面的方法，不同的是`handler`里面拦截的设置\n\n`new Proxy()`表示生成一个`Proxy`实例\n\n`target`表示要拦截的目标对象\n\n`handler`是一个对象，用来定制拦截方法\n\n**想要`handler`里的拦截方法生效，后续所有操作必须使用`Proxy`的实例**\n\n## get\n\n`get`方法在日常开发中应该是使用最多的方法了,先看一下在不使用`Proxy`时候的场景\n\n```javascript\nlet user = {\n  name: \"张三\",\n};\nconsole.log(user.name); //张三\nconsole.log(user.age); //undefined\n```\n\n[运行代码](https://codepen.io/lizeze/pen/wveyzmm?editors=1011)\n\n上面代码中，使用`let`定义了一个对象，并且有一个`name`属性\n\n然后分别打印出`name`和`age`属性,结果很明显，`age`属性未定义会输出`undefined`\n\n但是在实际项目中我们是不希望返回`undefined`这种值给页面的，下面我们就看一下怎么使用`Proxy`解决这个问题\n\n```javascript\nlet handler = {\n  //定义了get方法的拦截器\n  get: function (target, key) {\n    //target:要拦截的对象\n    //key: 修改的属性\n      if(target.hasOwnProperty(key)){\n          if(key=='name'){\n           return \"法外狂徒-张三\"\n         }\n      }\n       return \"18\"\n  }\n};\nlet obj = {\n  name: \"张三\"\n};\nlet user = new Proxy(obj, handler);\n\n//注意，这里的user不是上个示例的user对象了,而是Proxy的实例\nconsole.log(user.name); //法外狂徒-张三\n\nconsole.log(user.age); //18\n\n```\n\n[运行代码](https://codepen.io/lizeze/pen/OJgQRKw)\n\n使用了`Proxy`之后,发现和之前什么都不一样了，这是因为我们设置了`get`方法的拦截，当获取`name`属性的时候，我们返回一个固定的值，否则就返回年龄18。\n\n>这里是不太严谨的，实际项目中不可能只有两个字段的，这里只是为了演示\n\n**想要`handler`里的拦截方法生效，后续所有操作必须使用`Proxy`的实例**\n\n这个时候可以验证一下这句话，我们不使用`Proxy`实例,看看会怎么样\n\n[运行代码](https://codepen.io/lizeze/pen/wveyoEV?editors=1111)\n\n## set\n\n在实际项目中，我们会经常进行修改某个对象的属性，有时候在一些特殊的场景下需要对对象修改的新属性进行判断，看是否符合当前的业务场景。\n\n  ```javascript\nlet user = new Proxy(\n  {\n    age: 18\n  },\n  {\n    set: function (target, key, value) {\n      if (value > 140) {\n        throw \"你要成仙了!\";\n      }\n      target[key]=value\n    }\n  }\n);\nuser.age = 20;\nconsole.log(user.age)//20\nuser.age=200\n//Uncaught 你要成仙了! \n ```\n [运行代码](https://codepen.io/lizeze/pen/oNwEazw?editors=1011)\n\n 当我们修改一个人的年龄大于140,就会触发异常\n\n ## construct\n >`construct`方法用于拦截`new`操作符,为了使`new`操作符在生成的`Proxy`对象上生效,用于初始化代理的目标对象自身必须具有`Construct`内部方法\n\n### 示例\n ```javascript\nlet proxy = new Proxy(1, {\n  construct(target, args) {\n    console.log(target);\n    return new target(...args);\n  }\n});\n\n//Uncaught TypeError: Cannot create proxy with a non-object as target or handler \n ```\n [运行代码](https://codepen.io/lizeze/pen/WNOKKBV?editors=1112)\n\n ```javascript\n\n let proxy = new Proxy(function () {}, {\n  construct(target, args) {\n    console.log(args);\n    return 1;\n  }\n});\n\nlet obj = new proxy();\n//Uncaught TypeError: 'construct' on proxy: trap returned non-object ('1') \n ```\n [运行代码](https://codepen.io/lizeze/pen/QWgBVWW?editors=1011)\n\n 上面是两个错误的示例，下面写一个正确的写法\n \n \n ```javascript\nvar p = new Proxy(function() {}, {\n  construct: function(target, argumentsList, newTarget) {\n    console.log('called: ' + argumentsList.join(', '));\n    return { value: argumentsList[0] * 10 };\n  }\n});\nconsole.log(new p(1).value); // \"called: 1\"\n                             // 10\n ```\n\n [运行代码](https://codepen.io/lizeze/pen/dyRjqPe?editors=1111)\n\n通过以上代码得出结论\n\n* 要代理的对象必须具有`Construct`方法\n* 必须返回一个对象\n\n# 其他\n\n其他方法下一章继续","slug":"js/Proxy的使用","published":1,"updated":"2021-09-23T01:47:23.053Z","_id":"ckto4p4z30000qstrdlzkftna","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Proxy 意思为<code>代理</code>，即在访问对象之前建立一道<code>拦截</code>，任何访问该对象的操作之前都会通过这道<code>拦截</code>。</p>\n<h1 id=\"Proxy可以拦截什么\"><a href=\"#Proxy可以拦截什么\" class=\"headerlink\" title=\"Proxy可以拦截什么\"></a><code>Proxy</code>可以拦截什么</h1><ul>\n<li><p><code>getPrototypeOf()</code></p>\n</li>\n<li><p><code>setPrototypeOf()</code></p>\n</li>\n<li><p><code>isExtensible()</code></p>\n</li>\n<li><p><code>preventExtensions()</code></p>\n</li>\n<li><p><code>getOwnPropertyDescriptor()</code></p>\n</li>\n<li><p><code>defineProperty()</code></p>\n</li>\n<li><p><code>has()</code></p>\n</li>\n<li><p><code>get()</code></p>\n</li>\n<li><p><code>set()</code></p>\n</li>\n<li><p><code>deleteProperty()</code></p>\n</li>\n<li><p><code>ownKeys()</code></p>\n</li>\n<li><p><code>apply()</code></p>\n</li>\n<li><p><code>construct()</code></p>\n</li>\n</ul>\n<h1 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h1><h2 id=\"Proxy-语法\"><a href=\"#Proxy-语法\" class=\"headerlink\" title=\"Proxy 语法\"></a>Proxy 语法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler);</span><br></pre></td></tr></table></figure>\n\n<p>这就是<code>Proxy</code>的使用方法，所有的用法都是上面的方法，不同的是<code>handler</code>里面拦截的设置</p>\n<p><code>new Proxy()</code>表示生成一个<code>Proxy</code>实例</p>\n<p><code>target</code>表示要拦截的目标对象</p>\n<p><code>handler</code>是一个对象，用来定制拦截方法</p>\n<p><strong>想要<code>handler</code>里的拦截方法生效，后续所有操作必须使用<code>Proxy</code>的实例</strong></p>\n<h2 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h2><p><code>get</code>方法在日常开发中应该是使用最多的方法了,先看一下在不使用<code>Proxy</code>时候的场景</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> user = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;张三&quot;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.name); <span class=\"comment\">//张三</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.age); <span class=\"comment\">//undefined</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/lizeze/pen/wveyzmm?editors=1011\">运行代码</a></p>\n<p>上面代码中，使用<code>let</code>定义了一个对象，并且有一个<code>name</code>属性</p>\n<p>然后分别打印出<code>name</code>和<code>age</code>属性,结果很明显，<code>age</code>属性未定义会输出<code>undefined</code></p>\n<p>但是在实际项目中我们是不希望返回<code>undefined</code>这种值给页面的，下面我们就看一下怎么使用<code>Proxy</code>解决这个问题</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</span><br><span class=\"line\">  <span class=\"comment\">//定义了get方法的拦截器</span></span><br><span class=\"line\">  <span class=\"attr\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, key</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//target:要拦截的对象</span></span><br><span class=\"line\">    <span class=\"comment\">//key: 修改的属性</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(target.hasOwnProperty(key))&#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span>(key==<span class=\"string\">&#x27;name&#x27;</span>)&#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"string\">&quot;法外狂徒-张三&quot;</span></span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"string\">&quot;18&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;张三&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> user = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, handler);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//注意，这里的user不是上个示例的user对象了,而是Proxy的实例</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.name); <span class=\"comment\">//法外狂徒-张三</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.age); <span class=\"comment\">//18</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/lizeze/pen/OJgQRKw\">运行代码</a></p>\n<p>使用了<code>Proxy</code>之后,发现和之前什么都不一样了，这是因为我们设置了<code>get</code>方法的拦截，当获取<code>name</code>属性的时候，我们返回一个固定的值，否则就返回年龄18。</p>\n<blockquote>\n<p>这里是不太严谨的，实际项目中不可能只有两个字段的，这里只是为了演示</p>\n</blockquote>\n<p><strong>想要<code>handler</code>里的拦截方法生效，后续所有操作必须使用<code>Proxy</code>的实例</strong></p>\n<p>这个时候可以验证一下这句话，我们不使用<code>Proxy</code>实例,看看会怎么样</p>\n<p><a href=\"https://codepen.io/lizeze/pen/wveyoEV?editors=1111\">运行代码</a></p>\n<h2 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h2><p>在实际项目中，我们会经常进行修改某个对象的属性，有时候在一些特殊的场景下需要对对象修改的新属性进行判断，看是否符合当前的业务场景。</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> user = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">age</span>: <span class=\"number\">18</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">set</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, key, value</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (value &gt; <span class=\"number\">140</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"string\">&quot;你要成仙了!&quot;</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      target[key]=value</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\">user.age = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.age)<span class=\"comment\">//20</span></span><br><span class=\"line\">user.age=<span class=\"number\">200</span></span><br><span class=\"line\"><span class=\"comment\">//Uncaught 你要成仙了! </span></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/oNwEazw?editors=1011\">运行代码</a></p>\n<p> 当我们修改一个人的年龄大于140,就会触发异常</p>\n<h2 id=\"construct\"><a href=\"#construct\" class=\"headerlink\" title=\"construct\"></a>construct</h2><blockquote>\n<p><code>construct</code>方法用于拦截<code>new</code>操作符,为了使<code>new</code>操作符在生成的<code>Proxy</code>对象上生效,用于初始化代理的目标对象自身必须具有<code>Construct</code>内部方法</p>\n</blockquote>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"number\">1</span>, &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">construct</span>(<span class=\"params\">target, args</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(target);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> target(...args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Uncaught TypeError: Cannot create proxy with a non-object as target or handler </span></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/WNOKKBV?editors=1112\">运行代码</a></p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;, &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">construct</span>(<span class=\"params\">target, args</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(args);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> proxy();</span><br><span class=\"line\"><span class=\"comment\">//Uncaught TypeError: &#x27;construct&#x27; on proxy: trap returned non-object (&#x27;1&#x27;) </span></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/QWgBVWW?editors=1011\">运行代码</a></p>\n<p> 上面是两个错误的示例，下面写一个正确的写法</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;, &#123;</span><br><span class=\"line\">  <span class=\"attr\">construct</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target, argumentsList, newTarget</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;called: &#x27;</span> + argumentsList.join(<span class=\"string\">&#x27;, &#x27;</span>));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">value</span>: argumentsList[<span class=\"number\">0</span>] * <span class=\"number\">10</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> p(<span class=\"number\">1</span>).value); <span class=\"comment\">// &quot;called: 1&quot;</span></span><br><span class=\"line\">                             <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"https://codepen.io/lizeze/pen/dyRjqPe?editors=1111\">运行代码</a></p>\n<p>通过以上代码得出结论</p>\n<ul>\n<li>要代理的对象必须具有<code>Construct</code>方法</li>\n<li>必须返回一个对象</li>\n</ul>\n<h1 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h1><p>其他方法下一章继续</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Proxy 意思为<code>代理</code>，即在访问对象之前建立一道<code>拦截</code>，任何访问该对象的操作之前都会通过这道<code>拦截</code>。</p>\n<h1 id=\"Proxy可以拦截什么\"><a href=\"#Proxy可以拦截什么\" class=\"headerlink\" title=\"Proxy可以拦截什么\"></a><code>Proxy</code>可以拦截什么</h1><ul>\n<li><p><code>getPrototypeOf()</code></p>\n</li>\n<li><p><code>setPrototypeOf()</code></p>\n</li>\n<li><p><code>isExtensible()</code></p>\n</li>\n<li><p><code>preventExtensions()</code></p>\n</li>\n<li><p><code>getOwnPropertyDescriptor()</code></p>\n</li>\n<li><p><code>defineProperty()</code></p>\n</li>\n<li><p><code>has()</code></p>\n</li>\n<li><p><code>get()</code></p>\n</li>\n<li><p><code>set()</code></p>\n</li>\n<li><p><code>deleteProperty()</code></p>\n</li>\n<li><p><code>ownKeys()</code></p>\n</li>\n<li><p><code>apply()</code></p>\n</li>\n<li><p><code>construct()</code></p>\n</li>\n</ul>\n<h1 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h1><h2 id=\"Proxy-语法\"><a href=\"#Proxy-语法\" class=\"headerlink\" title=\"Proxy 语法\"></a>Proxy 语法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(target, handler);</span><br></pre></td></tr></table></figure>\n\n<p>这就是<code>Proxy</code>的使用方法，所有的用法都是上面的方法，不同的是<code>handler</code>里面拦截的设置</p>\n<p><code>new Proxy()</code>表示生成一个<code>Proxy</code>实例</p>\n<p><code>target</code>表示要拦截的目标对象</p>\n<p><code>handler</code>是一个对象，用来定制拦截方法</p>\n<p><strong>想要<code>handler</code>里的拦截方法生效，后续所有操作必须使用<code>Proxy</code>的实例</strong></p>\n<h2 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h2><p><code>get</code>方法在日常开发中应该是使用最多的方法了,先看一下在不使用<code>Proxy</code>时候的场景</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> user = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;张三&quot;</span>,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.name); <span class=\"comment\">//张三</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.age); <span class=\"comment\">//undefined</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/lizeze/pen/wveyzmm?editors=1011\">运行代码</a></p>\n<p>上面代码中，使用<code>let</code>定义了一个对象，并且有一个<code>name</code>属性</p>\n<p>然后分别打印出<code>name</code>和<code>age</code>属性,结果很明显，<code>age</code>属性未定义会输出<code>undefined</code></p>\n<p>但是在实际项目中我们是不希望返回<code>undefined</code>这种值给页面的，下面我们就看一下怎么使用<code>Proxy</code>解决这个问题</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> handler = &#123;</span><br><span class=\"line\">  <span class=\"comment\">//定义了get方法的拦截器</span></span><br><span class=\"line\">  <span class=\"attr\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, key</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//target:要拦截的对象</span></span><br><span class=\"line\">    <span class=\"comment\">//key: 修改的属性</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span>(target.hasOwnProperty(key))&#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span>(key==<span class=\"string\">&#x27;name&#x27;</span>)&#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"string\">&quot;法外狂徒-张三&quot;</span></span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"string\">&quot;18&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;张三&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> user = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(obj, handler);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//注意，这里的user不是上个示例的user对象了,而是Proxy的实例</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.name); <span class=\"comment\">//法外狂徒-张三</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.age); <span class=\"comment\">//18</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/lizeze/pen/OJgQRKw\">运行代码</a></p>\n<p>使用了<code>Proxy</code>之后,发现和之前什么都不一样了，这是因为我们设置了<code>get</code>方法的拦截，当获取<code>name</code>属性的时候，我们返回一个固定的值，否则就返回年龄18。</p>\n<blockquote>\n<p>这里是不太严谨的，实际项目中不可能只有两个字段的，这里只是为了演示</p>\n</blockquote>\n<p><strong>想要<code>handler</code>里的拦截方法生效，后续所有操作必须使用<code>Proxy</code>的实例</strong></p>\n<p>这个时候可以验证一下这句话，我们不使用<code>Proxy</code>实例,看看会怎么样</p>\n<p><a href=\"https://codepen.io/lizeze/pen/wveyoEV?editors=1111\">运行代码</a></p>\n<h2 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h2><p>在实际项目中，我们会经常进行修改某个对象的属性，有时候在一些特殊的场景下需要对对象修改的新属性进行判断，看是否符合当前的业务场景。</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> user = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">age</span>: <span class=\"number\">18</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">set</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, key, value</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (value &gt; <span class=\"number\">140</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"string\">&quot;你要成仙了!&quot;</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      target[key]=value</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\">user.age = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.age)<span class=\"comment\">//20</span></span><br><span class=\"line\">user.age=<span class=\"number\">200</span></span><br><span class=\"line\"><span class=\"comment\">//Uncaught 你要成仙了! </span></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/oNwEazw?editors=1011\">运行代码</a></p>\n<p> 当我们修改一个人的年龄大于140,就会触发异常</p>\n<h2 id=\"construct\"><a href=\"#construct\" class=\"headerlink\" title=\"construct\"></a>construct</h2><blockquote>\n<p><code>construct</code>方法用于拦截<code>new</code>操作符,为了使<code>new</code>操作符在生成的<code>Proxy</code>对象上生效,用于初始化代理的目标对象自身必须具有<code>Construct</code>内部方法</p>\n</blockquote>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"number\">1</span>, &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">construct</span>(<span class=\"params\">target, args</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(target);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> target(...args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Uncaught TypeError: Cannot create proxy with a non-object as target or handler </span></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/WNOKKBV?editors=1112\">运行代码</a></p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">let</span> proxy = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;, &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">construct</span>(<span class=\"params\">target, args</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(args);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> proxy();</span><br><span class=\"line\"><span class=\"comment\">//Uncaught TypeError: &#x27;construct&#x27; on proxy: trap returned non-object (&#x27;1&#x27;) </span></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/QWgBVWW?editors=1011\">运行代码</a></p>\n<p> 上面是两个错误的示例，下面写一个正确的写法</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;, &#123;</span><br><span class=\"line\">  <span class=\"attr\">construct</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target, argumentsList, newTarget</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;called: &#x27;</span> + argumentsList.join(<span class=\"string\">&#x27;, &#x27;</span>));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">value</span>: argumentsList[<span class=\"number\">0</span>] * <span class=\"number\">10</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> p(<span class=\"number\">1</span>).value); <span class=\"comment\">// &quot;called: 1&quot;</span></span><br><span class=\"line\">                             <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"https://codepen.io/lizeze/pen/dyRjqPe?editors=1111\">运行代码</a></p>\n<p>通过以上代码得出结论</p>\n<ul>\n<li>要代理的对象必须具有<code>Construct</code>方法</li>\n<li>必须返回一个对象</li>\n</ul>\n<h1 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h1><p>其他方法下一章继续</p>\n"},{"title":"webapi常用方法","abbrlink":"db7e49b1","date":"2021-09-26T03:09:59.000Z","_content":"# Web Api 的概念\n\n 浏览器提供了一些操作浏览器功能与页面元素的API,本次整理了一些常用操作页面元素的Api\n\n# document.querySelector()\n\n该方法会返回文档中与指定选择器或选择器组匹配的第一个页面元素。如果找不到匹配项，则返回`null`\n\n## 语法\n\n```javascript\n let element = document.querySelector(selectors);\n```\n## 参数 \n* selectors\n\n  该字符串必须是有效的`CSS`选择器字符串\n\n## 返回值\n\n 文档中与指定的一组`CSS`选择器匹配的第一个页面元素。如果没有匹配到，则返回`null`。\n\n## 实例\n### 实例1\n ```html\n <!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <body>\n    <div class=\"first\">\n      <span class=\"text\">1</span>\n      <span class=\"text\">2</span>\n      <span class=\"text\">3</span>\n      <span class=\"text\">4</span>\n    </div>\n  </body>\n</html>\n\n ```\n 以这个页面为基础,比如我想获取第一个`class`是`text`的内容,写法如下\n ```javascript\n let element=document.querySelector('.text').textContent;\n console.log(element); //1\n ```\n [运行代码](https://codepen.io/lizeze/pen/RwgeXNL?editors=1111)\n\n按照预期，输出的内容是`1`,是我想要的结果\n\n页面中有多个`class`为`test`的元素，但是精准的返回了我们要想的`1`，是因为该方法只会**匹配页面中查到的第一个元素**\n \n\n### 实例2\n\n还用上面的页面为例，如果我想获取到页面中第二个`class`为`text`的元素该怎么写呢。\n\n```javascript\nlet element=document.querySelector('span.text:nth-child(2)').textContent;\nconsole.log(element); //2\n\n```\n[运行代码](https://codepen.io/lizeze/pen/WNOaVrL?editors=1111)\n\n 该方法支持**复杂选择器**\n\n### 实例3\n\n页面元素中`id`应该是唯一的,但是在实际开发中很有可能会出现一个页面中有多个相同`id`的元素,那这个时候使用这个方法会得到什么呢。\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <body>\n    <span id=\"first\">1</span>\n    <span id=\"first\">2</span>\n  </body>\n</html>\n\n```\n 页面中有两个`id`为`first`的元素,我们执行该方法看一下效果\n\n ```javascript\n let element=document.querySelector('#first').textContent;\n console.log(element); //1\n ```\n 返回结果是1\n [运行代码](https://codepen.io/lizeze/pen/mdwzNEX?editors=1111)\n\n **就算页面中有多个`id`重复的元素，也是返回第一个元素**\n\n # document.querySelectorAll()\n\n 返回与指定的选择器组匹配的文档中的元素列表。\n\n ## 语法\n\n ```javascript\n let elementList = document.querySelectorAll(selectors);\n ```\n\n ## 参数\n\n  *  selectors\n\n这个字符串必须是一个合法的 `CSS`选择器字符串 \n\n >如果selectors参数中包含 CSS伪元素，则返回的列表始终为空。\n\n## 返回值\n一个静态 `NodeList`，包含一个与至少一个指定选择器匹配的元素的`Element`对象，或者在没有匹配的情况下为空`NodeList`\n\n## 实例\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <body>\n    <div class=\"first\">\n      <span class=\"text\">1</span>\n      <span class=\"text\">2</span>\n      <span class=\"text\">3</span>\n      <span class=\"text\">4</span>\n    </div>\n  </body>\n</html>\n\n```\n\n```javascript\n\n let elementList = document.querySelectorAll('.text');\nconsole.log(elementList) // [object NodeList] (4)\n```\n# document.images\n\n返回当前文档中所有 `image` 元素的集合.\n\n##  语法\n\n```javascript\nlet imageCollection = document.images;\n```\n## 返回值\n\n`HTMLImageElement`集合，当前页面的所有图片元素\n\n## 实例\n\n```javascript\nlet ilist = document.images;\nfor(var i = 0; i < ilist.length; i++) {\n    if(ilist[i].src == \"logo.png\") {\n        \n    }\n}\n```","source":"_posts/js/webapi.md","raw":"---\ntitle: webapi常用方法\ntags: JavaScript\nabbrlink: db7e49b1\ndate: 2021-09-26 11:09:59\n---\n# Web Api 的概念\n\n 浏览器提供了一些操作浏览器功能与页面元素的API,本次整理了一些常用操作页面元素的Api\n\n# document.querySelector()\n\n该方法会返回文档中与指定选择器或选择器组匹配的第一个页面元素。如果找不到匹配项，则返回`null`\n\n## 语法\n\n```javascript\n let element = document.querySelector(selectors);\n```\n## 参数 \n* selectors\n\n  该字符串必须是有效的`CSS`选择器字符串\n\n## 返回值\n\n 文档中与指定的一组`CSS`选择器匹配的第一个页面元素。如果没有匹配到，则返回`null`。\n\n## 实例\n### 实例1\n ```html\n <!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <body>\n    <div class=\"first\">\n      <span class=\"text\">1</span>\n      <span class=\"text\">2</span>\n      <span class=\"text\">3</span>\n      <span class=\"text\">4</span>\n    </div>\n  </body>\n</html>\n\n ```\n 以这个页面为基础,比如我想获取第一个`class`是`text`的内容,写法如下\n ```javascript\n let element=document.querySelector('.text').textContent;\n console.log(element); //1\n ```\n [运行代码](https://codepen.io/lizeze/pen/RwgeXNL?editors=1111)\n\n按照预期，输出的内容是`1`,是我想要的结果\n\n页面中有多个`class`为`test`的元素，但是精准的返回了我们要想的`1`，是因为该方法只会**匹配页面中查到的第一个元素**\n \n\n### 实例2\n\n还用上面的页面为例，如果我想获取到页面中第二个`class`为`text`的元素该怎么写呢。\n\n```javascript\nlet element=document.querySelector('span.text:nth-child(2)').textContent;\nconsole.log(element); //2\n\n```\n[运行代码](https://codepen.io/lizeze/pen/WNOaVrL?editors=1111)\n\n 该方法支持**复杂选择器**\n\n### 实例3\n\n页面元素中`id`应该是唯一的,但是在实际开发中很有可能会出现一个页面中有多个相同`id`的元素,那这个时候使用这个方法会得到什么呢。\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <body>\n    <span id=\"first\">1</span>\n    <span id=\"first\">2</span>\n  </body>\n</html>\n\n```\n 页面中有两个`id`为`first`的元素,我们执行该方法看一下效果\n\n ```javascript\n let element=document.querySelector('#first').textContent;\n console.log(element); //1\n ```\n 返回结果是1\n [运行代码](https://codepen.io/lizeze/pen/mdwzNEX?editors=1111)\n\n **就算页面中有多个`id`重复的元素，也是返回第一个元素**\n\n # document.querySelectorAll()\n\n 返回与指定的选择器组匹配的文档中的元素列表。\n\n ## 语法\n\n ```javascript\n let elementList = document.querySelectorAll(selectors);\n ```\n\n ## 参数\n\n  *  selectors\n\n这个字符串必须是一个合法的 `CSS`选择器字符串 \n\n >如果selectors参数中包含 CSS伪元素，则返回的列表始终为空。\n\n## 返回值\n一个静态 `NodeList`，包含一个与至少一个指定选择器匹配的元素的`Element`对象，或者在没有匹配的情况下为空`NodeList`\n\n## 实例\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <body>\n    <div class=\"first\">\n      <span class=\"text\">1</span>\n      <span class=\"text\">2</span>\n      <span class=\"text\">3</span>\n      <span class=\"text\">4</span>\n    </div>\n  </body>\n</html>\n\n```\n\n```javascript\n\n let elementList = document.querySelectorAll('.text');\nconsole.log(elementList) // [object NodeList] (4)\n```\n# document.images\n\n返回当前文档中所有 `image` 元素的集合.\n\n##  语法\n\n```javascript\nlet imageCollection = document.images;\n```\n## 返回值\n\n`HTMLImageElement`集合，当前页面的所有图片元素\n\n## 实例\n\n```javascript\nlet ilist = document.images;\nfor(var i = 0; i < ilist.length; i++) {\n    if(ilist[i].src == \"logo.png\") {\n        \n    }\n}\n```","slug":"js/webapi","published":1,"updated":"2021-09-26T05:53:29.891Z","_id":"cku0nknu70000egtr5xsq6h6f","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Web-Api-的概念\"><a href=\"#Web-Api-的概念\" class=\"headerlink\" title=\"Web Api 的概念\"></a>Web Api 的概念</h1><p> 浏览器提供了一些操作浏览器功能与页面元素的API,本次整理了一些常用操作页面元素的Api</p>\n<h1 id=\"document-querySelector\"><a href=\"#document-querySelector\" class=\"headerlink\" title=\"document.querySelector()\"></a>document.querySelector()</h1><p>该方法会返回文档中与指定选择器或选择器组匹配的第一个页面元素。如果找不到匹配项，则返回<code>null</code></p>\n<h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element = <span class=\"built_in\">document</span>.querySelector(selectors);</span><br></pre></td></tr></table></figure>\n<h2 id=\"参数\"><a href=\"#参数\" class=\"headerlink\" title=\"参数\"></a>参数</h2><ul>\n<li><p>selectors</p>\n<p>该字符串必须是有效的<code>CSS</code>选择器字符串</p>\n</li>\n</ul>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p> 文档中与指定的一组<code>CSS</code>选择器匹配的第一个页面元素。如果没有匹配到，则返回<code>null</code>。</p>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><h3 id=\"实例1\"><a href=\"#实例1\" class=\"headerlink\" title=\"实例1\"></a>实例1</h3> <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 以这个页面为基础,比如我想获取第一个<code>class</code>是<code>text</code>的内容,写法如下<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element=<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.text&#x27;</span>).textContent;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(element); <span class=\"comment\">//1</span></span><br></pre></td></tr></table></figure><br> <a href=\"https://codepen.io/lizeze/pen/RwgeXNL?editors=1111\">运行代码</a></p>\n<p>按照预期，输出的内容是<code>1</code>,是我想要的结果</p>\n<p>页面中有多个<code>class</code>为<code>test</code>的元素，但是精准的返回了我们要想的<code>1</code>，是因为该方法只会<strong>匹配页面中查到的第一个元素</strong></p>\n<h3 id=\"实例2\"><a href=\"#实例2\" class=\"headerlink\" title=\"实例2\"></a>实例2</h3><p>还用上面的页面为例，如果我想获取到页面中第二个<code>class</code>为<code>text</code>的元素该怎么写呢。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element=<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;span.text:nth-child(2)&#x27;</span>).textContent;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(element); <span class=\"comment\">//2</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://codepen.io/lizeze/pen/WNOaVrL?editors=1111\">运行代码</a></p>\n<p> 该方法支持<strong>复杂选择器</strong></p>\n<h3 id=\"实例3\"><a href=\"#实例3\" class=\"headerlink\" title=\"实例3\"></a>实例3</h3><p>页面元素中<code>id</code>应该是唯一的,但是在实际开发中很有可能会出现一个页面中有多个相同<code>id</code>的元素,那这个时候使用这个方法会得到什么呢。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 页面中有两个<code>id</code>为<code>first</code>的元素,我们执行该方法看一下效果</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element=<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#first&#x27;</span>).textContent;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(element); <span class=\"comment\">//1</span></span><br></pre></td></tr></table></figure>\n<p> 返回结果是1<br> <a href=\"https://codepen.io/lizeze/pen/mdwzNEX?editors=1111\">运行代码</a></p>\n<p> <strong>就算页面中有多个<code>id</code>重复的元素，也是返回第一个元素</strong></p>\n<h1 id=\"document-querySelectorAll\"><a href=\"#document-querySelectorAll\" class=\"headerlink\" title=\"document.querySelectorAll()\"></a>document.querySelectorAll()</h1><p> 返回与指定的选择器组匹配的文档中的元素列表。</p>\n<h2 id=\"语法-1\"><a href=\"#语法-1\" class=\"headerlink\" title=\"语法\"></a>语法</h2> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> elementList = <span class=\"built_in\">document</span>.querySelectorAll(selectors);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参数-1\"><a href=\"#参数-1\" class=\"headerlink\" title=\"参数\"></a>参数</h2><ul>\n<li> selectors</li>\n</ul>\n<p>这个字符串必须是一个合法的 <code>CSS</code>选择器字符串 </p>\n<blockquote>\n<p>如果selectors参数中包含 CSS伪元素，则返回的列表始终为空。</p>\n</blockquote>\n<h2 id=\"返回值-1\"><a href=\"#返回值-1\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>一个静态 <code>NodeList</code>，包含一个与至少一个指定选择器匹配的元素的<code>Element</code>对象，或者在没有匹配的情况下为空<code>NodeList</code></p>\n<h2 id=\"实例-1\"><a href=\"#实例-1\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">let</span> elementList = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;.text&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(elementList) <span class=\"comment\">// [object NodeList] (4)</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"document-images\"><a href=\"#document-images\" class=\"headerlink\" title=\"document.images\"></a>document.images</h1><p>返回当前文档中所有 <code>image</code> 元素的集合.</p>\n<h2 id=\"语法-2\"><a href=\"#语法-2\" class=\"headerlink\" title=\"语法\"></a>语法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> imageCollection = <span class=\"built_in\">document</span>.images;</span><br></pre></td></tr></table></figure>\n<h2 id=\"返回值-2\"><a href=\"#返回值-2\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p><code>HTMLImageElement</code>集合，当前页面的所有图片元素</p>\n<h2 id=\"实例-2\"><a href=\"#实例-2\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> ilist = <span class=\"built_in\">document</span>.images;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ilist.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(ilist[i].src == <span class=\"string\">&quot;logo.png&quot;</span>) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Web-Api-的概念\"><a href=\"#Web-Api-的概念\" class=\"headerlink\" title=\"Web Api 的概念\"></a>Web Api 的概念</h1><p> 浏览器提供了一些操作浏览器功能与页面元素的API,本次整理了一些常用操作页面元素的Api</p>\n<h1 id=\"document-querySelector\"><a href=\"#document-querySelector\" class=\"headerlink\" title=\"document.querySelector()\"></a>document.querySelector()</h1><p>该方法会返回文档中与指定选择器或选择器组匹配的第一个页面元素。如果找不到匹配项，则返回<code>null</code></p>\n<h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element = <span class=\"built_in\">document</span>.querySelector(selectors);</span><br></pre></td></tr></table></figure>\n<h2 id=\"参数\"><a href=\"#参数\" class=\"headerlink\" title=\"参数\"></a>参数</h2><ul>\n<li><p>selectors</p>\n<p>该字符串必须是有效的<code>CSS</code>选择器字符串</p>\n</li>\n</ul>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p> 文档中与指定的一组<code>CSS</code>选择器匹配的第一个页面元素。如果没有匹配到，则返回<code>null</code>。</p>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><h3 id=\"实例1\"><a href=\"#实例1\" class=\"headerlink\" title=\"实例1\"></a>实例1</h3> <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 以这个页面为基础,比如我想获取第一个<code>class</code>是<code>text</code>的内容,写法如下<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element=<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.text&#x27;</span>).textContent;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(element); <span class=\"comment\">//1</span></span><br></pre></td></tr></table></figure><br> <a href=\"https://codepen.io/lizeze/pen/RwgeXNL?editors=1111\">运行代码</a></p>\n<p>按照预期，输出的内容是<code>1</code>,是我想要的结果</p>\n<p>页面中有多个<code>class</code>为<code>test</code>的元素，但是精准的返回了我们要想的<code>1</code>，是因为该方法只会<strong>匹配页面中查到的第一个元素</strong></p>\n<h3 id=\"实例2\"><a href=\"#实例2\" class=\"headerlink\" title=\"实例2\"></a>实例2</h3><p>还用上面的页面为例，如果我想获取到页面中第二个<code>class</code>为<code>text</code>的元素该怎么写呢。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element=<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;span.text:nth-child(2)&#x27;</span>).textContent;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(element); <span class=\"comment\">//2</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://codepen.io/lizeze/pen/WNOaVrL?editors=1111\">运行代码</a></p>\n<p> 该方法支持<strong>复杂选择器</strong></p>\n<h3 id=\"实例3\"><a href=\"#实例3\" class=\"headerlink\" title=\"实例3\"></a>实例3</h3><p>页面元素中<code>id</code>应该是唯一的,但是在实际开发中很有可能会出现一个页面中有多个相同<code>id</code>的元素,那这个时候使用这个方法会得到什么呢。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> 页面中有两个<code>id</code>为<code>first</code>的元素,我们执行该方法看一下效果</p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> element=<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#first&#x27;</span>).textContent;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(element); <span class=\"comment\">//1</span></span><br></pre></td></tr></table></figure>\n<p> 返回结果是1<br> <a href=\"https://codepen.io/lizeze/pen/mdwzNEX?editors=1111\">运行代码</a></p>\n<p> <strong>就算页面中有多个<code>id</code>重复的元素，也是返回第一个元素</strong></p>\n<h1 id=\"document-querySelectorAll\"><a href=\"#document-querySelectorAll\" class=\"headerlink\" title=\"document.querySelectorAll()\"></a>document.querySelectorAll()</h1><p> 返回与指定的选择器组匹配的文档中的元素列表。</p>\n<h2 id=\"语法-1\"><a href=\"#语法-1\" class=\"headerlink\" title=\"语法\"></a>语法</h2> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> elementList = <span class=\"built_in\">document</span>.querySelectorAll(selectors);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参数-1\"><a href=\"#参数-1\" class=\"headerlink\" title=\"参数\"></a>参数</h2><ul>\n<li> selectors</li>\n</ul>\n<p>这个字符串必须是一个合法的 <code>CSS</code>选择器字符串 </p>\n<blockquote>\n<p>如果selectors参数中包含 CSS伪元素，则返回的列表始终为空。</p>\n</blockquote>\n<h2 id=\"返回值-1\"><a href=\"#返回值-1\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>一个静态 <code>NodeList</code>，包含一个与至少一个指定选择器匹配的元素的<code>Element</code>对象，或者在没有匹配的情况下为空<code>NodeList</code></p>\n<h2 id=\"实例-1\"><a href=\"#实例-1\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;first&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">let</span> elementList = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;.text&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(elementList) <span class=\"comment\">// [object NodeList] (4)</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"document-images\"><a href=\"#document-images\" class=\"headerlink\" title=\"document.images\"></a>document.images</h1><p>返回当前文档中所有 <code>image</code> 元素的集合.</p>\n<h2 id=\"语法-2\"><a href=\"#语法-2\" class=\"headerlink\" title=\"语法\"></a>语法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> imageCollection = <span class=\"built_in\">document</span>.images;</span><br></pre></td></tr></table></figure>\n<h2 id=\"返回值-2\"><a href=\"#返回值-2\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p><code>HTMLImageElement</code>集合，当前页面的所有图片元素</p>\n<h2 id=\"实例-2\"><a href=\"#实例-2\" class=\"headerlink\" title=\"实例\"></a>实例</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> ilist = <span class=\"built_in\">document</span>.images;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ilist.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(ilist[i].src == <span class=\"string\">&quot;logo.png&quot;</span>) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Promise知识整理","abbrlink":"ce0623bf","date":"2021-09-26T06:07:31.000Z","_content":"\n # Promise 的含义\n\n   `Promise` 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。它由社区最早提出和实现，ES6 将其写进了语言标准，统一了用法，原生提供了`Promise`对象。\n\n# Promise的特点\n\n* 对象的状态不受外界影响\n\n  `Promise`对象代表一个异步操作，有三种状态，**pending**、**fulfilled**、**rejected**，只有异步操作的结果可以决定当前是哪一种状态，其他任何操作都无法改变这个状态。\n\n* 一旦状态改变，就不会在变，任何时候都可以得到这个结果。\n  `Promise`对象的状态改变只有两种可能,从**pending**变为**fulfilled**,从**pending**变为**rejected**。只要这两种情况发生，状态就凝固了，不会在改变，会一直保持这个结果，这时就成为`resolved`。如果改变已经发生了，你在对`Promise`对象添加回调函数，也会立即得到这个结果。\n\n* 也有一些缺点\n\n  无法**取消**`Promise`,一旦创建对象就会**立即执行**,无法中途取消。\n\n  如果不设置回调函数,`Promise`内部抛出的错误,不会反应到外部。\n\n  当处于`pending`状态时,无法得到当前进展到哪一阶段\n\n  \n  >参考阮一峰老师的[ECMAScript 6 入门](https://es6.ruanyifeng.com/#docs/promise)\n\n# 语法\n\n```javascript\n\n const promise = new Promise(function(resolve, reject) {\n  // ... some code\n\n  if (/* 异步操作成功 */){\n    resolve(value);\n  } else {\n    reject(error);\n  }\n});\n```\n`Promise`构造函数接受一个函数做为参数,该函数的两个参数分别是`resolve`和`reject`。它们是两个函数，由`JavaScript `引擎提供\n\n`resolve`函数的作用是,将`Promise`对象的状态从`pending `改为`fulfilled`,并且将异步结果传递出去。\n\n`reject`函数的作用是,将`Promise`对象的状态从`pending`改为`rejected`,并将异步异常传递出去\n\n# then 方法\n\n\n`Promise`对象创建完成后,可以用`then`方法分别指定`resolve`和`rejected`状态的回调函数\n```javascript\nfunction ajaxGet(url) {\n  return new Promise((resolve, reject) => {\n    if (url !== \"api\") {\n      reject(url + \"请求失败\");\n    }\n\n    setTimeout(function () {\n      resolve(url + \"请求完成\");\n    }, 1000);\n  });\n}\najaxGet(\"api\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n);\n\najaxGet(\"api11\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n);\n\n\n```\n [运行代码](https://codepen.io/lizeze/pen/rNwQBqv?editors=1111)\n\n上面的代码中使用`Promise`对象模拟了一个从后台服务取数据的过程,`ajaxGet`方法只有一个简单的逻辑判断,如果传如的参数是`api`那么会在一秒之后返回成功，否则，立即返回失败。\n\n上面代码的返回结果是\n\n```javascript\n//\"api11请求失败\"  \n//\"api请求完成\"\n```\n\nPromise对象创建后会立即执行，所以先输出第二个方法的返回值，此时第一个还在等待状态变成完成\n\n# catch 方法\n\nPromise.prototype.catch()方法是.then(null, rejection)或.then(undefined, rejection)的别名，用于指定发生错误时的回调函数。\n\n\n 如果异步操作发生了异常,状态变成了`rejected`,就会调用`catch`方法指定的函数，处理这个异常。如果`then`方法指定的回调函数中发生了异常，也会被`catch`方法捕获   \n\n \n ```javascript\n ajaxGet(\"api11\").then(\n  (data) => {\n    console.log(data);\n  }\n).catch(error=>{\n   console.error(error)\n  \n});\n\n ```\n \n [运行代码](https://codepen.io/lizeze/pen/yLXQLyK?editors=1111)\n\n\n```javascript\n\najaxGet(\"api\").then(\n  (data) => {\n    console.log(data);\n      throw 'error!';\n  }\n).catch(error=>{\n   console.error(error) //then方法中的异常也会捕捉到\n  \n});\n\n```\n\n[运行代码](https://codepen.io/lizeze/pen/eYRQYpL?editors=1111)\n\n# finally 方法\n\n`finally`方法是不管`Promise`对象最后状态如何，都会执行的操作。和`try catch`中的`finally`方法是一样的\n\n下面是一个例子，最后使用`finally`方法输出一段内容\n\n\n\n```javascript\n \najaxGet(\"api\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n).finally(()=>{\n  console.log('不管成不成功，我都会输出')\n});\n\najaxGet(\"api11\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n).finally(()=>{\n  \n  console.log('不管成不成功，我都会输出')\n});\n\n//\"api11请求失败\"\n//\"不管成不成功，我都会输出\"\n//\"api请求完成\"\n//\"不管成不成功，我都会输出\"\n```\n\n [运行代码](https://codepen.io/lizeze/pen/BaZGxVG?editors=1111)\n\n `finally`的回调函数是没有参数的，无法得知`Promise`对象的结果是什么,这也表明不管最后的返回结果是什么，它都会执行","source":"_posts/js/Promise.md","raw":"---\ntitle: Promise知识整理\nabbrlink: ce0623bf\ndate: 2021-09-26 14:07:31\ntags: JavaScript\n---\n\n # Promise 的含义\n\n   `Promise` 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。它由社区最早提出和实现，ES6 将其写进了语言标准，统一了用法，原生提供了`Promise`对象。\n\n# Promise的特点\n\n* 对象的状态不受外界影响\n\n  `Promise`对象代表一个异步操作，有三种状态，**pending**、**fulfilled**、**rejected**，只有异步操作的结果可以决定当前是哪一种状态，其他任何操作都无法改变这个状态。\n\n* 一旦状态改变，就不会在变，任何时候都可以得到这个结果。\n  `Promise`对象的状态改变只有两种可能,从**pending**变为**fulfilled**,从**pending**变为**rejected**。只要这两种情况发生，状态就凝固了，不会在改变，会一直保持这个结果，这时就成为`resolved`。如果改变已经发生了，你在对`Promise`对象添加回调函数，也会立即得到这个结果。\n\n* 也有一些缺点\n\n  无法**取消**`Promise`,一旦创建对象就会**立即执行**,无法中途取消。\n\n  如果不设置回调函数,`Promise`内部抛出的错误,不会反应到外部。\n\n  当处于`pending`状态时,无法得到当前进展到哪一阶段\n\n  \n  >参考阮一峰老师的[ECMAScript 6 入门](https://es6.ruanyifeng.com/#docs/promise)\n\n# 语法\n\n```javascript\n\n const promise = new Promise(function(resolve, reject) {\n  // ... some code\n\n  if (/* 异步操作成功 */){\n    resolve(value);\n  } else {\n    reject(error);\n  }\n});\n```\n`Promise`构造函数接受一个函数做为参数,该函数的两个参数分别是`resolve`和`reject`。它们是两个函数，由`JavaScript `引擎提供\n\n`resolve`函数的作用是,将`Promise`对象的状态从`pending `改为`fulfilled`,并且将异步结果传递出去。\n\n`reject`函数的作用是,将`Promise`对象的状态从`pending`改为`rejected`,并将异步异常传递出去\n\n# then 方法\n\n\n`Promise`对象创建完成后,可以用`then`方法分别指定`resolve`和`rejected`状态的回调函数\n```javascript\nfunction ajaxGet(url) {\n  return new Promise((resolve, reject) => {\n    if (url !== \"api\") {\n      reject(url + \"请求失败\");\n    }\n\n    setTimeout(function () {\n      resolve(url + \"请求完成\");\n    }, 1000);\n  });\n}\najaxGet(\"api\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n);\n\najaxGet(\"api11\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n);\n\n\n```\n [运行代码](https://codepen.io/lizeze/pen/rNwQBqv?editors=1111)\n\n上面的代码中使用`Promise`对象模拟了一个从后台服务取数据的过程,`ajaxGet`方法只有一个简单的逻辑判断,如果传如的参数是`api`那么会在一秒之后返回成功，否则，立即返回失败。\n\n上面代码的返回结果是\n\n```javascript\n//\"api11请求失败\"  \n//\"api请求完成\"\n```\n\nPromise对象创建后会立即执行，所以先输出第二个方法的返回值，此时第一个还在等待状态变成完成\n\n# catch 方法\n\nPromise.prototype.catch()方法是.then(null, rejection)或.then(undefined, rejection)的别名，用于指定发生错误时的回调函数。\n\n\n 如果异步操作发生了异常,状态变成了`rejected`,就会调用`catch`方法指定的函数，处理这个异常。如果`then`方法指定的回调函数中发生了异常，也会被`catch`方法捕获   \n\n \n ```javascript\n ajaxGet(\"api11\").then(\n  (data) => {\n    console.log(data);\n  }\n).catch(error=>{\n   console.error(error)\n  \n});\n\n ```\n \n [运行代码](https://codepen.io/lizeze/pen/yLXQLyK?editors=1111)\n\n\n```javascript\n\najaxGet(\"api\").then(\n  (data) => {\n    console.log(data);\n      throw 'error!';\n  }\n).catch(error=>{\n   console.error(error) //then方法中的异常也会捕捉到\n  \n});\n\n```\n\n[运行代码](https://codepen.io/lizeze/pen/eYRQYpL?editors=1111)\n\n# finally 方法\n\n`finally`方法是不管`Promise`对象最后状态如何，都会执行的操作。和`try catch`中的`finally`方法是一样的\n\n下面是一个例子，最后使用`finally`方法输出一段内容\n\n\n\n```javascript\n \najaxGet(\"api\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n).finally(()=>{\n  console.log('不管成不成功，我都会输出')\n});\n\najaxGet(\"api11\").then(\n  (data) => {\n    console.log(data);\n  },\n  (error) => {\n    console.error(error);\n  }\n).finally(()=>{\n  \n  console.log('不管成不成功，我都会输出')\n});\n\n//\"api11请求失败\"\n//\"不管成不成功，我都会输出\"\n//\"api请求完成\"\n//\"不管成不成功，我都会输出\"\n```\n\n [运行代码](https://codepen.io/lizeze/pen/BaZGxVG?editors=1111)\n\n `finally`的回调函数是没有参数的，无法得知`Promise`对象的结果是什么,这也表明不管最后的返回结果是什么，它都会执行","slug":"js/Promise","published":1,"updated":"2021-09-27T08:44:43.234Z","_id":"cku0tli3l000008trgec944ii","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Promise-的含义\"><a href=\"#Promise-的含义\" class=\"headerlink\" title=\"Promise 的含义\"></a>Promise 的含义</h1><p>   <code>Promise</code> 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。它由社区最早提出和实现，ES6 将其写进了语言标准，统一了用法，原生提供了<code>Promise</code>对象。</p>\n<h1 id=\"Promise的特点\"><a href=\"#Promise的特点\" class=\"headerlink\" title=\"Promise的特点\"></a>Promise的特点</h1><ul>\n<li><p>对象的状态不受外界影响</p>\n<p><code>Promise</code>对象代表一个异步操作，有三种状态，<strong>pending</strong>、<strong>fulfilled</strong>、<strong>rejected</strong>，只有异步操作的结果可以决定当前是哪一种状态，其他任何操作都无法改变这个状态。</p>\n</li>\n<li><p>一旦状态改变，就不会在变，任何时候都可以得到这个结果。<br><code>Promise</code>对象的状态改变只有两种可能,从<strong>pending</strong>变为<strong>fulfilled</strong>,从<strong>pending</strong>变为<strong>rejected</strong>。只要这两种情况发生，状态就凝固了，不会在改变，会一直保持这个结果，这时就成为<code>resolved</code>。如果改变已经发生了，你在对<code>Promise</code>对象添加回调函数，也会立即得到这个结果。</p>\n</li>\n<li><p>也有一些缺点</p>\n<p>无法<strong>取消</strong><code>Promise</code>,一旦创建对象就会<strong>立即执行</strong>,无法中途取消。</p>\n<p>如果不设置回调函数,<code>Promise</code>内部抛出的错误,不会反应到外部。</p>\n<p>当处于<code>pending</code>状态时,无法得到当前进展到哪一阶段</p>\n<blockquote>\n<p>参考阮一峰老师的<a href=\"https://es6.ruanyifeng.com/#docs/promise\">ECMAScript 6 入门</a></p>\n</blockquote>\n</li>\n</ul>\n<h1 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... some code</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"comment\">/* 异步操作成功 */</span>)&#123;</span><br><span class=\"line\">    resolve(value);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    reject(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><code>Promise</code>构造函数接受一个函数做为参数,该函数的两个参数分别是<code>resolve</code>和<code>reject</code>。它们是两个函数，由<code>JavaScript </code>引擎提供</p>\n<p><code>resolve</code>函数的作用是,将<code>Promise</code>对象的状态从<code>pending </code>改为<code>fulfilled</code>,并且将异步结果传递出去。</p>\n<p><code>reject</code>函数的作用是,将<code>Promise</code>对象的状态从<code>pending</code>改为<code>rejected</code>,并将异步异常传递出去</p>\n<h1 id=\"then-方法\"><a href=\"#then-方法\" class=\"headerlink\" title=\"then 方法\"></a>then 方法</h1><p><code>Promise</code>对象创建完成后,可以用<code>then</code>方法分别指定<code>resolve</code>和<code>rejected</code>状态的回调函数</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajaxGet</span>(<span class=\"params\">url</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (url !== <span class=\"string\">&quot;api&quot;</span>) &#123;</span><br><span class=\"line\">      reject(url + <span class=\"string\">&quot;请求失败&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(url + <span class=\"string\">&quot;请求完成&quot;</span>);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api11&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/rNwQBqv?editors=1111\">运行代码</a></p>\n<p>上面的代码中使用<code>Promise</code>对象模拟了一个从后台服务取数据的过程,<code>ajaxGet</code>方法只有一个简单的逻辑判断,如果传如的参数是<code>api</code>那么会在一秒之后返回成功，否则，立即返回失败。</p>\n<p>上面代码的返回结果是</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//&quot;api11请求失败&quot;  </span></span><br><span class=\"line\"><span class=\"comment\">//&quot;api请求完成&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>Promise对象创建后会立即执行，所以先输出第二个方法的返回值，此时第一个还在等待状态变成完成</p>\n<h1 id=\"catch-方法\"><a href=\"#catch-方法\" class=\"headerlink\" title=\"catch 方法\"></a>catch 方法</h1><p>Promise.prototype.catch()方法是.then(null, rejection)或.then(undefined, rejection)的别名，用于指定发生错误时的回调函数。</p>\n<p> 如果异步操作发生了异常,状态变成了<code>rejected</code>,就会调用<code>catch</code>方法指定的函数，处理这个异常。如果<code>then</code>方法指定的回调函数中发生了异常，也会被<code>catch</code>方法捕获   </p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ajaxGet(<span class=\"string\">&quot;api11&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).catch(<span class=\"function\"><span class=\"params\">error</span>=&gt;</span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.error(error)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/yLXQLyK?editors=1111\">运行代码</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"string\">&#x27;error!&#x27;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).catch(<span class=\"function\"><span class=\"params\">error</span>=&gt;</span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.error(error) <span class=\"comment\">//then方法中的异常也会捕捉到</span></span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/lizeze/pen/eYRQYpL?editors=1111\">运行代码</a></p>\n<h1 id=\"finally-方法\"><a href=\"#finally-方法\" class=\"headerlink\" title=\"finally 方法\"></a>finally 方法</h1><p><code>finally</code>方法是不管<code>Promise</code>对象最后状态如何，都会执行的操作。和<code>try catch</code>中的<code>finally</code>方法是一样的</p>\n<p>下面是一个例子，最后使用<code>finally</code>方法输出一段内容</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> </span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).finally(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;不管成不成功，我都会输出&#x27;</span>)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api11&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).finally(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;不管成不成功，我都会输出&#x27;</span>)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//&quot;api11请求失败&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//&quot;不管成不成功，我都会输出&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//&quot;api请求完成&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//&quot;不管成不成功，我都会输出&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"https://codepen.io/lizeze/pen/BaZGxVG?editors=1111\">运行代码</a></p>\n<p> <code>finally</code>的回调函数是没有参数的，无法得知<code>Promise</code>对象的结果是什么,这也表明不管最后的返回结果是什么，它都会执行</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Promise-的含义\"><a href=\"#Promise-的含义\" class=\"headerlink\" title=\"Promise 的含义\"></a>Promise 的含义</h1><p>   <code>Promise</code> 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。它由社区最早提出和实现，ES6 将其写进了语言标准，统一了用法，原生提供了<code>Promise</code>对象。</p>\n<h1 id=\"Promise的特点\"><a href=\"#Promise的特点\" class=\"headerlink\" title=\"Promise的特点\"></a>Promise的特点</h1><ul>\n<li><p>对象的状态不受外界影响</p>\n<p><code>Promise</code>对象代表一个异步操作，有三种状态，<strong>pending</strong>、<strong>fulfilled</strong>、<strong>rejected</strong>，只有异步操作的结果可以决定当前是哪一种状态，其他任何操作都无法改变这个状态。</p>\n</li>\n<li><p>一旦状态改变，就不会在变，任何时候都可以得到这个结果。<br><code>Promise</code>对象的状态改变只有两种可能,从<strong>pending</strong>变为<strong>fulfilled</strong>,从<strong>pending</strong>变为<strong>rejected</strong>。只要这两种情况发生，状态就凝固了，不会在改变，会一直保持这个结果，这时就成为<code>resolved</code>。如果改变已经发生了，你在对<code>Promise</code>对象添加回调函数，也会立即得到这个结果。</p>\n</li>\n<li><p>也有一些缺点</p>\n<p>无法<strong>取消</strong><code>Promise</code>,一旦创建对象就会<strong>立即执行</strong>,无法中途取消。</p>\n<p>如果不设置回调函数,<code>Promise</code>内部抛出的错误,不会反应到外部。</p>\n<p>当处于<code>pending</code>状态时,无法得到当前进展到哪一阶段</p>\n<blockquote>\n<p>参考阮一峰老师的<a href=\"https://es6.ruanyifeng.com/#docs/promise\">ECMAScript 6 入门</a></p>\n</blockquote>\n</li>\n</ul>\n<h1 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... some code</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"comment\">/* 异步操作成功 */</span>)&#123;</span><br><span class=\"line\">    resolve(value);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    reject(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><code>Promise</code>构造函数接受一个函数做为参数,该函数的两个参数分别是<code>resolve</code>和<code>reject</code>。它们是两个函数，由<code>JavaScript </code>引擎提供</p>\n<p><code>resolve</code>函数的作用是,将<code>Promise</code>对象的状态从<code>pending </code>改为<code>fulfilled</code>,并且将异步结果传递出去。</p>\n<p><code>reject</code>函数的作用是,将<code>Promise</code>对象的状态从<code>pending</code>改为<code>rejected</code>,并将异步异常传递出去</p>\n<h1 id=\"then-方法\"><a href=\"#then-方法\" class=\"headerlink\" title=\"then 方法\"></a>then 方法</h1><p><code>Promise</code>对象创建完成后,可以用<code>then</code>方法分别指定<code>resolve</code>和<code>rejected</code>状态的回调函数</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajaxGet</span>(<span class=\"params\">url</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (url !== <span class=\"string\">&quot;api&quot;</span>) &#123;</span><br><span class=\"line\">      reject(url + <span class=\"string\">&quot;请求失败&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(url + <span class=\"string\">&quot;请求完成&quot;</span>);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api11&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/rNwQBqv?editors=1111\">运行代码</a></p>\n<p>上面的代码中使用<code>Promise</code>对象模拟了一个从后台服务取数据的过程,<code>ajaxGet</code>方法只有一个简单的逻辑判断,如果传如的参数是<code>api</code>那么会在一秒之后返回成功，否则，立即返回失败。</p>\n<p>上面代码的返回结果是</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//&quot;api11请求失败&quot;  </span></span><br><span class=\"line\"><span class=\"comment\">//&quot;api请求完成&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>Promise对象创建后会立即执行，所以先输出第二个方法的返回值，此时第一个还在等待状态变成完成</p>\n<h1 id=\"catch-方法\"><a href=\"#catch-方法\" class=\"headerlink\" title=\"catch 方法\"></a>catch 方法</h1><p>Promise.prototype.catch()方法是.then(null, rejection)或.then(undefined, rejection)的别名，用于指定发生错误时的回调函数。</p>\n<p> 如果异步操作发生了异常,状态变成了<code>rejected</code>,就会调用<code>catch</code>方法指定的函数，处理这个异常。如果<code>then</code>方法指定的回调函数中发生了异常，也会被<code>catch</code>方法捕获   </p>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ajaxGet(<span class=\"string\">&quot;api11&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).catch(<span class=\"function\"><span class=\"params\">error</span>=&gt;</span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.error(error)</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> <a href=\"https://codepen.io/lizeze/pen/yLXQLyK?editors=1111\">运行代码</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"string\">&#x27;error!&#x27;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).catch(<span class=\"function\"><span class=\"params\">error</span>=&gt;</span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.error(error) <span class=\"comment\">//then方法中的异常也会捕捉到</span></span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/lizeze/pen/eYRQYpL?editors=1111\">运行代码</a></p>\n<h1 id=\"finally-方法\"><a href=\"#finally-方法\" class=\"headerlink\" title=\"finally 方法\"></a>finally 方法</h1><p><code>finally</code>方法是不管<code>Promise</code>对象最后状态如何，都会执行的操作。和<code>try catch</code>中的<code>finally</code>方法是一样的</p>\n<p>下面是一个例子，最后使用<code>finally</code>方法输出一段内容</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> </span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).finally(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;不管成不成功，我都会输出&#x27;</span>)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">ajaxGet(<span class=\"string\">&quot;api11&quot;</span>).then(</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">).finally(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;不管成不成功，我都会输出&#x27;</span>)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//&quot;api11请求失败&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//&quot;不管成不成功，我都会输出&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//&quot;api请求完成&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//&quot;不管成不成功，我都会输出&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> <a href=\"https://codepen.io/lizeze/pen/BaZGxVG?editors=1111\">运行代码</a></p>\n<p> <code>finally</code>的回调函数是没有参数的，无法得知<code>Promise</code>对象的结果是什么,这也表明不管最后的返回结果是什么，它都会执行</p>\n"},{"title":"Selenium实战","abbrlink":"d009cca4","date":"2021-09-29T03:48:06.000Z","_content":"\n# 安装依赖\n\n```xml\n        <dependency>\n            <groupId>org.seleniumhq.selenium</groupId>\n            <artifactId>selenium-java</artifactId>\n            <version>3.141.59</version>\n        </dependency>\n```\n# 安装浏览器驱动\n\n[下载](https://www.selenium.dev/zh-cn/documentation/getting_started/installing_browser_drivers/#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83)安装\n\n选择自己喜欢的浏览器，本文使用`Edge`\n\n#  打开一个网页\n\n```java\n\n        System.setProperty(\"webdriver.edge.driver\", \"D:\\\\edgedriver_win32\\\\MicrosoftWebDriver.exe\"); //上面下载的浏览器驱动\n        WebDriver driver = new EdgeDriver();\n        driver.get(\"https://www.baidu.com/\");\n\n```\n# 定位元素\n\n```java\n\n    driver.findElement(By.id(\"kw\")).sendKeys(\"java\"); //输入内容\n\n    driver.findElement(By.id(\"su\")).click(); //点击按钮\n\n    List<WebElement> muchoCheese = driver.findElements(By.cssSelector(\"#cheese li\"));//获取多个与元素\n\n```\n\n# 获取页面cookie\n\n```java\n    Set<Cookie> cookies = driver.manage().getCookies();\n        String cookieStr = \"\";\n        for (Cookie cookie : cookies) {\n                cookieStr+= cookie.getValue();\n\n        }\n```\n\n# 浏览器加载扩展\n\n```java\n\n   File plugPath = new File(\"E:\\\\tsy\\\\tsy-tool.crx\");\n \n       //创建options对象\n         ChromeOptions options = new ChromeOptions();\n        options.addExtensions(plugPath);   \n        WebDriver driver = new ChromeDriver(options); //这里使用的是chrome\n\n```","source":"_posts/java/selenium.md","raw":"---\ntitle: Selenium实战\ntags: java\nabbrlink: d009cca4\ndate: 2021-09-29 11:48:06\n---\n\n# 安装依赖\n\n```xml\n        <dependency>\n            <groupId>org.seleniumhq.selenium</groupId>\n            <artifactId>selenium-java</artifactId>\n            <version>3.141.59</version>\n        </dependency>\n```\n# 安装浏览器驱动\n\n[下载](https://www.selenium.dev/zh-cn/documentation/getting_started/installing_browser_drivers/#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83)安装\n\n选择自己喜欢的浏览器，本文使用`Edge`\n\n#  打开一个网页\n\n```java\n\n        System.setProperty(\"webdriver.edge.driver\", \"D:\\\\edgedriver_win32\\\\MicrosoftWebDriver.exe\"); //上面下载的浏览器驱动\n        WebDriver driver = new EdgeDriver();\n        driver.get(\"https://www.baidu.com/\");\n\n```\n# 定位元素\n\n```java\n\n    driver.findElement(By.id(\"kw\")).sendKeys(\"java\"); //输入内容\n\n    driver.findElement(By.id(\"su\")).click(); //点击按钮\n\n    List<WebElement> muchoCheese = driver.findElements(By.cssSelector(\"#cheese li\"));//获取多个与元素\n\n```\n\n# 获取页面cookie\n\n```java\n    Set<Cookie> cookies = driver.manage().getCookies();\n        String cookieStr = \"\";\n        for (Cookie cookie : cookies) {\n                cookieStr+= cookie.getValue();\n\n        }\n```\n\n# 浏览器加载扩展\n\n```java\n\n   File plugPath = new File(\"E:\\\\tsy\\\\tsy-tool.crx\");\n \n       //创建options对象\n         ChromeOptions options = new ChromeOptions();\n        options.addExtensions(plugPath);   \n        WebDriver driver = new ChromeDriver(options); //这里使用的是chrome\n\n```","slug":"java/selenium","published":1,"updated":"2021-09-29T07:03:33.931Z","_id":"cku4yz409000090v9cu6tg2fe","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.seleniumhq.selenium<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>selenium-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.141.59<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"安装浏览器驱动\"><a href=\"#安装浏览器驱动\" class=\"headerlink\" title=\"安装浏览器驱动\"></a>安装浏览器驱动</h1><p><a href=\"https://www.selenium.dev/zh-cn/documentation/getting_started/installing_browser_drivers/#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83\">下载</a>安装</p>\n<p>选择自己喜欢的浏览器，本文使用<code>Edge</code></p>\n<h1 id=\"打开一个网页\"><a href=\"#打开一个网页\" class=\"headerlink\" title=\"打开一个网页\"></a>打开一个网页</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">System.setProperty(<span class=\"string\">&quot;webdriver.edge.driver&quot;</span>, <span class=\"string\">&quot;D:\\\\edgedriver_win32\\\\MicrosoftWebDriver.exe&quot;</span>); <span class=\"comment\">//上面下载的浏览器驱动</span></span><br><span class=\"line\">WebDriver driver = <span class=\"keyword\">new</span> EdgeDriver();</span><br><span class=\"line\">driver.get(<span class=\"string\">&quot;https://www.baidu.com/&quot;</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"定位元素\"><a href=\"#定位元素\" class=\"headerlink\" title=\"定位元素\"></a>定位元素</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">driver.findElement(By.id(<span class=\"string\">&quot;kw&quot;</span>)).sendKeys(<span class=\"string\">&quot;java&quot;</span>); <span class=\"comment\">//输入内容</span></span><br><span class=\"line\"></span><br><span class=\"line\">driver.findElement(By.id(<span class=\"string\">&quot;su&quot;</span>)).click(); <span class=\"comment\">//点击按钮</span></span><br><span class=\"line\"></span><br><span class=\"line\">List&lt;WebElement&gt; muchoCheese = driver.findElements(By.cssSelector(<span class=\"string\">&quot;#cheese li&quot;</span>));<span class=\"comment\">//获取多个与元素</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"获取页面cookie\"><a href=\"#获取页面cookie\" class=\"headerlink\" title=\"获取页面cookie\"></a>获取页面cookie</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Set&lt;Cookie&gt; cookies = driver.manage().getCookies();</span><br><span class=\"line\">    String cookieStr = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Cookie cookie : cookies) &#123;</span><br><span class=\"line\">            cookieStr+= cookie.getValue();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"浏览器加载扩展\"><a href=\"#浏览器加载扩展\" class=\"headerlink\" title=\"浏览器加载扩展\"></a>浏览器加载扩展</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">File plugPath = <span class=\"keyword\">new</span> File(<span class=\"string\">&quot;E:\\\\tsy\\\\tsy-tool.crx&quot;</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//创建options对象</span></span><br><span class=\"line\">      ChromeOptions options = <span class=\"keyword\">new</span> ChromeOptions();</span><br><span class=\"line\">     options.addExtensions(plugPath);   </span><br><span class=\"line\">     WebDriver driver = <span class=\"keyword\">new</span> ChromeDriver(options); <span class=\"comment\">//这里使用的是chrome</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.seleniumhq.selenium<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>selenium-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.141.59<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"安装浏览器驱动\"><a href=\"#安装浏览器驱动\" class=\"headerlink\" title=\"安装浏览器驱动\"></a>安装浏览器驱动</h1><p><a href=\"https://www.selenium.dev/zh-cn/documentation/getting_started/installing_browser_drivers/#%E5%BF%AB%E9%80%9F%E5%8F%82%E8%80%83\">下载</a>安装</p>\n<p>选择自己喜欢的浏览器，本文使用<code>Edge</code></p>\n<h1 id=\"打开一个网页\"><a href=\"#打开一个网页\" class=\"headerlink\" title=\"打开一个网页\"></a>打开一个网页</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">System.setProperty(<span class=\"string\">&quot;webdriver.edge.driver&quot;</span>, <span class=\"string\">&quot;D:\\\\edgedriver_win32\\\\MicrosoftWebDriver.exe&quot;</span>); <span class=\"comment\">//上面下载的浏览器驱动</span></span><br><span class=\"line\">WebDriver driver = <span class=\"keyword\">new</span> EdgeDriver();</span><br><span class=\"line\">driver.get(<span class=\"string\">&quot;https://www.baidu.com/&quot;</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"定位元素\"><a href=\"#定位元素\" class=\"headerlink\" title=\"定位元素\"></a>定位元素</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">driver.findElement(By.id(<span class=\"string\">&quot;kw&quot;</span>)).sendKeys(<span class=\"string\">&quot;java&quot;</span>); <span class=\"comment\">//输入内容</span></span><br><span class=\"line\"></span><br><span class=\"line\">driver.findElement(By.id(<span class=\"string\">&quot;su&quot;</span>)).click(); <span class=\"comment\">//点击按钮</span></span><br><span class=\"line\"></span><br><span class=\"line\">List&lt;WebElement&gt; muchoCheese = driver.findElements(By.cssSelector(<span class=\"string\">&quot;#cheese li&quot;</span>));<span class=\"comment\">//获取多个与元素</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"获取页面cookie\"><a href=\"#获取页面cookie\" class=\"headerlink\" title=\"获取页面cookie\"></a>获取页面cookie</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Set&lt;Cookie&gt; cookies = driver.manage().getCookies();</span><br><span class=\"line\">    String cookieStr = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Cookie cookie : cookies) &#123;</span><br><span class=\"line\">            cookieStr+= cookie.getValue();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"浏览器加载扩展\"><a href=\"#浏览器加载扩展\" class=\"headerlink\" title=\"浏览器加载扩展\"></a>浏览器加载扩展</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">File plugPath = <span class=\"keyword\">new</span> File(<span class=\"string\">&quot;E:\\\\tsy\\\\tsy-tool.crx&quot;</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//创建options对象</span></span><br><span class=\"line\">      ChromeOptions options = <span class=\"keyword\">new</span> ChromeOptions();</span><br><span class=\"line\">     options.addExtensions(plugPath);   </span><br><span class=\"line\">     WebDriver driver = <span class=\"keyword\">new</span> ChromeDriver(options); <span class=\"comment\">//这里使用的是chrome</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"js数组方法整理","abbrlink":"5570a359","date":"2021-09-29T07:16:06.000Z","_content":"# 创建数组\n```javascript\n\nlet array = ['a', 'b']\n```\n# 访问数组\n\n```javascript\n\n  let a=array[0]\n\n  //a\n```\n# 遍历数组\n\n```javascript\n\n array.forEach(function(item, index, array) {\n  console.log(item, index)\n})\n```\n\n# 添加元素到数组的末尾\n\n```javascript\n\n array.push('c')\n```\n# 删除数组最后一个元素\n\n```javascript\n array.pop();\n```\n#  删除数组第一个元素\n\n```javascript\narray.shift()\n```\n# 添加元素到数组的第一位\n```javascript\n array.unshift('1')\n```\n\n# 获取数组的长度\n\n```javascript\nlet length=array.length;\n```\n\n# 获取某个元素在数组中的索引\n\n```javascript\n\n let index=array.indexOf('a')\n```\n\n# 通过索引删除某个元素\n\n```javascript\n\narray.splice(1, 1)\n```","source":"_posts/js/array.md","raw":"---\ntitle: js数组方法整理\ntags: JavaScript\nabbrlink: 5570a359\ndate: 2021-09-29 15:16:06\n---\n# 创建数组\n```javascript\n\nlet array = ['a', 'b']\n```\n# 访问数组\n\n```javascript\n\n  let a=array[0]\n\n  //a\n```\n# 遍历数组\n\n```javascript\n\n array.forEach(function(item, index, array) {\n  console.log(item, index)\n})\n```\n\n# 添加元素到数组的末尾\n\n```javascript\n\n array.push('c')\n```\n# 删除数组最后一个元素\n\n```javascript\n array.pop();\n```\n#  删除数组第一个元素\n\n```javascript\narray.shift()\n```\n# 添加元素到数组的第一位\n```javascript\n array.unshift('1')\n```\n\n# 获取数组的长度\n\n```javascript\nlet length=array.length;\n```\n\n# 获取某个元素在数组中的索引\n\n```javascript\n\n let index=array.indexOf('a')\n```\n\n# 通过索引删除某个元素\n\n```javascript\n\narray.splice(1, 1)\n```","slug":"js/array","published":1,"updated":"2021-09-29T07:26:57.707Z","_id":"cku56p6560000gsv9c4togc8j","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"创建数组\"><a href=\"#创建数组\" class=\"headerlink\" title=\"创建数组\"></a>创建数组</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>]</span><br></pre></td></tr></table></figure>\n<h1 id=\"访问数组\"><a href=\"#访问数组\" class=\"headerlink\" title=\"访问数组\"></a>访问数组</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a=array[<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//a</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"遍历数组\"><a href=\"#遍历数组\" class=\"headerlink\" title=\"遍历数组\"></a>遍历数组</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> array.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(item, index)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"添加元素到数组的末尾\"><a href=\"#添加元素到数组的末尾\" class=\"headerlink\" title=\"添加元素到数组的末尾\"></a>添加元素到数组的末尾</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">array.push(<span class=\"string\">&#x27;c&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h1 id=\"删除数组最后一个元素\"><a href=\"#删除数组最后一个元素\" class=\"headerlink\" title=\"删除数组最后一个元素\"></a>删除数组最后一个元素</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.pop();</span><br></pre></td></tr></table></figure>\n<h1 id=\"删除数组第一个元素\"><a href=\"#删除数组第一个元素\" class=\"headerlink\" title=\"删除数组第一个元素\"></a>删除数组第一个元素</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.shift()</span><br></pre></td></tr></table></figure>\n<h1 id=\"添加元素到数组的第一位\"><a href=\"#添加元素到数组的第一位\" class=\"headerlink\" title=\"添加元素到数组的第一位\"></a>添加元素到数组的第一位</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.unshift(<span class=\"string\">&#x27;1&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"获取数组的长度\"><a href=\"#获取数组的长度\" class=\"headerlink\" title=\"获取数组的长度\"></a>获取数组的长度</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> length=array.length;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"获取某个元素在数组中的索引\"><a href=\"#获取某个元素在数组中的索引\" class=\"headerlink\" title=\"获取某个元素在数组中的索引\"></a>获取某个元素在数组中的索引</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> index=array.indexOf(<span class=\"string\">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"通过索引删除某个元素\"><a href=\"#通过索引删除某个元素\" class=\"headerlink\" title=\"通过索引删除某个元素\"></a>通过索引删除某个元素</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">array.splice(<span class=\"number\">1</span>, <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"创建数组\"><a href=\"#创建数组\" class=\"headerlink\" title=\"创建数组\"></a>创建数组</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> array = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>]</span><br></pre></td></tr></table></figure>\n<h1 id=\"访问数组\"><a href=\"#访问数组\" class=\"headerlink\" title=\"访问数组\"></a>访问数组</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a=array[<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//a</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"遍历数组\"><a href=\"#遍历数组\" class=\"headerlink\" title=\"遍历数组\"></a>遍历数组</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> array.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, array</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(item, index)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"添加元素到数组的末尾\"><a href=\"#添加元素到数组的末尾\" class=\"headerlink\" title=\"添加元素到数组的末尾\"></a>添加元素到数组的末尾</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">array.push(<span class=\"string\">&#x27;c&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h1 id=\"删除数组最后一个元素\"><a href=\"#删除数组最后一个元素\" class=\"headerlink\" title=\"删除数组最后一个元素\"></a>删除数组最后一个元素</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.pop();</span><br></pre></td></tr></table></figure>\n<h1 id=\"删除数组第一个元素\"><a href=\"#删除数组第一个元素\" class=\"headerlink\" title=\"删除数组第一个元素\"></a>删除数组第一个元素</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.shift()</span><br></pre></td></tr></table></figure>\n<h1 id=\"添加元素到数组的第一位\"><a href=\"#添加元素到数组的第一位\" class=\"headerlink\" title=\"添加元素到数组的第一位\"></a>添加元素到数组的第一位</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.unshift(<span class=\"string\">&#x27;1&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"获取数组的长度\"><a href=\"#获取数组的长度\" class=\"headerlink\" title=\"获取数组的长度\"></a>获取数组的长度</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> length=array.length;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"获取某个元素在数组中的索引\"><a href=\"#获取某个元素在数组中的索引\" class=\"headerlink\" title=\"获取某个元素在数组中的索引\"></a>获取某个元素在数组中的索引</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> index=array.indexOf(<span class=\"string\">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"通过索引删除某个元素\"><a href=\"#通过索引删除某个元素\" class=\"headerlink\" title=\"通过索引删除某个元素\"></a>通过索引删除某个元素</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">array.splice(<span class=\"number\">1</span>, <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>"},{"title":"数据分享","abbrlink":"92a5aaba","date":"2021-10-28T01:32:17.000Z","_content":"\n\n# 历史上的今天\n\n \n```\n└─history\n    └─10\n        ├─21\n        └─22\n```\n根目录为月份,子目录是每天的历史数据。\n\n子目录中的`index.json`文件为当天发生的事情列表，其他为每个事件的详细信息,以`e_id`命名。\n\n [获取数据](https://github.com/lizeze/my_data)\n\n# 日历\n \n```\n├── calendar\n│   ├── 2021\n│   │   ├── 01\n│   │   │   ├── 01.json\n│   │   │   ├── 02.json\n\n```\n根目录为年,子目录是月份,以日期命名。\n\n [获取数据](https://github.com/lizeze/my_data)\n\n# 全国行政区\n\n[获取数据](https://github.com/lizeze/china_region)\n \n # 驾照题库\n \n 数据准备中\n\n","source":"_posts/share/分享数据.md","raw":"---\ntitle: 数据分享\ntags: 聚合数据\nabbrlink: 92a5aaba\ndate: 2021-10-28 09:32:17\n---\n\n\n# 历史上的今天\n\n \n```\n└─history\n    └─10\n        ├─21\n        └─22\n```\n根目录为月份,子目录是每天的历史数据。\n\n子目录中的`index.json`文件为当天发生的事情列表，其他为每个事件的详细信息,以`e_id`命名。\n\n [获取数据](https://github.com/lizeze/my_data)\n\n# 日历\n \n```\n├── calendar\n│   ├── 2021\n│   │   ├── 01\n│   │   │   ├── 01.json\n│   │   │   ├── 02.json\n\n```\n根目录为年,子目录是月份,以日期命名。\n\n [获取数据](https://github.com/lizeze/my_data)\n\n# 全国行政区\n\n[获取数据](https://github.com/lizeze/china_region)\n \n # 驾照题库\n \n 数据准备中\n\n","slug":"share/分享数据","published":1,"updated":"2021-10-28T01:38:26.199Z","_id":"ckva9vtat0000z8v9fpwk78jv","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"历史上的今天\"><a href=\"#历史上的今天\" class=\"headerlink\" title=\"历史上的今天\"></a>历史上的今天</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">└─history</span><br><span class=\"line\">    └─10</span><br><span class=\"line\">        ├─21</span><br><span class=\"line\">        └─22</span><br></pre></td></tr></table></figure>\n<p>根目录为月份,子目录是每天的历史数据。</p>\n<p>子目录中的<code>index.json</code>文件为当天发生的事情列表，其他为每个事件的详细信息,以<code>e_id</code>命名。</p>\n<p> <a href=\"https://github.com/lizeze/my_data\">获取数据</a></p>\n<h1 id=\"日历\"><a href=\"#日历\" class=\"headerlink\" title=\"日历\"></a>日历</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">├── calendar</span><br><span class=\"line\">│   ├── 2021</span><br><span class=\"line\">│   │   ├── 01</span><br><span class=\"line\">│   │   │   ├── 01.json</span><br><span class=\"line\">│   │   │   ├── 02.json</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>根目录为年,子目录是月份,以日期命名。</p>\n<p> <a href=\"https://github.com/lizeze/my_data\">获取数据</a></p>\n<h1 id=\"全国行政区\"><a href=\"#全国行政区\" class=\"headerlink\" title=\"全国行政区\"></a>全国行政区</h1><p><a href=\"https://github.com/lizeze/china_region\">获取数据</a></p>\n<h1 id=\"驾照题库\"><a href=\"#驾照题库\" class=\"headerlink\" title=\"驾照题库\"></a>驾照题库</h1><p> 数据准备中</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"历史上的今天\"><a href=\"#历史上的今天\" class=\"headerlink\" title=\"历史上的今天\"></a>历史上的今天</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">└─history</span><br><span class=\"line\">    └─10</span><br><span class=\"line\">        ├─21</span><br><span class=\"line\">        └─22</span><br></pre></td></tr></table></figure>\n<p>根目录为月份,子目录是每天的历史数据。</p>\n<p>子目录中的<code>index.json</code>文件为当天发生的事情列表，其他为每个事件的详细信息,以<code>e_id</code>命名。</p>\n<p> <a href=\"https://github.com/lizeze/my_data\">获取数据</a></p>\n<h1 id=\"日历\"><a href=\"#日历\" class=\"headerlink\" title=\"日历\"></a>日历</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">├── calendar</span><br><span class=\"line\">│   ├── 2021</span><br><span class=\"line\">│   │   ├── 01</span><br><span class=\"line\">│   │   │   ├── 01.json</span><br><span class=\"line\">│   │   │   ├── 02.json</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>根目录为年,子目录是月份,以日期命名。</p>\n<p> <a href=\"https://github.com/lizeze/my_data\">获取数据</a></p>\n<h1 id=\"全国行政区\"><a href=\"#全国行政区\" class=\"headerlink\" title=\"全国行政区\"></a>全国行政区</h1><p><a href=\"https://github.com/lizeze/china_region\">获取数据</a></p>\n<h1 id=\"驾照题库\"><a href=\"#驾照题库\" class=\"headerlink\" title=\"驾照题库\"></a>驾照题库</h1><p> 数据准备中</p>\n"},{"title":"css优先级","abbrlink":"8954c4f1","date":"2021-11-09T08:08:39.000Z","_content":"\n\n# 内联样式优先与Style标签\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Document</title>\n    <style>\n        h1 {\n            color: red;\n        }\n    </style>\n</head>\n<body>\n    <h1 style=\"color: blue;\">CSS测试</h1>\n</body>\n</html>\n```\n![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png)\n\n\n\n# 后声明的优先于先声明的\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>style与link</title>\n    <style>\n        h1 {\n            color: red;\n        }\n    </style>\n    <link rel=\"stylesheet\" href=\"./style.css\">\n</head>\n<body>\n    <h1>CSS测试</h1>\n</body>\n</html>\n```\n\n\n`style.css`\n\n```css\nh1{color: blue;}\n```\n![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png)\n\n# Style标签优先于link标签\n\n>style标签在link标签后面的前提下,其实也是先后顺序的比较\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>style与link</title>\n    <link rel=\"stylesheet\" href=\"./style.css\">\n</head>\n<body>\n    <style>\n        h1 {\n            color: red;\n        }\n    </style>\n    <h1>CSS测试</h1>\n</body>\n</html>\n```\n`style.css`\n```css\nh1{color: blue;}\n```\n![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png)\n\n# id优先与class\n > 即使class在id之后声明\n\n ```html\n <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>class与id</title>\n    <style>\n        #text {\n            color: red;\n        }\n        .text {\n            color: blue;\n        }\n    </style>\n</head>\n<body>\n    <h1 class=\"text\" id=\"text\">CSS测试</h1>\n</body>\n\n</html>\n ```\n ![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png)\n\n # 选择器选择器越详细优先级越高\n\n \n ```html\n <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>选择器优先级</title>\n    <style>\n        .parent h1 {\n            color: red;\n        }\n        h1 {\n            color: blue;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"parent\">\n        <h1 id=\"text\">CSS测试</h1>\n    </div>\n</body>\n</html>\n ```\n ![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png)","source":"_posts/css/css优先级.md","raw":"---\ntitle: css优先级\nabbrlink: 8954c4f1\ndate: 2021-11-09 16:08:39\ntags:\n---\n\n\n# 内联样式优先与Style标签\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Document</title>\n    <style>\n        h1 {\n            color: red;\n        }\n    </style>\n</head>\n<body>\n    <h1 style=\"color: blue;\">CSS测试</h1>\n</body>\n</html>\n```\n![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png)\n\n\n\n# 后声明的优先于先声明的\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>style与link</title>\n    <style>\n        h1 {\n            color: red;\n        }\n    </style>\n    <link rel=\"stylesheet\" href=\"./style.css\">\n</head>\n<body>\n    <h1>CSS测试</h1>\n</body>\n</html>\n```\n\n\n`style.css`\n\n```css\nh1{color: blue;}\n```\n![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png)\n\n# Style标签优先于link标签\n\n>style标签在link标签后面的前提下,其实也是先后顺序的比较\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>style与link</title>\n    <link rel=\"stylesheet\" href=\"./style.css\">\n</head>\n<body>\n    <style>\n        h1 {\n            color: red;\n        }\n    </style>\n    <h1>CSS测试</h1>\n</body>\n</html>\n```\n`style.css`\n```css\nh1{color: blue;}\n```\n![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png)\n\n# id优先与class\n > 即使class在id之后声明\n\n ```html\n <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>class与id</title>\n    <style>\n        #text {\n            color: red;\n        }\n        .text {\n            color: blue;\n        }\n    </style>\n</head>\n<body>\n    <h1 class=\"text\" id=\"text\">CSS测试</h1>\n</body>\n\n</html>\n ```\n ![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png)\n\n # 选择器选择器越详细优先级越高\n\n \n ```html\n <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>选择器优先级</title>\n    <style>\n        .parent h1 {\n            color: red;\n        }\n        h1 {\n            color: blue;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"parent\">\n        <h1 id=\"text\">CSS测试</h1>\n    </div>\n</body>\n</html>\n ```\n ![](https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png)","slug":"css/css优先级","published":1,"updated":"2021-11-09T08:09:10.308Z","_id":"ckvrtb4y60000vkv97xsu6rbj","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"内联样式优先与Style标签\"><a href=\"#内联样式优先与Style标签\" class=\"headerlink\" title=\"内联样式优先与Style标签\"></a>内联样式优先与Style标签</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;color: blue;&quot;</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png\"></p>\n<h1 id=\"后声明的优先于先声明的\"><a href=\"#后声明的优先于先声明的\" class=\"headerlink\" title=\"后声明的优先于先声明的\"></a>后声明的优先于先声明的</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>style与link<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;./style.css&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<p><code>style.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">h1</span>&#123;<span class=\"attribute\">color</span>: blue;&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png\"></p>\n<h1 id=\"Style标签优先于link标签\"><a href=\"#Style标签优先于link标签\" class=\"headerlink\" title=\"Style标签优先于link标签\"></a>Style标签优先于link标签</h1><blockquote>\n<p>style标签在link标签后面的前提下,其实也是先后顺序的比较</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>style与link<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;./style.css&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>style.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">h1</span>&#123;<span class=\"attribute\">color</span>: blue;&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png\"></p>\n<h1 id=\"id优先与class\"><a href=\"#id优先与class\" class=\"headerlink\" title=\"id优先与class\"></a>id优先与class</h1><blockquote>\n<p>即使class在id之后声明</p>\n</blockquote>\n <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>class与id<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-id\">#text</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.text</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: blue;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> <img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png\"></p>\n<h1 id=\"选择器选择器越详细优先级越高\"><a href=\"#选择器选择器越详细优先级越高\" class=\"headerlink\" title=\"选择器选择器越详细优先级越高\"></a>选择器选择器越详细优先级越高</h1> <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>选择器优先级<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.parent</span> <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: blue;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;parent&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> <img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"内联样式优先与Style标签\"><a href=\"#内联样式优先与Style标签\" class=\"headerlink\" title=\"内联样式优先与Style标签\"></a>内联样式优先与Style标签</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;color: blue;&quot;</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png\"></p>\n<h1 id=\"后声明的优先于先声明的\"><a href=\"#后声明的优先于先声明的\" class=\"headerlink\" title=\"后声明的优先于先声明的\"></a>后声明的优先于先声明的</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>style与link<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;./style.css&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<p><code>style.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">h1</span>&#123;<span class=\"attribute\">color</span>: blue;&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-001.png\"></p>\n<h1 id=\"Style标签优先于link标签\"><a href=\"#Style标签优先于link标签\" class=\"headerlink\" title=\"Style标签优先于link标签\"></a>Style标签优先于link标签</h1><blockquote>\n<p>style标签在link标签后面的前提下,其实也是先后顺序的比较</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>style与link<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;./style.css&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>style.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">h1</span>&#123;<span class=\"attribute\">color</span>: blue;&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png\"></p>\n<h1 id=\"id优先与class\"><a href=\"#id优先与class\" class=\"headerlink\" title=\"id优先与class\"></a>id优先与class</h1><blockquote>\n<p>即使class在id之后声明</p>\n</blockquote>\n <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>class与id<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-id\">#text</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.text</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: blue;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> <img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png\"></p>\n<h1 id=\"选择器选择器越详细优先级越高\"><a href=\"#选择器选择器越详细优先级越高\" class=\"headerlink\" title=\"选择器选择器越详细优先级越高\"></a>选择器选择器越详细优先级越高</h1> <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>选择器优先级<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.parent</span> <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">h1</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">            <span class=\"attribute\">color</span>: blue;</span></span><br><span class=\"line\"><span class=\"css\">        &#125;</span></span><br><span class=\"line\"><span class=\"css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;parent&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;text&quot;</span>&gt;</span>CSS测试<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> <img src=\"https://gitee.com/zeze.li/blogimage/raw/master/css-test-002.png\"></p>\n"},{"title":"webstorm与vscode格式化","abbrlink":"a710b611","date":"2021-11-26T01:15:04.000Z","_content":"\n\n到了新公司发现同事用的都是VSCode，而VSCode的格式化代码与WebStorm的不一致。\n\n因为前后端都做，用惯了JetBrains全家桶，导致不太适应VSCode，最后所以打算调整一下代码的格式化，继续用webstorm开发。\n\n* 自闭合的标签，闭合前补充空格\n\n`Settings > Editor > Code Style > HTML > Other(Tab页) > 勾选 in empty tag`\n\n* 句尾冒号分割，永远使用单引号，多行保留最后一项的逗号\n\n`Settings > Editor > Code Style > JavaScript > Punctuation(Tab页) >`\n```\nuse semicolon to terminate statement always\nuse single quotes always\nTrailing comma Add when multiline\n```\n \n* 使用空格代替tab，tab展示为两个空格，代码缩进为两个空格\n\n`Settings > Editor > Code Style > JavaScript > Tabs and Indents(Tab页) > 不勾选 Use Tab character`\n\n```\nTab Size: 2\nIndent: 2\nContinuation indent: 2\n```\n \n* 对象花括号和中间键值填充空格(包括ES6 的import export)\n\n`Settings > Editor > Code Style > JavaScript > Spaces(Tab页) > Within > 勾选Object literal braces 和 ES6 import/export braces`\n————————————————\n版权声明：本文为CSDN博主「咕了个咕」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/Azhuzhu_chaste/article/details/106636056","source":"_posts/tool/webstorm与vscode格式化.md","raw":"---\ntitle: webstorm与vscode格式化\ntags: jenkins\nabbrlink: a710b611\ndate: 2021-11-26 09:15:04\n---\n\n\n到了新公司发现同事用的都是VSCode，而VSCode的格式化代码与WebStorm的不一致。\n\n因为前后端都做，用惯了JetBrains全家桶，导致不太适应VSCode，最后所以打算调整一下代码的格式化，继续用webstorm开发。\n\n* 自闭合的标签，闭合前补充空格\n\n`Settings > Editor > Code Style > HTML > Other(Tab页) > 勾选 in empty tag`\n\n* 句尾冒号分割，永远使用单引号，多行保留最后一项的逗号\n\n`Settings > Editor > Code Style > JavaScript > Punctuation(Tab页) >`\n```\nuse semicolon to terminate statement always\nuse single quotes always\nTrailing comma Add when multiline\n```\n \n* 使用空格代替tab，tab展示为两个空格，代码缩进为两个空格\n\n`Settings > Editor > Code Style > JavaScript > Tabs and Indents(Tab页) > 不勾选 Use Tab character`\n\n```\nTab Size: 2\nIndent: 2\nContinuation indent: 2\n```\n \n* 对象花括号和中间键值填充空格(包括ES6 的import export)\n\n`Settings > Editor > Code Style > JavaScript > Spaces(Tab页) > Within > 勾选Object literal braces 和 ES6 import/export braces`\n————————————————\n版权声明：本文为CSDN博主「咕了个咕」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/Azhuzhu_chaste/article/details/106636056","slug":"tool/webstorm与vscode格式化","published":1,"updated":"2021-11-26T01:15:49.315Z","_id":"ckwfp11oq0000nwv99als1q3f","comments":1,"layout":"post","photos":[],"link":"","content":"<p>到了新公司发现同事用的都是VSCode，而VSCode的格式化代码与WebStorm的不一致。</p>\n<p>因为前后端都做，用惯了JetBrains全家桶，导致不太适应VSCode，最后所以打算调整一下代码的格式化，继续用webstorm开发。</p>\n<ul>\n<li>自闭合的标签，闭合前补充空格</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; HTML &gt; Other(Tab页) &gt; 勾选 in empty tag</code></p>\n<ul>\n<li>句尾冒号分割，永远使用单引号，多行保留最后一项的逗号</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; JavaScript &gt; Punctuation(Tab页) &gt;</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use semicolon to terminate statement always</span><br><span class=\"line\">use single quotes always</span><br><span class=\"line\">Trailing comma Add when multiline</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用空格代替tab，tab展示为两个空格，代码缩进为两个空格</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; JavaScript &gt; Tabs and Indents(Tab页) &gt; 不勾选 Use Tab character</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Tab Size: 2</span><br><span class=\"line\">Indent: 2</span><br><span class=\"line\">Continuation indent: 2</span><br></pre></td></tr></table></figure>\n<ul>\n<li>对象花括号和中间键值填充空格(包括ES6 的import export)</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; JavaScript &gt; Spaces(Tab页) &gt; Within &gt; 勾选Object literal braces 和 ES6 import/export braces</code><br>————————————————<br>版权声明：本文为CSDN博主「咕了个咕」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/Azhuzhu_chaste/article/details/106636056\">https://blog.csdn.net/Azhuzhu_chaste/article/details/106636056</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>到了新公司发现同事用的都是VSCode，而VSCode的格式化代码与WebStorm的不一致。</p>\n<p>因为前后端都做，用惯了JetBrains全家桶，导致不太适应VSCode，最后所以打算调整一下代码的格式化，继续用webstorm开发。</p>\n<ul>\n<li>自闭合的标签，闭合前补充空格</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; HTML &gt; Other(Tab页) &gt; 勾选 in empty tag</code></p>\n<ul>\n<li>句尾冒号分割，永远使用单引号，多行保留最后一项的逗号</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; JavaScript &gt; Punctuation(Tab页) &gt;</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use semicolon to terminate statement always</span><br><span class=\"line\">use single quotes always</span><br><span class=\"line\">Trailing comma Add when multiline</span><br></pre></td></tr></table></figure>\n<ul>\n<li>使用空格代替tab，tab展示为两个空格，代码缩进为两个空格</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; JavaScript &gt; Tabs and Indents(Tab页) &gt; 不勾选 Use Tab character</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Tab Size: 2</span><br><span class=\"line\">Indent: 2</span><br><span class=\"line\">Continuation indent: 2</span><br></pre></td></tr></table></figure>\n<ul>\n<li>对象花括号和中间键值填充空格(包括ES6 的import export)</li>\n</ul>\n<p><code>Settings &gt; Editor &gt; Code Style &gt; JavaScript &gt; Spaces(Tab页) &gt; Within &gt; 勾选Object literal braces 和 ES6 import/export braces</code><br>————————————————<br>版权声明：本文为CSDN博主「咕了个咕」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/Azhuzhu_chaste/article/details/106636056\">https://blog.csdn.net/Azhuzhu_chaste/article/details/106636056</a></p>\n"}],"PostAsset":[{"_id":"source/_posts/java/api自动增加前缀/api.png","slug":"api.png","post":"cktmoybk9000lkotrbmx6109f","modified":0,"renderable":0}],"PostCategory":[{"post_id":"cktmoybjw0005kotr3uv6dmi0","category_id":"cktmoybjz0008kotr38as2178","_id":"cktmoybk5000hkotrbj8b5x1t"},{"post_id":"cktmoybjy0007kotr24g501xx","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybka000nkotrhrei4rpw"},{"post_id":"cktmoybjz0009kotr08st2nsb","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybkd000ukotrewuehpoe"},{"post_id":"cktmoybk0000akotrdwmo5mff","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybkf000zkotr1jky6ods"},{"post_id":"cktmoybkc000skotretym9qgn","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybkg0013kotrcymp3j9w"},{"post_id":"cktmoybkd000wkotrajpc67f6","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybkg0016kotrbcp0gr9m"},{"post_id":"cktmoybk1000ckotrgit8hcx2","category_id":"cktmoybkd000tkotr34a5bvtv","_id":"cktmoybkh001bkotr58x6cn1d"},{"post_id":"cktmoybk2000ekotr4mqf80j4","category_id":"cktmoybkf0010kotrdky81ada","_id":"cktmoybki001fkotr2tmu5vnl"},{"post_id":"cktmoybkh0019kotr3o2ihus7","category_id":"cktmoybkf0010kotrdky81ada","_id":"cktmoybkk001ikotrbs0qh74u"},{"post_id":"cktmoybk4000gkotrffea2czh","category_id":"cktmoybkf0010kotrdky81ada","_id":"cktmoybkl001mkotra7k7a7go"},{"post_id":"cktmoybk7000jkotrfolr9d6c","category_id":"cktmoybkf0010kotrdky81ada","_id":"cktmoybkm001rkotr23o86upc"},{"post_id":"cktmoybkj001hkotr7jb5fdqg","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybkn001vkotr1sdo4vnk"},{"post_id":"cktmoybk9000lkotrbmx6109f","category_id":"cktmoybkf0010kotrdky81ada","_id":"cktmoybkp001zkotresvr9z5h"},{"post_id":"cktmoybka000pkotrcp1cc0uw","category_id":"cktmoybkf0010kotrdky81ada","_id":"cktmoybkr0024kotrfz6tc6zv"},{"post_id":"cktmoybke000xkotr0ucmckno","category_id":"cktmoybko001ykotr6qn8e6xj","_id":"cktmoybkt002bkotr035n7r2r"},{"post_id":"cktmoybkf0012kotr5gqre5lb","category_id":"cktmoybko001ykotr6qn8e6xj","_id":"cktmoybku002gkotrgay4hnhr"},{"post_id":"cktmoybkg0015kotr021d7gvx","category_id":"cktmoybkt002akotrdrvd5fig","_id":"cktmoybkw002okotr0adc13mb"},{"post_id":"cktmoybku002fkotraskrem0q","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybkx002rkotr220vadjx"},{"post_id":"cktmoybkv002kkotr2plyea9x","category_id":"cktmoybk1000dkotr66uj1n4z","_id":"cktmoybl0002ukotr1phpd0nv"},{"post_id":"cktmoybki001ckotrgqae5dxm","category_id":"cktmoybkt002akotrdrvd5fig","_id":"cktmoybl1002xkotrgeg5hp2b"},{"post_id":"cktmoybkj001gkotrbo7mcpns","category_id":"cktmoybkt002akotrdrvd5fig","_id":"cktmoybl20030kotr9mq50v5g"},{"post_id":"cktmoybkl001okotr3exd3cth","category_id":"cktmoybkt002akotrdrvd5fig","_id":"cktmoybl30033kotr2m8yhngd"},{"post_id":"cktmoybkm001tkotrgx6hb48l","category_id":"cktmoybl2002zkotre6uj5umb","_id":"cktmoybl40038kotr0wrh16dv"},{"post_id":"cktmoybkn001wkotr0o5l9s2c","category_id":"cktmoybl2002zkotre6uj5umb","_id":"cktmoybl4003dkotrcy3eh7u9"},{"post_id":"cktmoybkp0020kotr0ucvgpkq","category_id":"cktmoybl2002zkotre6uj5umb","_id":"cktmoybl7003gkotr2kfv00gp"},{"post_id":"cktmoybkr0025kotr6tp7fm1n","category_id":"cktmoybl2002zkotre6uj5umb","_id":"cktmoybl8003jkotr7rle3iyv"},{"post_id":"cktmoybks0029kotrbphrb9o3","category_id":"cktmoybl2002zkotre6uj5umb","_id":"cktmoybl8003mkotrat2mb0g1"},{"post_id":"cktmoybkw002mkotra5co83va","category_id":"cktmoybl7003ikotr19gm84rq","_id":"cktmoybl9003skotr20vtahfy"},{"post_id":"cktmoybkx002pkotr3kp4eb91","category_id":"cktmoybl7003ikotr19gm84rq","_id":"cktmoybla003vkotratfyffun"},{"post_id":"cktmoybky002skotrfr2ec69w","category_id":"cktmoybl7003ikotr19gm84rq","_id":"cktmoyblb003ykotr1t0e2o7e"},{"post_id":"cktmoybl0002vkotrg7wt2a22","category_id":"cktmoybl7003ikotr19gm84rq","_id":"cktmoyblb0042kotr5xefajqg"}],"PostTag":[{"post_id":"cktmoybju0003kotr5mcj59aq","tag_id":"cktmoybjx0006kotrbby98kdy","_id":"cktmoybka000okotrfpxw11j8"},{"post_id":"cktmoybju0003kotr5mcj59aq","tag_id":"cktmoybk0000bkotre9ow3zcv","_id":"cktmoybkb000qkotr0vws3brf"},{"post_id":"cktmoybju0003kotr5mcj59aq","tag_id":"cktmoybk4000fkotr9smcc8xw","_id":"cktmoybkd000vkotr58plewdd"},{"post_id":"cktmoybjw0005kotr3uv6dmi0","tag_id":"cktmoybk8000kkotrdepb5san","_id":"cktmoybkf0011kotrdpth511n"},{"post_id":"cktmoybjw0005kotr3uv6dmi0","tag_id":"cktmoybkb000rkotrd9dd7bfe","_id":"cktmoybkg0014kotr74gjfry8"},{"post_id":"cktmoybjy0007kotr24g501xx","tag_id":"cktmoybke000ykotrgzmz8vp2","_id":"cktmoybkh001akotr9mxl7wlu"},{"post_id":"cktmoybjz0009kotr08st2nsb","tag_id":"cktmoybkg0017kotrdirzb9lw","_id":"cktmoybkl001nkotrengshtuw"},{"post_id":"cktmoybjz0009kotr08st2nsb","tag_id":"cktmoybki001dkotr33h9079c","_id":"cktmoybkm001pkotr33v3491u"},{"post_id":"cktmoybkk001lkotrflvq3nhi","tag_id":"cktmoybk4000fkotr9smcc8xw","_id":"cktmoybkn001ukotracrd4rcb"},{"post_id":"cktmoybk0000akotrdwmo5mff","tag_id":"cktmoybkg0017kotrdirzb9lw","_id":"cktmoybko001xkotr3mme61ou"},{"post_id":"cktmoybk1000ckotrgit8hcx2","tag_id":"cktmoybkm001skotr25fphgkn","_id":"cktmoybkq0022kotrfwaqa1a0"},{"post_id":"cktmoybk2000ekotr4mqf80j4","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cktmoybku002ekotr7fak8kmn"},{"post_id":"cktmoybk2000ekotr4mqf80j4","tag_id":"cktmoybks0027kotr2cew1f8l","_id":"cktmoybkv002ikotr86o439ym"},{"post_id":"cktmoybk4000gkotrffea2czh","tag_id":"cktmoybkt002ckotr266yb3lg","_id":"cktmoybkw002lkotr5q0h7jut"},{"post_id":"cktmoybk7000jkotrfolr9d6c","tag_id":"cktmoybkv002jkotr7q2pgfk0","_id":"cktmoybl2002ykotr5stmf1ew"},{"post_id":"cktmoybk7000jkotrfolr9d6c","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cktmoybl20031kotr0sir5s9k"},{"post_id":"cktmoybk9000lkotrbmx6109f","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cktmoybl30036kotrf8f7919s"},{"post_id":"cktmoybk9000lkotrbmx6109f","tag_id":"cktmoybkt002ckotr266yb3lg","_id":"cktmoybl40039kotrg6c4f5u9"},{"post_id":"cktmoybka000pkotrcp1cc0uw","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cktmoybl4003bkotralx5gbev"},{"post_id":"cktmoybkc000skotretym9qgn","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cktmoybl8003lkotr0qpq4e1z"},{"post_id":"cktmoybkc000skotretym9qgn","tag_id":"cktmoybl5003ekotr1ev92s90","_id":"cktmoybl9003okotr9nu8g2tb"},{"post_id":"cktmoybkc000skotretym9qgn","tag_id":"cktmoybl7003hkotr3ayoebeq","_id":"cktmoybl9003qkotr1nw0blf3"},{"post_id":"cktmoybkd000wkotrajpc67f6","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cktmoybla003xkotr5ez8a46u"},{"post_id":"cktmoybkd000wkotrajpc67f6","tag_id":"cktmoybl5003ekotr1ev92s90","_id":"cktmoyblb003zkotrfwfoex6x"},{"post_id":"cktmoybkd000wkotrajpc67f6","tag_id":"cktmoybl9003tkotr1515f6wb","_id":"cktmoyblb0041kotreups00gm"},{"post_id":"cktmoybke000xkotr0ucmckno","tag_id":"cktmoybla003wkotr9uviertb","_id":"cktmoyblc0047kotrdapte7ll"},{"post_id":"cktmoybke000xkotr0ucmckno","tag_id":"cktmoyblb0040kotr6gtu6bk3","_id":"cktmoyblc0048kotr6ixrekt9"},{"post_id":"cktmoybke000xkotr0ucmckno","tag_id":"cktmoyblb0043kotr43t0eity","_id":"cktmoyble004akotr2avg3m7i"},{"post_id":"cktmoybke000xkotr0ucmckno","tag_id":"cktmoyblb0044kotrf6l161su","_id":"cktmoyble004bkotrayf66imx"},{"post_id":"cktmoybke000xkotr0ucmckno","tag_id":"cktmoyblb0045kotr3y2h3e32","_id":"cktmoyble004dkotrdf914h9q"},{"post_id":"cktmoybkf0012kotr5gqre5lb","tag_id":"cktmoyblc0046kotrafp55wm2","_id":"cktmoyblf004ekotreoyi2ocp"},{"post_id":"cktmoybkg0015kotr021d7gvx","tag_id":"cktmoyblc0049kotr9x690gbh","_id":"cktmoyblf004hkotrag906vrr"},{"post_id":"cktmoybkg0015kotr021d7gvx","tag_id":"cktmoyble004ckotrfpvsd4s8","_id":"cktmoyblf004ikotr7d4qcag7"},{"post_id":"cktmoybkg0015kotr021d7gvx","tag_id":"cktmoyblf004fkotre8zx6gj0","_id":"cktmoyblg004kkotrgs2z8czf"},{"post_id":"cktmoybkh0019kotr3o2ihus7","tag_id":"cktmoyblc0049kotr9x690gbh","_id":"cktmoyblg004mkotrfphehbvh"},{"post_id":"cktmoybkh0019kotr3o2ihus7","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cktmoyblg004nkotrh66zfa1f"},{"post_id":"cktmoybki001ckotrgqae5dxm","tag_id":"cktmoyblc0049kotr9x690gbh","_id":"cktmoyblh004qkotr49oi813v"},{"post_id":"cktmoybki001ckotrgqae5dxm","tag_id":"cktmoyblg004okotrb6hn4ot3","_id":"cktmoyblh004rkotr3151g2yw"},{"post_id":"cktmoybkj001gkotrbo7mcpns","tag_id":"cktmoyblh004pkotr2ql5chrh","_id":"cktmoybli004vkotrf6is0v6p"},{"post_id":"cktmoybkj001gkotrbo7mcpns","tag_id":"cktmoyblc0049kotr9x690gbh","_id":"cktmoyblj004wkotrac3a5tr4"},{"post_id":"cktmoybkj001gkotrbo7mcpns","tag_id":"cktmoyblg004okotrb6hn4ot3","_id":"cktmoyblj004ykotr4r5ffgk6"},{"post_id":"cktmoybkj001hkotr7jb5fdqg","tag_id":"cktmoybli004ukotrhiyi5trj","_id":"cktmoyblj004zkotr17828fdv"},{"post_id":"cktmoybkj001hkotr7jb5fdqg","tag_id":"cktmoybk4000fkotr9smcc8xw","_id":"cktmoyblj0051kotrcqbiftzq"},{"post_id":"cktmoybkl001okotr3exd3cth","tag_id":"cktmoyblc0049kotr9x690gbh","_id":"cktmoyblk0052kotr4ouxat63"},{"post_id":"cktmoybkm001tkotrgx6hb48l","tag_id":"cktmoyblj0050kotrcwc496r4","_id":"cktmoyblk0054kotr16je92u0"},{"post_id":"cktmoybkn001wkotr0o5l9s2c","tag_id":"cktmoyblj0050kotrcwc496r4","_id":"cktmoyblk0056kotr9383ewue"},{"post_id":"cktmoybkp0020kotr0ucvgpkq","tag_id":"cktmoyblk0055kotr4b7a2u45","_id":"cktmoybll0058kotr82h78d2m"},{"post_id":"cktmoybkq0023kotr8gzb46fl","tag_id":"cktmoyblg004okotrb6hn4ot3","_id":"cktmoybll005akotr6us020xn"},{"post_id":"cktmoybkr0025kotr6tp7fm1n","tag_id":"cktmoyblg004okotrb6hn4ot3","_id":"cktmoybll005ckotr549adryn"},{"post_id":"cktmoybks0028kotr37fp7tc6","tag_id":"cktmoybll005bkotrhs602p18","_id":"cktmoyblm005ekotr5izkhl5t"},{"post_id":"cktmoybks0029kotrbphrb9o3","tag_id":"cktmoyblj0050kotrcwc496r4","_id":"cktmoybln005hkotr2bie1i0v"},{"post_id":"cktmoybks0029kotrbphrb9o3","tag_id":"cktmoyblm005fkotredb15b79","_id":"cktmoybln005ikotr151d3yjo"},{"post_id":"cktmoybku002fkotraskrem0q","tag_id":"cktmoyblm005gkotrbvdvgemp","_id":"cktmoyblo005mkotr87vode16"},{"post_id":"cktmoybku002fkotraskrem0q","tag_id":"cktmoybln005jkotrfw4w17ok","_id":"cktmoyblo005nkotr6l2e2csc"},{"post_id":"cktmoybku002fkotraskrem0q","tag_id":"cktmoybln005kkotrhdpyfd14","_id":"cktmoyblp005pkotr6glt1e8j"},{"post_id":"cktmoybku002fkotraskrem0q","tag_id":"cktmoybjx0006kotrbby98kdy","_id":"cktmoyblp005qkotr14dsar3d"},{"post_id":"cktmoybkv002kkotr2plyea9x","tag_id":"cktmoyblo005lkotr0ig55ht7","_id":"cktmoyblp005skotr6szr3n3v"},{"post_id":"cktmoybkw002mkotra5co83va","tag_id":"cktmoyblo005okotr751h308w","_id":"cktmoyblq005ukotr73258863"},{"post_id":"cktmoybkw002mkotra5co83va","tag_id":"cktmoyblb0045kotr3y2h3e32","_id":"cktmoyblq005vkotra9dp1sdr"},{"post_id":"cktmoybkx002pkotr3kp4eb91","tag_id":"cktmoyblo005okotr751h308w","_id":"cktmoyblr005ykotr71wfbr6g"},{"post_id":"cktmoybkx002pkotr3kp4eb91","tag_id":"cktmoyblb0045kotr3y2h3e32","_id":"cktmoyblr005zkotr1xeb2usp"},{"post_id":"cktmoybky002skotrfr2ec69w","tag_id":"cktmoyblo005okotr751h308w","_id":"cktmoyblr0062kotr2ev96trc"},{"post_id":"cktmoybky002skotrfr2ec69w","tag_id":"cktmoyblb0045kotr3y2h3e32","_id":"cktmoyblr0063kotr5pin3kl4"},{"post_id":"cktmoybl0002vkotrg7wt2a22","tag_id":"cktmoyblo005okotr751h308w","_id":"cktmoybls0065kotr4sqx8k01"},{"post_id":"cktmoybl0002vkotrg7wt2a22","tag_id":"cktmoyblb0045kotr3y2h3e32","_id":"cktmoybls0066kotrbxundieh"},{"post_id":"cktnnps03000044tr6tzrcg51","tag_id":"cktmoybln005jkotrfw4w17ok","_id":"cktnnps07000144trcq8m0bpj"},{"post_id":"ckto4p4z30000qstrdlzkftna","tag_id":"cktmoybla003wkotr9uviertb","_id":"ckto4p4zi0003qstr22r7hha0"},{"post_id":"cku0nknu70000egtr5xsq6h6f","tag_id":"cktmoybla003wkotr9uviertb","_id":"cku0nknu90001egtr74n105jf"},{"post_id":"cku0tli3l000008trgec944ii","tag_id":"cktmoybla003wkotr9uviertb","_id":"cku0tm1e0000108trhuzb7l1p"},{"post_id":"cku4yz409000090v9cu6tg2fe","tag_id":"cktmoybkq0021kotr7ygbdjq7","_id":"cku4yz40e000190v91ygv7q8c"},{"post_id":"cku56p6560000gsv9c4togc8j","tag_id":"cktmoybla003wkotr9uviertb","_id":"cku56p6580001gsv9fkzhfzbi"},{"post_id":"ckva9vtat0000z8v9fpwk78jv","tag_id":"ckva9vtaw0001z8v9gpzu1vuz","_id":"ckva9vtb70002z8v9g4x433un"},{"post_id":"ckwfp11oq0000nwv99als1q3f","tag_id":"cktmoybll005bkotrhs602p18","_id":"ckwfp11os0001nwv98atb91ls"}],"Tag":[{"name":"wechat","_id":"cktmoybjx0006kotrbby98kdy"},{"name":"小程序","_id":"cktmoybk0000bkotre9ow3zcv"},{"name":"node","_id":"cktmoybk4000fkotr9smcc8xw"},{"name":"docker","_id":"cktmoybk8000kkotrdepb5san"},{"name":"mysql","_id":"cktmoybkb000rkotrd9dd7bfe"},{"name":"css","_id":"cktmoybke000ykotrgzmz8vp2"},{"name":"git","_id":"cktmoybkg0017kotrdirzb9lw"},{"name":"ssh","_id":"cktmoybki001dkotr33h9079c"},{"name":"html","_id":"cktmoybkm001skotr25fphgkn"},{"name":"java","_id":"cktmoybkq0021kotr7ygbdjq7"},{"name":"异常","_id":"cktmoybks0027kotr2cew1f8l"},{"name":"springboot","_id":"cktmoybkt002ckotr266yb3lg"},{"name":"mybatis-plus","_id":"cktmoybkv002jkotr7q2pgfk0"},{"name":"maven","_id":"cktmoybl5003ekotr1ev92s90"},{"name":"gpg","_id":"cktmoybl7003hkotr3ayoebeq"},{"name":"nexus","_id":"cktmoybl9003tkotr1515f6wb"},{"name":"JavaScript","_id":"cktmoybla003wkotr9uviertb"},{"name":"es6","_id":"cktmoyblb0040kotr6gtu6bk3"},{"name":"es5","_id":"cktmoyblb0043kotr43t0eity"},{"name":"babel","_id":"cktmoyblb0044kotrf6l161su"},{"name":"webpack","_id":"cktmoyblb0045kotr3y2h3e32"},{"name":"js","_id":"cktmoyblc0046kotrafp55wm2"},{"name":"nginx","_id":"cktmoyblc0049kotr9x690gbh"},{"name":"proxy","_id":"cktmoyble004ckotrfpvsd4s8"},{"name":"cache","_id":"cktmoyblf004fkotre8zx6gj0"},{"name":"linux","_id":"cktmoyblg004okotrb6hn4ot3"},{"name":"https","_id":"cktmoyblh004pkotr2ql5chrh"},{"name":"nvm","_id":"cktmoybli004ukotrhiyi5trj"},{"name":"ubuntu","_id":"cktmoyblj0050kotrcwc496r4"},{"name":"centos","_id":"cktmoyblk0055kotr4b7a2u45"},{"name":"jenkins","_id":"cktmoybll005bkotrhs602p18"},{"name":"webstorm","_id":"cktmoyblm005fkotredb15b79"},{"name":"gitee","_id":"cktmoyblm005gkotrbvdvgemp"},{"name":"github","_id":"cktmoybln005jkotrfw4w17ok"},{"name":"email","_id":"cktmoybln005kkotrhdpyfd14"},{"name":"JetBrains","_id":"cktmoyblo005lkotr0ig55ht7"},{"name":"typescript","_id":"cktmoyblo005okotr751h308w"},{"name":"ES6","_id":"ckto4p4z70001qstrhbne1w0y"},{"name":"聚合数据","_id":"ckva9vtaw0001z8v9gpzu1vuz"}]}}